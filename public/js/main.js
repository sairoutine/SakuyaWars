!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/js/",n(n.s=40)}([function(t,e,n){"use strict";t.exports=n(42)},function(t,e,n){"use strict";var i={inherit:function(t,e){for(var n in t.prototype=function(t){if(Object.create)return Object.create(t);var e=function(){};return e.prototype=t,new e}(e.prototype),t.prototype.constructor=t,e)t[n]=e[n]},loop:function(t,e){for(var n=0;n<t;n++)e(n)},radianToTheta:function(t){return 180*t/Math.PI|0},thetaToRadian:function(t){return t*Math.PI/180},calcMoveXByVelocity:function(t){return t.magnitude*Math.cos(i.thetaToRadian(t.theta))},calcMoveYByVelocity:function(t){return t.magnitude*Math.sin(i.thetaToRadian(t.theta))},hexToRGBString:function(t){var e="#"===t.charAt(0)?t.substring(1,7):t;return"rgb("+parseInt(e.substring(0,2),16)+", "+parseInt(e.substring(2,4),16)+", "+parseInt(e.substring(4,6),16)+")"},clamp:function(t,e,n){return t<e?e:t>n?n:t},isElectron:function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)},isMobile:function(){return!!navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i)},canPlayOgg:function(){var t=document.createElement("audio");return!!t.canPlayType&&t.canPlayType("audio/ogg")},getRandomInt:function(t,e){return 1===arguments.length&&(e=arguments[0],t=1),Math.floor(Math.random()*(e-t+1))+t},downloadBlob:function(t,e){var n=(window.URL||window.webkitURL).createObjectURL(t),i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null);var o=document.createElementNS("http://www.w3.org/1999/xhtml","a");o.href=n,o.download=e,o.dispatchEvent(i)},shallowCopyHash:function(t){var e={};for(var n in t)e[n]=t[n];return e},assign:function(t,e){if(!t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),i=1;i<arguments.length;i++){var o=arguments[i];if(o)for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n[r]=o[r])}return n},bind:function(t,e){if("function"!=typeof t)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var n=Array.prototype.slice.call(arguments,1),i=t,o=function(){},r=function(){return i.apply(t instanceof o?t:e,n.concat(Array.prototype.slice.call(arguments)))};return t.prototype&&(o.prototype=t.prototype),r.prototype=new o,r},defineProperty:function(t,e){var n="_"+e;t.prototype[e]=function(t){return void 0!==t&&(this[n]=t),this[n]}},repeat:function(t,e){if((e=+e)<0)throw new RangeError("repeat count must be non-negative");if(e===1/0)throw new RangeError("repeat count must be less than infinity");if(e|=0,0===t.length||0===e)return"";if(t.length*e>=1<<28)throw new RangeError("repeat count must not overflow maximum string size");for(e>>=1;e;)t+=t,e>>=1;return t+=t.substring(0,t.length*e-t.length)}};t.exports=i},function(t,e,n){"use strict";t.exports={DEBUG:!1,DEBUG_MUTE:!0,DEBUG_SCENE:"title",DEBUG_STAGE_NO:0,SCORE_TO_SHOW_OMAKE:1e9,TIMESTOP_FRAME:600,TIME_TO_USE_TIMESTOP_FRAME:1200,P_MAX:600,FRAME_TO_RECOVER_P:6,UNIT_GENERATED_AREA_LEFT_X:100,UNIT_GENERATED_AREA_RIGHT_X:200,UNIT_GENERATED_AREA_UP_Y:400,UNIT_GENERATED_AREA_DOWN_Y:450,ENEMY_GENERATED_AREA_LEFT_X:650,ENEMY_GENERATED_AREA_RIGHT_X:700,ENEMY_GENERATED_AREA_UP_Y:400,ENEMY_GENERATED_AREA_DOWN_Y:450,UNIT_TYPE_BAZOOKA:1,UNIT_TYPE_MAGICIAN:2,UNIT_TYPE_MANDORAGORA:3,UNIT_TYPE_MEISAKU:4,UNIT_TYPE_MMD:5,UNIT_TYPE_NORMAL1:6,UNIT_TYPE_NORMAL2:7,UNIT_TYPE_TEA:8,UNIT_TYPE_TUPAI:9,UNIT_TYPE_YOYOMU:10}},function(t,e,n){"use strict";var i=n(0).Object.Base,o=n(0).Util,r=n(38),a=function(t){i.apply(this,arguments),this._attack_collision=new r(t,this.attackCollisionWidth(),this.attackCollisionHeight()),this._body_collision=new r(t,this.bodyCollisionWidth(),this.bodyCollisionHeight()),this.addSubObjects([this._attack_collision,this._body_collision]),this._status=this.isStandType()?1:0,this._remaining_dead_frame=0,this._remaining_attacking_frame=0,this._remaining_stopping_frame=0,this._attack_effect_x=0,this._attack_effect_y=0};o.inherit(a,i),o.defineProperty(a,"hp"),a.prototype.init=function(){i.prototype.init.apply(this,arguments),this._status=this.isStandType()?1:0,this._remaining_dead_frame=0,this._remaining_attacking_frame=0,this._remaining_stopping_frame=0,this._attack_effect_x=0,this._attack_effect_y=0,this.hp(this.maxHP())},a.prototype.update=function(){if(i.prototype.update.apply(this,arguments),!this.isDead()&&this.hp()<=0&&(this._status=3,this.scene.mission_manager.notifyUnitDied(),this.core.audio_loader.playSound(this.deadSound()),this._remaining_dead_frame=30),this.isWalking()){if(this.isStandType())throw new Error("stand type unit can't walk");this.x(this.x()+this.speed()),this._attackIfTargetIsNearby()}else if(this.isStopping()){if(this._remaining_stopping_frame--,this._remaining_stopping_frame<=0)this._attackIfTargetIsNearby()||this.isStandType()||(this._status=0)}else if(this.isAttacking())this._remaining_attacking_frame--,this._remaining_attacking_frame<=0&&(this._status=1,this._remaining_stopping_frame=30,this._attack_effect_x=0,this._attack_effect_y=0);else if(this.isDead()&&(this._remaining_dead_frame--,this._remaining_dead_frame<=0))return void this.scene.units.removeObject(this)},a.prototype._attackIfTargetIsNearby=function(){var t=this,e=null;if(t.attackCollision().intersect(this.scene.currentBoss())&&(e=this.scene.currentBoss()),this.scene.enemies.forEach(function(n){t.attackCollision().intersect(n.bodyCollision())&&(e=n)}),e){this._status=2,this._remaining_attacking_frame=30;var n=t.damage();e.reduceHP(n),e.hp()<=0&&this.scene.mission_manager.notifyEnemyKilled(this,e),this._attack_effect_x=e.x(),this._attack_effect_y=e.y(),this.core.audio_loader.playSound(this.attackSound())}return!!e},a.prototype.draw=function(){i.prototype.draw.apply(this,arguments);var t,e=this.core.ctx;if(this.core.debug_manager.get("is_show_hp")&&(e.save(),e.fillStyle="blue",e.textAlign="center",e.font="12px 'MyFont'",e.fillText(this.hp()+" / "+this.maxHP(),this.x(),this.y()-100),e.restore()),this.isWalking())t=(this.scene.frame_count/20|0)%2==0?this.core.image_loader.getImage(this.walkImage1()):this.core.image_loader.getImage(this.walkImage2());else if(this.isStopping())t=this.core.image_loader.getImage(this.stoppingImage());else if(this.isDead())t=this.core.image_loader.getImage(this.deadImage());else{if(!this.isAttacking())throw new Error("Illegal status.");var n=this.attackImages();if(0===n.length)throw new Error("Specify attackImages.");var o=((30-this._remaining_attacking_frame)/30*n.length|0)%n.length;t=this.core.image_loader.getImage(n[o])}if(e.save(),e.translate(this.x(),this.y()),e.drawImage(t,-t.width/2+100,-t.height/2),e.restore(),this._attack_effect_x&&this._attack_effect_y&&this.attackEffect()){var r=this.core.image_loader.getImage(this.attackEffect());e.save(),e.translate(this._attack_effect_x,this._attack_effect_y),e.drawImage(r,-r.width/2,-r.height/2),e.restore()}},a.prototype.reduceHP=function(t){this.hp(this.hp()-t)},a.prototype.isStandType=function(){return!this.walkImage1()&&!this.walkImage2()},a.prototype.isWalking=function(){return 0===this._status},a.prototype.isStopping=function(){return 1===this._status},a.prototype.isAttacking=function(){return 2===this._status},a.prototype.isDead=function(){return 3===this._status},a.prototype.isCollision=function(t){return this.hp()>0},a.prototype.attackCollision=function(){return this._attack_collision},a.prototype.bodyCollision=function(){return this._body_collision},a.prototype.consumedP=function(){return this.constructor.consumedP()},a.prototype.stoppingImage=function(){throw new Error("stoppingImage method must be defined.")},a.prototype.attackImages=function(){return[]},a.prototype.deadImage=function(){throw new Error("deadImage method must be defined.")},a.prototype.walkImage1=function(){return""},a.prototype.walkImage2=function(){return""},a.prototype.attackEffect=function(){return""},a.buttonImage=function(){throw new Error("buttonImage method must be defined.")},a.prototype.deadSound=function(){return"unit_default_damage"},a.prototype.attackSound=function(){return"unit_default_attack2"},a.prototype.type=function(){throw new Error("type method must be defined.")},a.prototype.attackCollisionWidth=function(){throw new Error("attackCollisionWidth method must be defined.")},a.prototype.attackCollisionHeight=function(){throw new Error("attackCollisionHeight method must be defined.")},a.prototype.bodyCollisionWidth=function(){throw new Error("bodyCollisionWidth method must be defined.")},a.prototype.bodyCollisionHeight=function(){throw new Error("bodyCollisionHeight method must be defined.")},a.prototype.maxHP=function(){throw new Error("maxHP method must be defined.")},a.prototype.damage=function(){throw new Error("damage method must be defined.")},a.prototype.speed=function(){throw new Error("speed method must be defined.")},a.consumedP=function(){throw new Error("consumedP method must be defined.")},t.exports=a},function(t,e,n){"use strict";var i=n(23);t.exports=i.object_base},function(t,e,n){"use strict";t.exports={UP:1,DOWN:2,LEFT:4,RIGHT:8,MENU:16,A:32,B:64,X:128,Y:256,L1:512,R1:1024,L2:2048,R2:4096,SELECT:8192,START:16384,L3:32768,R3:65536}},function(t,e,n){"use strict";var i=n(0).Object.Base,o=n(0).Util,r=n(38),a=function(t){i.apply(this,arguments),this._attack_collision=new r(t,this.attackCollisionWidth(),this.attackCollisionHeight()),this._body_collision=new r(t,this.bodyCollisionWidth(),this.bodyCollisionHeight()),this.addSubObjects([this._attack_collision,this._body_collision]),this._status=0,this._remaining_dead_frame=0,this._remaining_attacking_frame=0,this._remaining_stopping_frame=0};o.inherit(a,i),o.defineProperty(a,"hp"),a.prototype.init=function(){i.prototype.init.apply(this,arguments),this._status=0,this._remaining_dead_frame=0,this._remaining_attacking_frame=0,this._remaining_stopping_frame=0,this.hp(this.maxHP())},a.prototype.update=function(){if(i.prototype.update.apply(this,arguments),!this.scene.isTimeStop())if(!this.isDead()&&this.hp()<=0&&(this._status=3,this.core.audio_loader.playSound("enemy_damage"),this._remaining_dead_frame=30),this.isWalking()){this.x(this.x()-this.speed());var t=this.scene.fort;this.bodyCollision().intersect(t)&&this.scene.notifyGameover(),this._attackIfTargetIsNearby()}else if(this.isStopping()){if(this._remaining_stopping_frame--,this._remaining_stopping_frame<=0)this._attackIfTargetIsNearby()||(this._status=0)}else if(this.isAttacking())this._remaining_attacking_frame--,this._remaining_attacking_frame<=0&&(this._status=1,this._remaining_stopping_frame=30);else if(this.isDead()&&(this._remaining_dead_frame--,this._remaining_dead_frame<=0))return void this.scene.enemies.removeObject(this)},a.prototype._attackIfTargetIsNearby=function(){var t=this,e=null;if(this.scene.units.forEach(function(n){t.attackCollision().intersect(n.bodyCollision())&&(e=n)}),e){this._status=2,this._remaining_attacking_frame=30;var n=t.damage();e.reduceHP(n),this.core.audio_loader.playSound("enemy_attack")}return!!e},a.prototype.draw=function(){i.prototype.draw.apply(this,arguments);var t,e=this.core.ctx;if(this.core.debug_manager.get("is_show_hp")&&(e.save(),e.fillStyle="red",e.textAlign="center",e.font="12px 'MyFont'",e.fillText(this.hp()+" / "+this.maxHP(),this.x(),this.y()-50),e.restore()),this.isWalking()||this.isStopping())t=this.scene.isTimeStop()?this.core.image_loader.getImage(this.walkImage1()):(this.scene.frame_count/20|0)%2==0?this.core.image_loader.getImage(this.walkImage1()):this.core.image_loader.getImage(this.walkImage2());else if(this.isDead())t=this.core.image_loader.getImage(this.deadImage());else{if(!this.isAttacking())throw new Error("Illegal status.");t=this.core.image_loader.getImage(this.attackImage())}e.save(),e.translate(this.x(),this.y()),e.drawImage(t,-t.width/2-100,-t.height/2),e.restore()},a.prototype.reduceHP=function(t){this.hp(this.hp()-t)},a.prototype.isWalking=function(){return 0===this._status},a.prototype.isStopping=function(){return 1===this._status},a.prototype.isAttacking=function(){return 2===this._status},a.prototype.isDead=function(){return 3===this._status},a.prototype.isCollision=function(t){return this.hp()>0},a.prototype.attackCollision=function(){return this._attack_collision},a.prototype.bodyCollision=function(){return this._body_collision},a.prototype.attackImage=function(){throw new Error("attackImage method must be defined.")},a.prototype.deadImage=function(){throw new Error("deadImage method must be defined.")},a.prototype.walkImage1=function(){throw new Error("walkImage1 method must be defined.")},a.prototype.walkImage2=function(){throw new Error("walkImage2 method must be defined.")},a.prototype.attackCollisionWidth=function(){throw new Error("attackCollisionWidth method must be defined.")},a.prototype.attackCollisionHeight=function(){throw new Error("attackCollisionHeight method must be defined.")},a.prototype.bodyCollisionWidth=function(){throw new Error("bodyCollisionWidth method must be defined.")},a.prototype.bodyCollisionHeight=function(){throw new Error("bodyCollisionHeight method must be defined.")},a.prototype.maxHP=function(){throw new Error("maxHP method must be defined.")},a.prototype.damage=function(){throw new Error("damage method must be defined.")},a.prototype.speed=function(){throw new Error("speed method must be defined.")},a.emergeCoefficient=function(){throw new Error("emergeCoefficient method must be defined.")},t.exports=a},function(t,e,n){"use strict";var i=n(4),o=function(t,e){i.apply(this,arguments),e=e||{},this._default_property={x:e.x||0,y:e.y||0,children:e.children||[]},this._event_to_callback={update:null,beforedraw:null,click:null,clickstart:null,clickend:null,draw:null},this._move_on_click_px=0,this.objects=this._default_property.children,this._show_call_count=0,this._is_clicked=!1};n(1).inherit(o,i),o.prototype.init=function(){this.objects=this._default_property.children,i.prototype.init.apply(this,arguments),this._show_call_count=0,this._is_clicked=!1,this.x(this._default_property.x),this.y(this._default_property.y),this.show()},o.prototype.update=function(){i.prototype.update.apply(this,arguments),this.isEventSet("update")&&this._callEvent("update"),this.isShow()&&this._updateClick()},o.prototype._updateClick=function(){var t=this.core.input_manager.mousePositionX(),e=this.core.input_manager.mousePositionY();this.core.input_manager.isLeftClickPush()?(this.isEventSet("click")||this.isEventSet("clickstart")||this.isEventSet("clickend")||this._move_on_click_px)&&this.checkCollisionWithPosition(t,e)&&(this._is_clicked=!0,this._moveOnClickStart(),this.isEventSet("clickstart")&&this._callEvent("clickstart")):this.core.input_manager.isLeftClickRelease()&&this._is_clicked&&(this._is_clicked=!1,this._moveOnClickEnd(),this.isEventSet("clickend")&&this._callEvent("clickend"),this.checkCollisionWithPosition(t,e)&&this.isEventSet("click")&&this._callEvent("click"))},o.prototype.beforeDraw=function(){i.prototype.beforeDraw.apply(this,arguments),this.isEventSet("beforedraw")&&this._callEvent("beforedraw")},o.prototype.draw=function(){this.isShow()&&(i.prototype.draw.apply(this,arguments),this.isEventSet("draw")&&this._callEvent("draw"))},o.prototype.setMoveOnClick=function(){return this._move_on_click_px=3,this},o.prototype.on=function(t,e){return this._event_to_callback[t]=e,this},o.prototype.removeEvent=function(t){return this._event_to_callback[t]=null,this},o.prototype.isEventSet=function(t){return!!this._event_to_callback[t]},o.prototype.isShow=function(){return this._show_call_count>0},o.prototype.collisionWidth=function(){return this.width()},o.prototype.collisionHeight=function(){return this.height()},o.prototype.show=function(){this._show_call_count=1},o.prototype.hide=function(){this._show_call_count=0,this._is_clicked=!1},o.prototype._callEvent=function(t){this._event_to_callback[t].apply(this)},o.prototype._moveOnClickStart=function(){if(0!==this._move_on_click_px){this.x(this.x()+this._move_on_click_px),this.y(this.y()+this._move_on_click_px);for(var t=0,e=this.objects.length;t<e;t++){var n=this.objects[t];n.x(n.x()+this._move_on_click_px),n.y(n.y()+this._move_on_click_px)}}},o.prototype._moveOnClickEnd=function(){if(0!==this._move_on_click_px){this.x(this.x()-this._move_on_click_px),this.y(this.y()-this._move_on_click_px);for(var t=0,e=this.objects.length;t<e;t++){var n=this.objects[t];n.x(n.x()-this._move_on_click_px),n.y(n.y()-this._move_on_click_px)}}},t.exports=o},function(t,e,n){"use strict";var i=n(4),o=n(1),r=function(t){this.core=t,this.parent=null,this.width=this.core.width,this.height=this.core.height,this._x=0,this._y=0,this.frame_count=0,this._is_inited=!1,this.objects=[],this.current_scene=null,this._reserved_next_scene=null,this._is_reserved_next_scene_init=!0,this.scenes={},this._wait_to_start_bgm_name=null,this._wait_to_start_bgm_duration=null,this._wait_to_start_bgm_start_frame_count=null,this._background_color=null,this.ui=new a(this),this.addObject(this.ui)};r.prototype.init=function(){this.current_scene=null,this._reserved_next_scene=null,this._is_reserved_next_scene_init=!0,this.frame_count=0,this._is_inited=!0,this._wait_to_start_bgm_name=null,this._wait_to_start_bgm_duration=null,this._wait_to_start_bgm_start_frame_count=null;for(var t=0,e=this.objects.length;t<e;t++)this.objects[t].init()},r.prototype.update=function(){this.frame_count++,this._wait_to_start_bgm_name&&this.frame_count-this._wait_to_start_bgm_start_frame_count>=this._wait_to_start_bgm_duration&&(this.core.audio_loader.playBGM(this._wait_to_start_bgm_name),this._wait_to_start_bgm_name=null,this._wait_to_start_bgm_duration=null,this._wait_to_start_bgm_start_frame_count=null),this.changeNextSubSceneIfReserved();for(var t=0,e=this.objects.length;t<e;t++)this.objects[t].update();this.currentSubScene()&&this.currentSubScene().update()},r.prototype.beforeDraw=function(){for(var t=0,e=this.objects.length;t<e;t++)this.objects[t].beforeDraw();this.currentSubScene()&&this.currentSubScene().beforeDraw()},r.prototype.draw=function(){this._drawBackground();for(var t=0,e=this.objects.length;t<e;t++)this.objects[t].draw();this.currentSubScene()&&this.currentSubScene().draw()},r.prototype._drawBackground=function(){var t=this.core.ctx;this._background_color&&(t.save(),t.fillStyle=this._background_color,t.fillRect(0,0,this.width,this.height),t.restore())},r.prototype.afterDraw=function(){for(var t=0,e=this.objects.length;t<e;t++)this.objects[t].afterDraw();this.currentSubScene()&&this.currentSubScene().afterDraw()},r.prototype.addObject=function(t){this.objects.push(t)},r.prototype.addObjects=function(t){this.objects=this.objects.concat(t)},r.prototype.removeAllObject=function(){this.objects=[]},r.prototype.removeObject=function(t){for(var e=0,n=this.objects.length;e<n;e++)if(this.objects[e].id===t.id){this.objects.splice(e,1);break}},r.prototype.isInit=function(){return this._is_inited},r.prototype.setParent=function(t){if(this.parent)throw new Error("already set parent");this.parent=t},r.prototype.resetParent=function(){this.parent=null},r.prototype.currentSubScene=function(){if(null!==this.current_scene)return this.scenes[this.current_scene]},r.prototype.getSubScene=function(t){return this.scenes[t]},r.prototype.addSubScene=function(t,e){e.setParent(this),this.scenes[t]=e},r.prototype.changeSubScene=function(){var t=Array.prototype.slice.call(arguments);this._reserved_next_scene=t,this._is_reserved_next_scene_init=!0,this.current_scene||this.changeNextSubSceneIfReserved()},r.prototype.returnSubScene=function(t){this._reserved_next_scene=[t],this._is_reserved_next_scene_init=!1},r.prototype.changeNextSubSceneIfReserved=function(){if(this._reserved_next_scene){this.current_scene=this._reserved_next_scene.shift();var t=this.currentSubScene(),e=this._reserved_next_scene;this._reserved_next_scene=null,this._is_reserved_next_scene_init&&t.init.apply(t,e)}},r.prototype.setWaitToStartBGM=function(t,e){e||(e=0),this._wait_to_start_bgm_name=t,this._wait_to_start_bgm_duration=e,this._wait_to_start_bgm_start_frame_count=this.frame_count},r.prototype.x=function(t){return void 0!==t&&(this._x=t),this._x},r.prototype.y=function(t){return void 0!==t&&(this._y=t),this._y},r.prototype.root=function(){return this.parent?this.parent.root():this},r.prototype.setBackgroundColor=function(t){this._background_color=t},r.prototype.setFadeIn=function(t,e){return console.error("scene's setFadeIn method is deprecated."),this.core.scene_manager.setFadeIn.apply(this.core.scene_manager,arguments)},r.prototype.isInFadeIn=function(){return console.error("scene's isInFadeIn method is deprecated."),this.core.scene_manager.isInFadeIn.apply(this.core.scene_manager,arguments)},r.prototype.setFadeOut=function(t,e){return console.error("scene's setFadeOut method is deprecated."),this.core.scene_manager.setFadeOut.apply(this.core.scene_manager,arguments)},r.prototype.startFadeOut=function(){return console.error("scene's startFadeOut method is deprecated."),this.core.scene_manager.startFadeOut.apply(this.core.scene_manager,arguments)},r.prototype.isInFadeOut=function(){return console.error("scene's isInFadeOut method is deprecated."),this.core.scene_manager.isInFadeOut.apply(this.core.scene_manager,arguments)},r.prototype.isSetFadeOut=function(){return console.error("scene's isSetFadeOut method is deprecated."),this.core.scene_manager.isSetFadeOut.apply(this.core.scene_manager,arguments)};var a=function(t){i.apply(this,arguments)};o.inherit(a,i),t.exports=r},function(t,e,n){"use strict";var i=function(){this._name_to_class={}};i.prototype.addClass=function(t,e){if(void 0!==this[t])throw new Error(t+" is reserved word.");this._name_to_class[t]=e},i.prototype.initialLoad=function(){for(var t in this._name_to_class){var e=this._name_to_class[t];this[t]||(this[t]=e.load())}},i.prototype.load=function(){for(var t in this._name_to_class){var e=this._name_to_class[t];this[t]=e.load()}},i.prototype.save=function(){for(var t in this._name_to_class)this[t].save()},i.prototype.reload=function(){for(var t in this._name_to_class)this[t].reload()},i.prototype.del=function(){for(var t in this._name_to_class)this[t].del()},t.exports=i},function(t,e,n){"use strict";var i=n(23);t.exports=i.object_point},function(t,e,n){"use strict";var i=n(1),o=function(t){t||(t={}),this._data=t};o.KEY=function(){throw new Error("KEY method must be overridden.")},o.localFileDirectory=function(){return"save"},o.prototype.set=function(t,e){this._data[t]=e},o.prototype.get=function(t){return this._data[t]},o.prototype.exists=function(t){return t in this._data},o.prototype.remove=function(t){return delete this._data[t]},o.prototype.isEmpty=function(){return 0===Object.keys(this._data).length},o.prototype.toHash=function(){return i.shallowCopyHash(this._data)},o.isLocalMode=function(){return!!i.isElectron()},o.prototype.save=function(){this.constructor.isLocalMode()?this._saveToLocalFile():this._saveToWebStorage()},o.prototype._saveToLocalFile=function(){var t=this.constructor,e=window.require("fs"),n=window.require("path"),i=JSON.stringify(this._data),o=t._localFileDirectoryPath(),r=n.join(o,t._localFileName(t.KEY()));e.existsSync(o)||e.mkdirSync(o),e.writeFileSync(r,i)},o._localFileDirectoryPath=function(){var t=window.require("path"),e=window.require("electron").remote.app,n=e.getPath("appData"),i=e.getName();return t.join(n,i,this.localFileDirectory())},o._localFileName=function(t){return t+".json"},o._localFilePath=function(t){return window.require("path").join(this._localFileDirectoryPath(),this._localFileName(t))},o.prototype._saveToWebStorage=function(){var t=this.constructor.KEY(),e=JSON.stringify(this._data);try{window.localStorage.setItem(t,e)}catch(t){}},o.prototype.reload=function(){var t,e=this.constructor;t=e.isLocalMode()?e._loadFromLocalFile():e._loadFromWebStorage(),this._data=t||{}},o.load=function(){var t;return(t=this.isLocalMode()?this._loadFromLocalFile():this._loadFromWebStorage())?new this(t):new this},o._loadFromLocalFile=function(){var t=window.require("fs"),e=this._localFilePath(this.KEY());if(!t.existsSync(e))return null;var n=t.readFileSync(e,{encoding:"utf8"});return n?JSON.parse(n):null},o._loadFromWebStorage=function(){var t,e=this.KEY();try{t=window.localStorage.getItem(e)}catch(t){}return t?JSON.parse(t):null},o.prototype.del=function(){this.constructor.isLocalMode()?this._removeLocalFile():this._removeWebStorage(),this._data={}},o.prototype._removeLocalFile=function(){var t=this.constructor,e=window.require("fs"),n=t._localFilePath(t.KEY());e.existsSync(n)&&e.unlinkSync(n)},o.prototype._removeWebStorage=function(){var t=this.constructor.KEY();try{window.localStorage.removeItem(t)}catch(t){}},t.exports=o},function(t,e,n){"use strict";var i=n(0).Object.Base,o=n(0).Util,r=function(t){i.apply(this,arguments),this._offset_y=0,this._is_reverse=!1,this._damage_showing_time=0};o.inherit(r,i),o.defineProperty(r,"hp"),r.prototype.init=function(){i.prototype.init.apply(this,arguments),this._offset_y=0,this._is_reverse=!1,this._damage_showing_time=0,this.hp(this.maxHP())},r.prototype.update=function(){i.prototype.update.apply(this,arguments),this.scene.isTimeStop()||(this._damage_showing_time>0&&this._damage_showing_time--,this.frame_count%6==0&&(this._is_reverse?(this._offset_y--,this._offset_y<=0&&(this._is_reverse=!this._is_reverse)):(this._offset_y++,this._offset_y>=8&&(this._is_reverse=!this._is_reverse))))},r.prototype.draw=function(){i.prototype.draw.apply(this,arguments);var t,e=this.core.ctx;this.isCollision()&&(this.core.debug_manager.get("is_show_hp")&&(e.save(),e.fillStyle="red",e.textAlign="center",e.font="12px 'MyFont'",e.fillText(this.hp()+" / "+this.maxHP(),this.x(),this.y()-100),e.restore()),t=this._damage_showing_time>0?this.core.image_loader.getImage(this.damageImage()):this.core.image_loader.getImage(this.normalImage()),e.save(),e.translate(this.x(),this.y()+this._offset_y),e.drawImage(t,-t.width/2,-t.height/2),e.restore())},r.prototype.reduceHP=function(t){this.hp(this.hp()-t),this._damage_showing_time<=0&&(this._damage_showing_time=10),this.hp()<=0&&(this.core.audio_loader.playSound("boss_damage"),this.scene.notifyStageClear())},r.prototype.isCollision=function(t){return this.hp()>0},r.prototype.maxHP=function(){throw new Error("maxHP method must be defined.")},r.prototype.normalImage=function(){throw new Error("normalImage method must be defined.")},r.prototype.damageImage=function(){throw new Error("damageImage method must be defined.")},t.exports=r},function(t,e,n){"use strict";var i=n(8),o=function(t){i.apply(this,arguments),this.next_scene_name=null};n(1).inherit(o,i),o.prototype.init=function(t,e){i.prototype.init.apply(this,arguments);var n=t.images||[],o=t.sounds||[],r=t.bgms||[],a=t.fonts||[];this.next_scene_name=e,this._loadImages(n),this._loadSounds(o),this._loadBGMs(r),this._loadFonts(a)},o.prototype._loadImages=function(t){for(var e in t){var n=t[e];"string"==typeof n?this.core.image_loader.loadImage(e,n):this.core.image_loader.loadImage(e,n.path,n.scale_width,n.scale_height)}},o.prototype._loadSounds=function(t){for(var e in t){var n=t[e];this.core.audio_loader.loadSound(e,n.path,n.volume)}},o.prototype._loadBGMs=function(t){for(var e in t){var n=t[e],i="volume"in n?n.volume:1;this.core.audio_loader.loadBGM(e,n.path,i,n.loopStart,n.loopEnd)}},o.prototype._loadFonts=function(t){for(var e in t){var n=t[e];this.core.font_loader.loadFont(e,n.path,n.format)}},o.prototype.update=function(){i.prototype.update.apply(this,arguments),this.core.isAllLoaded()&&this.notifyAllLoaded()},o.prototype.progress=function(){return(this.core.audio_loader.progress()+this.core.image_loader.progress()+this.core.font_loader.progress())/3},o.prototype.draw=function(){i.prototype.draw.apply(this,arguments)},o.prototype.notifyAllLoaded=function(){this.next_scene_name&&this.core.scene_manager.changeScene(this.next_scene_name)},t.exports=o},function(t,e,n){"use strict";var i=n(26),o=n(28),r=function(){this._gamepad=new i(this),this._keyboard=new o(this),this._is_left_clicked=!1,this._is_right_clicked=!1,this._before_is_left_clicked=!1,this._before_is_right_clicked=!1,this._mouse_change_x=0,this._mouse_change_y=0,this._mouse_x=0,this._mouse_y=0,this._mouse_scroll=0,this._touch_infos={},this._before_is_touched_map={},this._is_touched_map={},this._touch_ids=[],this._click_position_width_ratio=1,this._click_position_height_ratio=1};r.prototype.init=function(){this._gamepad.init(),this._keyboard.init(),this._is_left_clicked=!1,this._is_right_clicked=!1,this._before_is_left_clicked=!1,this._before_is_right_clicked=!1,this._mouse_change_x=0,this._mouse_change_y=0,this._mouse_x=0,this._mouse_y=0,this._mouse_scroll=0,this._touch_infos={},this._before_is_touched_map={},this._is_touched_map={},this._touch_ids=[],this._click_position_width_ratio=1,this._click_position_height_ratio=1},r.prototype.update=function(){this._gamepad.update(),this._keyboard.update(),this._setTouchAsMouse()},r.prototype.afterDraw=function(){for(var t in this._gamepad.afterDraw(),this._keyboard.afterDraw(),this._before_is_left_clicked=this._is_left_clicked,this._before_is_right_clicked=this._is_right_clicked,this._mouse_scroll=0,this._mouse_change_x=0,this._mouse_change_y=0,this._before_is_touched_map={},this._touch_infos){var e=this._touch_infos[t];e.change_x=0,e.change_y=0,t in this._is_touched_map&&(this._before_is_touched_map[t]=!0)}},r.prototype.setupEvents=function(t){this._gamepad.setupEvents(t),this._keyboard.setupEvents(t);var e=this;t.onmousedown=function(t){e._handleMouseDown(t)},t.onmouseup=function(t){e._handleMouseUp(t)},t.onmousemove=function(t){e._handleMouseMove(t)},t.ontouchstart=function(t){e._handleTouchDown(t)},t.ontouchend=function(t){e._handleTouchUp(t)},t.ontouchmove=function(t){e._handleTouchMove(t)};var n=window.navi&&/Firefox/i.test(window.navigator.userAgent)?"DOMMouseScroll":"mousewheel";t.addEventListener&&t.addEventListener(n,function(t){var n=window.event||t;e._handleMouseWheel(n)},!1),t.oncontextmenu=function(){return!1}},r.prototype.scaleClickPosition=function(t,e){this._click_position_width_ratio=t,this._click_position_height_ratio=e},r.prototype.isKeyDown=function(t){if(void 0===t)throw new Error("isKeyDown needs arguments.");return this._keyboard.isKeyDown.apply(this._keyboard,arguments)},r.prototype.isKeyPush=function(t){if(void 0===t)throw new Error("isKeyPush needs arguments.");return this._keyboard.isKeyPush.apply(this._keyboard,arguments)},r.prototype.isKeyRelease=function(t){if(void 0===t)throw new Error("isKeyRelease needs arguments.");return this._keyboard.isKeyRelease.apply(this._keyboard,arguments)},r.prototype.getKeyDownTime=function(t){if(void 0===t)throw new Error("getKeyDownTime needs arguments.");return this._keyboard.getKeyDownTime.apply(this._keyboard,arguments)},r.prototype.getAnyButtonId=function(){throw new Error("InputManager's getAnyButtonId method is deprecated.")},r.prototype.getGamepad=function(t){return this._gamepad.getGamepad.apply(this._gamepad,arguments)},r.prototype.getGamepadList=function(){return this._gamepad.getGamepadList.apply(this._gamepad,arguments)},r.prototype.isGamepadConnected=function(t){return this._gamepad.isGamepadConnected.apply(this._gamepad,arguments)},t.exports=r},function(t,e,n){"use strict";var i=function(){this.images={},this.loading_image_num=0,this.loaded_image_num=0};i.prototype.init=function(){for(var t in this.images)this.images[t].src="";this.images={},this.loading_image_num=0,this.loaded_image_num=0},i.prototype.loadImage=function(t,e,n,i){var o=this;o.loading_image_num++;var r=new Image;r.src=e,r.onload=function(){o.images[t]=o._generateImageCanvas(t,n,i),o.loaded_image_num++},this.images[t]=r},i.prototype.unloadImage=function(t){t in this.images&&(this.loading_image_num--,this.loaded_image_num--,delete this.images[t])},i.prototype._generateImageCanvas=function(t,e,n){e=void 0===e?1:e,n=void 0===n?1:n;var i=this.getImage(t),o=i.width*e,r=i.height*n,a=document.createElement("canvas");return a.width=o,a.height=r,a.getContext("2d").drawImage(i,0,0,o,r),a},i.prototype.isAllLoaded=function(){return this.loaded_image_num===this.loading_image_num},i.prototype.isLoaded=function(t){return t in this.images},i.prototype.getImage=function(t){if(!this.isLoaded(t))throw new Error("Can't find image '"+t+"'.");return this.images[t]},i.prototype.progress=function(){return 0===this.loading_image_num?1:this.loaded_image_num/this.loading_image_num},t.exports=i},function(t,e,n){"use strict";var i=function(){if(this.sounds={},this.bgms={},this.loading_audio_num=0,this.loaded_audio_num=0,this._reserved_play_sound_name_map={},this._audio_source_map={},this.audio_context=null,window){var t=window.AudioContext||window.webkitAudioContext;t&&(this.audio_context=new t,this.audio_context.createGain=this.audio_context.createGain||this.audio_context.createGainNode)}};i.prototype.init=function(){this.stopAllBGM(),this.sounds={},this.bgms={},this.loading_audio_num=0,this.loaded_audio_num=0,this._reserved_play_sound_name_map={},this._audio_source_map={}},i.prototype.loadSound=function(t,e,n){if(window&&window.Audio){var i=this;i.loading_audio_num++,void 0===n&&(n=1);var o=new window.Audio(e);o.volume=n,o.addEventListener("canplay",function(){i.loaded_audio_num++}),o.addEventListener("error",function(){throw new Error("Audio Element error. "+e+", code: "+o.error.code+", message: "+o.error.message)}),o.load(),i.sounds[t]={audio:o}}},i.prototype.unloadSound=function(t){t in this.sounds&&(this.loading_audio_num--,this.loaded_audio_num--,delete this.sounds[t])},i.prototype.setupEvents=function(){this._setupEventForiOSSafari(),this._setupEventForChrome()},i.prototype._setupEventForiOSSafari=function(){if(void 0!==window.document.ontouchend){var t=this.sounds;window.document.addEventListener("touchend",function e(){for(var n in t)t[n].audio.load();window.document.removeEventListener("touchend",e)})}},i.prototype._setupEventForChrome=function(){var t=this.audio_context,e=void 0!==window.document.ontouchend?"touchend":"mouseup";window.document.addEventListener(e,function n(){t.resume(),window.document.removeEventListener(e,n)})},i.prototype.loadBGM=function(t,e,n,i,o){if(this.audio_context){var r=this;r.loading_audio_num++,void 0===n&&(n=1);var a=function(e){r.loaded_audio_num++,r.bgms[t]={audio:e,volume:n,loopStart:i,loopEnd:o}},s=function(t){throw t instanceof Error?new Error(t.message):t},u=new XMLHttpRequest;u.onload=function(){if(200===u.status){var t=u.response;r.audio_context.decodeAudioData(t,a,s)}},u.open("GET",e,!0),u.responseType="arraybuffer",u.send(null)}},i.prototype.unloadBGM=function(t){t in this.bgms&&(this.loading_audio_num--,this.loaded_audio_num--,delete this.bgms[t])},i.prototype.isAllLoaded=function(){return this.loaded_audio_num>=this.loading_audio_num},i.prototype.playSound=function(t){if(this.audio_context){if(!(t in this.sounds))throw new Error("Can't find sound '"+t+"'.");this._reserved_play_sound_name_map[t]=!0}},i.prototype.update=function(){this._executePlaySound()},i.prototype._executePlaySound=function(){for(var t in this._reserved_play_sound_name_map){this.sounds[t].audio.pause(),this.sounds[t].audio.currentTime=0;var e=this.sounds[t].audio.play();e&&e.catch(function(t){}),delete this._reserved_play_sound_name_map[t]}},i.prototype.playSoundByDataURL=function(t,e){if(window&&window.Audio){void 0===e&&(e=1);var n=new window.Audio;n.volume=e,n.src=t,n.addEventListener("canplay",function(){n.play()}),n.addEventListener("error",function(){throw new Error("Audio Element error. code: "+n.error.code+", message: "+n.error.message)}),n.load()}},i.prototype.playBGM=function(t){this.stopAllBGM(),this.addBGM(t)},i.prototype.addBGM=function(t){this.audio_context&&(this.isPlayingBGM(t)&&this.stopBGM(t),this._audio_source_map[t]=this._createSourceNodeAndGainNode(t),this._audio_source_map[t].source_node.start(0))},i.prototype.changeBGM=function(t){this.isPlayingBGM(t)||this.playBGM(t)},i.prototype.stopAllBGM=function(){for(var t in this._audio_source_map)this.stopBGM(t)},i.prototype.stopBGMWithout=function(t){for(var e in this._audio_source_map)e!==t&&this.stopBGM(e)},i.prototype.stopBGM=function(t){if(void 0===t)return this.stopAllBGM();this.fadeOutBGM(.1,t),t in this._audio_source_map&&delete this._audio_source_map[t]},i.prototype.isPlayingBGM=function(t){return void 0===t?!!Object.keys(this._audio_source_map).length:t in this._audio_source_map},i.prototype.fadeOutAllBGM=function(t){for(var e in this._audio_source_map)this.fadeOutBGM(t,e)},i.prototype.fadeOutBGM=function(t,e){if(this.audio_context){if(void 0===e)return this.fadeOutAllBGM(t);var n=this._audio_source_map[e];if(n){var i=n.gain_node.gain,o=this.audio_context.currentTime;i.cancelScheduledValues(o),i.setValueAtTime(i.value,o);var r=o+t;i.linearRampToValueAtTime(0,r)}}},i.prototype.muteAllBGM=function(){for(var t in this._audio_source_map)this.muteBGM(t)},i.prototype.muteBGM=function(t){if(this.audio_context){if(void 0===t)return this.muteAllBGM();var e=this._audio_source_map[t];if(e)e.gain_node.gain.setValueAtTime(0,this.audio_context.currentTime)}},i.prototype.unMuteAllBGM=function(){for(var t in this._audio_source_map)this.unMuteBGM(t)},i.prototype.unMuteBGM=function(t){if(this.audio_context){if(void 0===t)return this.unMuteAllBGM();var e=this._audio_source_map[t];if(e){var n=e.gain_node,i=this.bgms[t];n.gain.setValueAtTime(i.volume,this.audio_context.currentTime)}}},i.prototype.unMuteWithFadeInAllBGM=function(t){for(var e in this._audio_source_map)this.unMuteWithFadeInBGM(t,e)},i.prototype.unMuteWithFadeInBGM=function(t,e){if(this.audio_context){if(void 0===e)return this.unMuteWithFadeInAllBGM(t);var n=this._audio_source_map[e];if(n){var i=this.bgms[e],o=n.gain_node.gain,r=this.audio_context.currentTime;o.setValueAtTime(o.value,r);var a=r+t;o.linearRampToValueAtTime(i.volume,a)}}},i.prototype._createSourceNodeAndGainNode=function(t){if(this.audio_context){if(!(t in this.bgms))throw new Error("Can't find bgm name: "+t);var e=this.bgms[t],n=this.audio_context.createBufferSource();n.buffer=e.audio,("loopStart"in e||"loopEnd"in e)&&(n.loop=!0),e.loopStart&&(n.loopStart=e.loopStart),e.loopEnd&&(n.loopEnd=e.loopEnd);var i=this.audio_context.createGain();return i.gain.setValueAtTime(e.volume,this.audio_context.currentTime),n.connect(i),i.connect(this.audio_context.destination),n.start=n.start||n.noteOn,n.stop=n.stop||n.noteOff,{source_node:n,gain_node:i}}},i.prototype.progress=function(){return 0===this.loading_audio_num?1:this.loaded_audio_num/this.loading_audio_num},t.exports=i},function(t,e,n){"use strict";var i=function(){this._isLoadedDone=!1,this._loadedFonts=null,this._fontStatues={},this._hiddenCanvas=null};i.prototype.init=function(){this._isLoadedDone=!1,this._loadedFonts=null,this._fontStatues={}},i.prototype.isAllLoaded=function(){for(var t in this._fontStatues)if(!this.isLoaded(t))return!1;return!0},i.prototype.progress=function(){var t=0,e=0;for(var n in this._fontStatues)t++,this.isLoaded(n)&&e++;return 0===t?1:e/t},i.prototype.setupEvents=function(){var t=this;t.canUseCssFontLoading()?window.document.fonts.ready.then(function(e){t._isLoadedDone=!0,t._loadedFonts=e}).catch(function(t){throw new Error("Can't load font.")}):t.canUseCssFont()?window.document.fonts.addEventListener("loadingdone",function(){t._isLoadedDone=!0,t._loadedFonts=null}):(t._isLoadedDone=!0,t._loadedFonts=null)};var o=window.document&&window.document.fonts&&window.document.fonts.ready&&document.fonts.ready.then;i.prototype.canUseCssFontLoading=function(){return o},i.prototype.canUseCssFont=function(){return window.document&&window.document.fonts&&!this.isSafari10()},i.prototype.isSafari10=function(){return navigator.userAgent.toLowerCase().indexOf("safari")&&navigator.userAgent.toLowerCase().indexOf("version/10.0")},i.prototype.isLoaded=function(t){if(!(t in this._fontStatues))return!1;var e=this._fontStatues[t];if(e.is_loaded)return!0;var n=this.checkFontLoaded(t);return n&&(e.is_loaded=!0),n},i.prototype.checkFontLoaded=function(t){if(this.canUseCssFontLoading())return window.document.fonts.check('10px "'+t+'"');this._hiddenCanvas||(this._hiddenCanvas=window.document.createElement("canvas"));var e,n=this._hiddenCanvas.getContext("2d"),i="abcdefghijklmnopqrstuvwxyz";return n.font="40px "+t+", sans-serif",e=n.measureText(i).width,n.font="40px sans-serif",e!==n.measureText(i).width},i.prototype.loadFont=function(t,e,n){return!!window.document&&(this._fontStatues[t]={is_loaded:!1},this._createFontFaceStyle(t,e,n),this._createFontLoadingDOM(t),!0)},i.prototype._createFontFaceStyle=function(t,e,n){var i,o=window.document.getElementsByTagName("head");if(!o)throw new Error("Fontloader class needs head tag in html file.");i=void 0!==n?'@font-face { font-family: "'+t+'"; src: url("'+e+'") format("'+n+'"); }':'@font-face { font-family: "'+t+'"; src: url("'+e+'"); }';var r=window.document.createElement("style");r.type="text/css",o.item(0).appendChild(r),r.sheet.insertRule(i,0)},i.prototype._createFontLoadingDOM=function(t){var e=window.document.createElement("div"),n=window.document.createTextNode(".");e.style.fontFamily=t,e.style.fontSize="0px",e.style.color="transparent",e.style.position="absolute",e.style.margin="auto",e.style.top="0px",e.style.left="0px",e.style.width="1px",e.style.height="1px",e.appendChild(n),window.document.body.appendChild(e)},t.exports=i},function(t,e,n){"use strict";var i=function(t,e,n,i,o){if(!t)throw new Error("arguments 1 must be WebGLRenderingContext instance");this.gl=t;var r,a=this.createShader(t,t.VERTEX_SHADER,e),s=this.createShader(t,t.FRAGMENT_SHADER,n),u=this.createShaderProgram(t,a,s),c={};for(r=0;r<i.length;r++)c[i[r]]=t.getAttribLocation(u,i[r]);var h={};for(r=0;r<o.length;r++)h[o[r]]=t.getUniformLocation(u,o[r]);this.shader_program=u,this.attribute_locations=c,this.uniform_locations=h};i.prototype.createShader=function(t,e,n){if(e!==t.VERTEX_SHADER&&e!==t.FRAGMENT_SHADER)throw new Error("type must be vertex or fragment");var i=t.createShader(e);if(t.shaderSource(i,n),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS))throw(e===t.VERTEX_SHADER?"Vertex":"Fragment")+" failed to compile:\n\n"+t.getShaderInfoLog(i);return i},i.prototype.createShaderProgram=function(t,e,n){var i=t.createProgram();if(t.attachShader(i,e),t.attachShader(i,n),t.linkProgram(i),!t.getProgramParameter(i,t.LINK_STATUS))throw new Error("Could not initialize shaders:\n\n"+t.getProgramInfoLog(i));return i},t.exports=i},function(t,e,n){"use strict";var i=n(1),o=n(56),r=function(t,e){this.core=t,e=e||{},this._typography_speed="typography_speed"in e?e.typography_speed:10,this._criteria_function_map="criteria"in e?e.criteria:{},this._event_to_callback={printend:function(){}},this._timeoutID=null,this._script=null,this._progress=null,this._current_talking_pos=null,this._pos_to_chara_id_map={},this._pos_to_exp_id_map={},this._is_background_changed=!1,this._current_bg_image_name=null,this._current_junction_list=[],this._current_option={},this._current_message_letter_list=[],this._current_message_sentenses_num=null,this._current_message_max_length_letters=null,this._letter_idx=0,this._sentences_line_num=0,this._current_printed_sentences=[]};i.inherit(r,o),r.prototype.init=function(t){if(!t)throw new Error("set script arguments to use scenario_manager class");this._timeoutID&&this._stopPrintLetter(),this._script=t.slice(),this._progress=-1,this._current_talking_pos=null,this._pos_to_chara_id_map={},this._pos_to_exp_id_map={},this._is_background_changed=!1,this._current_bg_image_name=null,this._current_junction_list=[],this._current_option={},this._current_message_letter_list=[],this._current_message_sentenses_num=null,this._current_message_max_length_letters=null,this._letter_idx=0,this._sentences_line_num=0,this._current_printed_sentences=[]},r.prototype.on=function(t,e){return this._event_to_callback[t]=e,this},r.prototype.removeEvent=function(t){return this._event_to_callback[t]=function(){},this},r.prototype.start=function(t){if(!this._script)throw new Error("start method must be called after instance was initialized.");this.isEnd()||(this._progress=t||0,this._chooseNextSerifScript(),this._setupCurrentSerifScript())},r.prototype.next=function(t){return t=t||0,!this.isEnd()&&(this._progress++,this._chooseNextSerifScript(t),this._setupCurrentSerifScript(),!0)},r.prototype._chooseNextSerifScript=function(t){var e,n=this._script[this._progress],i=n.type||"serif";if("serif"===i);else if("junction_serif"===i){if(!(e=n.serifs[t]))throw new Error("chosen junction index '"+t+"' does not exists in next serifs array");Array.prototype.splice.apply(this._script,[this._progress,1].concat(e))}else{if("criteria_serif"!==i)throw new Error("Unknown serif script type: "+i);var o=n.criteria,r=n.arguments;if(t=this._execCriteriaFunction(o,r),!(e=n.serifs[t]))throw new Error("choisen criteria index '"+t+"' does not exists");Array.prototype.splice.apply(this._script,[this._progress,1].concat(e)),this._chooseNextSerifScript()}},r.prototype._execCriteriaFunction=function(t,e){var n=this._criteria_function_map[t];if(!n)throw new Error(t+" criteria does not exists");return n.apply({},[this.core].concat(e))},r.prototype.isStart=function(){return this._progress>-1},r.prototype.isEnd=function(){return this._progress===this._script.length-1},r.prototype.isPrintLetterEnd=function(){var t=this._current_message_letter_list.length;return this._letter_idx>=t},r.prototype._setupCurrentSerifScript=function(){var t=this._script[this._progress];this._setupChara(t),this._setupBackground(t),this._setupJunction(t),this._setupOption(t),this._saveSerifPlayed(t),"string"==typeof t.serif?this._setupSerif(t):this.isEnd()||this.next()},r.prototype._setupChara=function(t){var e=t.pos,n=t.chara,i=t.exp;e||(e=0),this._current_talking_pos=e,this._pos_to_chara_id_map[this._current_talking_pos]=n,this._pos_to_exp_id_map[this._current_talking_pos]=i},r.prototype._setupBackground=function(t){var e=t.background;this._is_background_changed=!1,e&&this._current_bg_image_name!==e&&(this._is_background_changed=!0,this._current_bg_image_name=e)},r.prototype._setupJunction=function(t){var e=t.junction;this._current_junction_list=e||[]},r.prototype._setupOption=function(t){this._current_option=t.option||{}},r.prototype._saveSerifPlayed=function(t){var e=t.id;if(t.save){if(void 0===e)throw new Error("script save property needs id property");this.core.save_manager.scenario.incrementPlayedCount(e)}},r.prototype._setupSerif=function(t){var e=t.serif;this._stopPrintLetter(),this._current_message_letter_list=e.split("");var n=e.split("\n");this._current_message_max_length_letters=0;for(var i=0,o=n.length;i<o;i++)this._current_message_max_length_letters<n[i].length&&(this._current_message_max_length_letters=n[i].length);this._current_message_sentenses_num=n.length,this._letter_idx=0,this._sentences_line_num=0,this._current_printed_sentences=[],this._startPrintLetter()},r.prototype._startPrintLetter=function(){this._printLetter(),this.isPrintLetterEnd()?this._timeoutID=null:this._timeoutID=this.core.time_manager.setTimeout(i.bind(this._startPrintLetter,this),this._typography_speed)},r.prototype._stopPrintLetter=function(){null!==this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)},r.prototype._printLetter=function(){if(!this.isPrintLetterEnd()){var t=this._current_message_letter_list[this._letter_idx++];this._current_printed_sentences[this._sentences_line_num]||(this._current_printed_sentences[this._sentences_line_num]=""),"\n"===t?this._sentences_line_num++:this._current_printed_sentences[this._sentences_line_num]+=t,this.isPrintLetterEnd()&&this._event_to_callback.printend()}},r.prototype.resumePrintLetter=function(){this._startPrintLetter()},r.prototype.pausePrintLetter=function(){this._stopPrintLetter()},r.prototype.getCurrentPrintedSentences=function(){return this._current_printed_sentences},r.prototype.getCurrentSentenceNum=function(){return this._current_message_sentenses_num},r.prototype.getCurrentMaxLengthLetters=function(){return this._current_message_max_length_letters},r.prototype.isBackgroundChanged=function(){return this._is_background_changed},r.prototype.getCurrentBackgroundImageName=function(){return this._current_bg_image_name},r.prototype.getCurrentOption=function(){return this._current_option},r.prototype.getCurrentCharaNameByPosition=function(t){return t=t||0,this._pos_to_chara_id_map[t]},r.prototype.getCurrentCharaExpressionByPosition=function(t){return t=t||0,this._pos_to_exp_id_map[t]},r.prototype.isCurrentTalkingByPosition=function(t){return this._current_talking_pos===t},r.prototype.isCurrentSerifExistsJunction=function(){return this._current_junction_list.length>0},r.prototype.getCurrentJunctionList=function(){return this._current_junction_list},t.exports=r},function(t,e,n){"use strict";var i=n(33),o=function(t,e){i.apply(this,arguments),this.Class=e};n(1).inherit(o,i),o.prototype.init=function(){i.prototype.init.apply(this,arguments)},o.prototype.update=function(){i.prototype.update.apply(this,arguments)},o.prototype.beforeDraw=function(){i.prototype.beforeDraw.apply(this,arguments)},o.prototype.draw=function(){i.prototype.draw.apply(this,arguments)},o.prototype.afterDraw=function(){i.prototype.afterDraw.apply(this,arguments)},o.prototype.create=function(t){var e=new this.Class(this.scene);return e.init.apply(e,arguments),this.addObject(e),e},t.exports=o},function(t,e,n){"use strict";var i=n(0).Scene.Base,o=function(t){i.apply(this,arguments)};n(0).Util.inherit(o,i),t.exports=o},function(t,e,n){"use strict";var i=n(43),o=n(1),r=n(45),a=n(46),s=n(24),u=n(9),c=n(25),h=n(15),p=n(16),_=n(17),l=n(53),d=n(18),f=n(54),m=n(55),y=performance||Date,g=function(t,e){e||(e={}),this.canvas_dom=t,this.ctx=null,this.gl=null,e.webgl?(this.gl=this._createWebGLContext(this.canvas_dom),this.sprite_3d_shader=new d(this.gl,f,m,["aTextureCoordinates","aVertexPosition","aColor"],["uMVMatrix","uPMatrix","uSampler"])):this.ctx=this.canvas_dom.getContext("2d"),this.debug_manager=new r(this),this.scene_manager=new a(this),this.time_manager=new s,this.save_manager=new u,this.input_manager=new c,this.width=Number(t.getAttribute("width")),this.height=Number(t.getAttribute("height")),this._cursor_image_name=null,this._default_cursor_image_name=null,this._is_resize_fired=!1,this.frame_count=0,this._currentTime=null,this._accumulator=0,this._request_id=null,this.image_loader=new h,this.audio_loader=new p,this.font_loader=new _,this.save_manager.addClass("scenario",l)};g.prototype.init=function(){this._is_resize_fired=!1,this.frame_count=0,this._currentTime=null,this._accumulator=0,this._request_id=null,this.debug_manager.init(),this.scene_manager.init(),this.time_manager.init(),this.input_manager.init(),this.image_loader.init(),this.audio_loader.init(),this.font_loader.init(),this.save_manager.initialLoad()},g.prototype.reload=function(){this.init()},g.prototype.isRunning=function(){return!!this._request_id},g.prototype.startRun=function(){this.isRunning()||this.run()},g.prototype.stopRun=function(){this.isRunning()&&(window.cancelAnimationFrame(this._request_id),this._currentTime=null,this._accumulator=0,this._request_id=null)},g.prototype.run=function(){this.debug_manager.calculateFps();var t=this.now();null===this._currentTime&&(this._currentTime=t);var e=(t-this._currentTime)/1e3;for(e>.25&&(e=.25),this._currentTime=t,this._accumulator+=e;this._accumulator>=1/60;)this._accumulator-=1/60,this.input_manager.update(),this._update(),this._accumulator<1/60&&this._draw(),this.input_manager.afterDraw();this._is_resize_fired&&(this._fullsize(),this._is_resize_fired=!1),this._request_id=window.requestAnimationFrame(o.bind(this.run,this))},g.prototype._update=function(){this.frame_count++,this.scene_manager.update(),this.time_manager.update(),this.audio_loader.update();var t=this.scene_manager.currentScene();t&&t.update()},g.prototype._draw=function(){this._changeDefaultCursorImage();var t=this.scene_manager.currentScene();t&&(t.beforeDraw(),this._clearCanvas(),t.draw(),t.afterDraw()),this.scene_manager.drawTransition(),this._renderCursorImage(),this.debug_manager.renderFps()},g.prototype._clearCanvas=function(){this.is2D()?this.canvas_dom.width=this.canvas_dom.width:this.is3D()&&(this.gl.clearColor(0,0,0,0),this.gl.clearDepth(1),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT))},g.prototype.is2D=function(){return!!this.ctx},g.prototype.is3D=function(){return!!this.gl},g.prototype.fullscreen=function(){var t=this.canvas_dom;t.requestFullscreen?t.requestFullscreen():t.msRequestuestFullscreen?t.msRequestuestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()},g.prototype.isAllLoaded=function(){return!!(this.image_loader.isAllLoaded()&&this.audio_loader.isAllLoaded()&&this.font_loader.isAllLoaded())},g.prototype.setupEvents=function(){window&&(window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},this._setupError(),this.audio_loader.setupEvents(),this.font_loader.setupEvents(),this.input_manager.setupEvents(this.canvas_dom))},g.prototype._setupError=function(){var t=this;window.onerror=function(e,n,i,o,r){t.showError(e,n,i,o,r)}},g.prototype.now=function(){return y.now()},g.prototype.fullsize=function(){var t=this;window.onresize=function(e){t._is_resize_fired=!0},this._fullsize()},g.prototype._fullsize=function(){var t,e,n,i,o=window.innerWidth/window.innerHeight,r=this.width/this.height;r>=o?(n=window.innerWidth,i=window.innerWidth/r,e=(window.innerHeight-i)/2,t=0):(i=window.innerHeight,n=window.innerHeight*r,e=0,t=(window.innerWidth-n)/2);var a=this.width/n,s=this.height/i,u=this.canvas_dom;u.style.left=t+"px",u.style.top=e+"px",u.style.width=n+"px",u.style.height=i+"px",this.input_manager.scaleClickPosition(a,s)},g.prototype.showError=function(t,e,n,i,o){if(this._clearCanvas(),this.is2D()){var r=this.ctx,a=24,s=80;r.save(),r.fillStyle="black",r.fillRect(0,0,this.width,this.height),r.restore(),r.save(),r.fillStyle="red",r.font="48px 'sans-serif'",r.fillText("Error",a,s),s+=48,r.fillStyle="white",r.font="24px 'sans-serif'",r.fillText(t,a,s),s+=29,r.fillText("Time: "+(new Date).toString(),a,s),s+=29,r.fillText("File: "+e,a,s),s+=29,r.fillText("Line: "+n+", Column:"+i,a,s),s+=29,r.fillText("Stack Trace: ",a,s),s+=29,a+=29;for(var u=o.stack.split("\n"),c=0,h=u.length;c<h;c++){var p=u[c];r.fillText(p,a,s),s+=29}r.restore()}else this.is3D()&&window.alert(t+"\n"+n+":"+i)},g.prototype._createWebGLContext=function(t){var e;try{e=t.getContext("webgl")||t.getContext("experimental-webgl"),e=i.makeDebugContext(e)}catch(t){throw t}if(!e)throw new Error("Could not initialize WebGL");return e},g.prototype.enableCursorImage=function(t){this.canvas_dom.style.cursor="none",this._default_cursor_image_name=t},g.prototype.isUsingCursorImage=function(){return!!this._default_cursor_image_name},g.prototype.changeCursorImage=function(t){this._cursor_image_name=t},g.prototype.disableCursorImage=function(t){this.isUsingCursorImage()&&(this.canvas_dom.style.cursor="auto",this._cursor_image_name=null,this._default_cursor_image_name=null)},g.prototype._changeDefaultCursorImage=function(){this.isUsingCursorImage()&&(this._cursor_image_name=this._default_cursor_image_name)},g.prototype._renderCursorImage=function(){if(this.isUsingCursorImage()&&this.image_loader.isLoaded(this._cursor_image_name)){var t=this.ctx;if(t){t.save();var e=this.image_loader.getImage(this._cursor_image_name),n=this.input_manager.mousePositionX(),i=this.input_manager.mousePositionY(),o=this.image_loader.getScaleWidth(this._cursor_image_name),r=this.image_loader.getScaleHeight(this._cursor_image_name);t.translate(n,i),t.drawImage(e,0,0,e.width*o,e.height*r),t.restore()}}},g.prototype.isKeyDown=function(t){return console.error("core's isKeyDown method is deprecated."),this.input_manager.isKeyDown(t)},g.prototype.isKeyPush=function(t){return console.error("core's isKeyPush method is deprecated."),this.input_manager.isKeyPush(t)},g.prototype.getKeyDownTime=function(t){return console.error("core's getKeyDownTime method is deprecated."),this.input_manager.getKeyDownTime(t)},g.prototype.isLeftClickDown=function(){return console.error("core's isLeftClickDown method is deprecated."),this.input_manager.isLeftClickDown()},g.prototype.isLeftClickPush=function(){return console.error("core's isLeftClickPush method is deprecated."),this.input_manager.isLeftClickPush()},g.prototype.isRightClickDown=function(){return console.error("core's isRightClickDown method is deprecated."),this.input_manager.isRightClickDown()},g.prototype.isRightClickPush=function(){return console.error("core's isRightClickPush method is deprecated."),this.input_manager.isRightClickPush()},g.prototype.mousePositionX=function(){return console.error("core's mousePositionX method is deprecated."),this.input_manager.mousePositionX()},g.prototype.mousePositionY=function(){return console.error("core's mousePositionY method is deprecated."),this.input_manager.mousePositionX()},g.prototype.mouseMoveX=function(){return console.error("core's mouseMoveX method is deprecated."),this.input_manager.mouseMoveX()},g.prototype.mouseMoveY=function(){return console.error("core's mouseMoveY method is deprecated."),this.input_manager.mouseMoveY()},g.prototype.mouseScroll=function(){return console.error("core's mouseScroll method is deprecated."),this.input_manager.mouseScroll()},g.prototype.setTimeout=function(t,e){console.error("core's setTimeout method is deprecated."),this.time_manager.setTimeout(t,e)},g.prototype.currentScene=function(){return console.error("core's currentScene method is deprecated."),this.scene_manager.currentScene.apply(this.scene_manager,arguments)},g.prototype.addScene=function(t,e){return console.error("core's addScene method is deprecated."),this.scene_manager.addScene.apply(this.scene_manager,arguments)},g.prototype.changeScene=function(t,e){return console.error("core's changeScene method is deprecated."),this.scene_manager.changeScene.apply(this.scene_manager,arguments)},g.prototype.changeNextSceneIfReserved=function(){return console.error("core's changeNextSceneIfReserved method is deprecated."),this.scene_manager.changeNextSceneIfReserved.apply(this.scene_manager,arguments)},g.prototype.changeSceneWithLoading=function(t,e){return console.error("core's changeSceneWithLoading method is deprecated."),this.scene_manager.changeSceneWithLoading.apply(this.scene_manager,arguments)},t.exports=g},function(t,e,n){"use strict";var i=n(1),o=0,r=function(t){this.scene=t,this.core=t.core,this.parent=null,this.id=++o,this.frame_count=0,this._is_inited=!1,this._x=0,this._y=0,this._auto_disable_times_map={},this._velocity=null,this.resetVelocity(),this._previous_x=null,this._previous_y=null,this.objects=[]};i.defineProperty(r,"x"),i.defineProperty(r,"y"),r.prototype.init=function(){this.frame_count=0,this._is_inited=!0,this._auto_disable_times_map={},this.resetVelocity(),this._previous_x=null,this._previous_y=null;for(var t=0,e=this.objects.length;t<e;t++)this.objects[t].init()},r.prototype.update=function(){this.frame_count++,this._checkAutoDisableFlags();for(var t=0,e=this.objects.length;t<e;t++)this.objects[t].update();this.moveByVelocity(this._velocity)},r.prototype.beforeDraw=function(){for(var t=0,e=this.objects.length;t<e;t++)this.objects[t].beforeDraw()},r.prototype.draw=function(){this.core.debug_manager.isShowingCollisionArea()&&this._drawCollisionArea(this.core.debug_manager.collisionAreaColor());for(var t=0,e=this.objects.length;t<e;t++)this.objects[t].draw()},r.prototype.afterDraw=function(){for(var t=0,e=this.objects.length;t<e;t++)this.objects[t].afterDraw()},r.prototype.width=function(){return 0},r.prototype.height=function(){return 0},r.prototype.setPosition=function(t,e){this.x(t),this.y(e)},r.prototype.root=function(){return this.parent?this.parent.root():this},r.prototype.isInit=function(){return this._is_inited},r.prototype.globalCenterX=function(){return this.scene.x()+this.x()},r.prototype.globalCenterY=function(){return this.scene.y()+this.y()},r.prototype.globalLeftX=function(){return this.scene.x()+this.x()-this.width()/2},r.prototype.globalRightX=function(){return this.scene.x()+this.x()+this.width()/2},r.prototype.globalUpY=function(){return this.scene.y()+this.y()-this.height()/2},r.prototype.globalDownY=function(){return this.scene.y()+this.y()+this.height()/2},r.prototype.addSubObject=function(t){t.setParent(this),this.objects.push(t)},r.prototype.addSubObjects=function(t){for(var e=0,n=t.length;e<n;e++){t[e].setParent(this)}this.objects=this.objects.concat(t)},r.prototype.removeSubObject=function(t){for(var e=0,n=this.objects.length;e<n;e++)if(this.objects[e].id===t.id){this.objects[e].resetParent(),this.objects.splice(e,1);break}},r.prototype.removeAllSubObject=function(){for(var t=0,e=this.objects.length;t<e;t++)this.objects[t].resetParent();this.objects=[]},r.prototype.setParent=function(t){if(this.parent)throw new Error("already set parent");this.parent=t},r.prototype.resetParent=function(){this.parent=null},r.prototype.collisionWidth=function(t){return 0},r.prototype.collisionHeight=function(t){return 0},r.prototype.onCollision=function(t){},r.prototype.isCollision=function(t){return!0},r.prototype.checkCollisionWithObject=function(t){var e=t.intersect(this);return e&&(t.onCollision(this),this.onCollision(t)),e},r.prototype.checkCollisionWithObjects=function(t){for(var e=!1,n=0;n<t.length;n++){var i=t[n];this.intersect(i)&&(this.onCollision(i),i.onCollision(this),e=!0)}return e},r.prototype.checkCollisionWithPosition=function(t,e){var n=new a(this.scene);return n.init(),n.setPosition(t,e),this.checkCollisionWithObject(n)},r.prototype.intersect=function(t){return!(!this.isCollision(t)||!t.isCollision(this))&&(Math.abs(this.collisionX()-t.collisionX())<this.collisionWidth(t)/2+t.collisionWidth(this)/2&&Math.abs(this.collisionY()-t.collisionY())<this.collisionHeight(t)/2+t.collisionHeight(this)/2)},r.prototype.collisionX=function(){return this.x()},r.prototype.collisionY=function(){return this.y()},r.prototype.getCollisionLeftX=function(t){return this.collisionX()-this.collisionWidth(t)/2},r.prototype.getCollisionRightX=function(t){return this.collisionX()+this.collisionWidth(t)/2},r.prototype.getCollisionUpY=function(t){return this.collisionY()-this.collisionHeight(t)/2},r.prototype.getCollisionDownY=function(t){return this.collisionY()+this.collisionHeight(t)/2},r.prototype._drawCollisionArea=function(t){var e=new r(this.scene);if(this.isCollision(e)){t=t||"rgb( 255, 255, 255 )";var n=this.core.ctx;n.save(),n.fillStyle=t,n.globalAlpha=.4,n.translate(this.globalCenterX(),this.globalCenterY()),n.fillRect(-this.collisionWidth(e)/2,-this.collisionHeight(e)/2,this.collisionWidth(e),this.collisionHeight(e)),n.restore()}},r.prototype.checkCollision=function(t){return this.intersect(t)},r.prototype.checkCollisionByObject=function(t){return this.intersect(t)},r.prototype.setAutoDisableFlag=function(t,e){this[t]=!0,this._auto_disable_times_map[t]=this.frame_count+e},r.prototype._checkAutoDisableFlags=function(){for(var t in this._auto_disable_times_map)this._auto_disable_times_map[t]<this.frame_count&&(this[t]=!1,delete this._auto_disable_times_map[t])},r.prototype.moveByVelocity=function(t){if(0!==t.magnitude){var e=i.calcMoveXByVelocity(t),n=i.calcMoveYByVelocity(t);this._previous_x=this.x(),this._previous_y=this.y(),this.x(this.x()+e),this.y(this.y()+n)}},r.prototype.setVelocity=function(t){this._velocity=t},r.prototype.resetVelocity=function(){this._velocity={magnitude:0,theta:0}},r.prototype.setVelocityMagnitude=function(t){this._velocity.magnitude=t},r.prototype.setVelocityTheta=function(t){this._velocity.theta=t},r.prototype.moveBack=function(){if(null!==this._previous_x||!this._previous_y){var t=this.x(),e=this.y();this.x(this._previous_x),this.y(this._previous_y),this._previous_x=t,this._previous_y=e}},r.prototype.isOutOfStage=function(){return console.error("object's isOutOfStage method is deprecated."),this.isOutOfScene.apply(this,arguments)},r.prototype.isOutOfScene=function(){return this.x()+100<0||this.y()+100<0||this.x()>this.scene.width+100||this.y()>this.scene.height+100},r.prototype.isOutOfView=function(){return this.globalCenterX()+100<0||this.globalCenterY()+100<0||this.globalCenterX()>this.core.width+100||this.globalCenterY()>this.core.height+100};var a=function(t){r.apply(this,arguments)};i.inherit(a,r),a.prototype.collisionWidth=function(){return 1},a.prototype.collisionHeight=function(){return 1},a.prototype.width=function(){return 1},a.prototype.height=function(){return 1},t.exports={object_base:r,object_point:a}},function(t,e,n){"use strict";var i=0,o=function(){this.events={},this.frame_count=0};o.prototype.init=function(){this.events={},this.frame_count=0},o.prototype.setTimeout=function(t,e){var n=this.frame_count+e,o=++i;return this.events[n]||(this.events[n]={}),this.events[n][o]={callback:t},o},o.prototype.clearTimeout=function(t){for(var e in this.events){var n=this.events[e];if(t in n)return delete n[t],!0}return!1},o.prototype.update=function(){this._executeEvents(),this.frame_count++},o.prototype._executeEvents=function(){var t=this.frame_count,e=this.events[t];if(e){for(var n in e){e[n].callback()}delete this.events[t]}},t.exports=o},function(t,e,n){"use strict";n(26),n(28),n(51),n(52),t.exports=n(14)},function(t,e,n){"use strict";var i=n(5),o=n(47),r=n(27),a=n(48),s=n(49),u=function(t){this._is_gamepad_usable=!1,this._rawgamepads=[],this._before_rawgamepads=[],this._pads=[]};u.prototype.init=function(){this._rawgamepads=[],this._before_rawgamepads=[],this._pads=[]},u.prototype.update=function(){if(this._is_gamepad_usable){this._handleGamePad();for(var t=0,e=this._pads.length;t<e;t++)this._pads[t].update()}},u.prototype._handleGamePad=function(){this._rawgamepads=window.navigator.getGamepads()},u.prototype.afterDraw=function(){if(this._is_gamepad_usable){this._before_rawgamepads=[];for(var t=0,e=this._rawgamepads.length;t<e;t++)if(this._rawgamepads[t])for(var n in this._before_rawgamepads[t]={buttons:{},id:this._rawgamepads[t].id},this._rawgamepads[t].buttons)this._before_rawgamepads[t].buttons[n]={pressed:this._rawgamepads[t].buttons[n].pressed};else this._before_rawgamepads[t]=null}},u.prototype.setupEvents=function(t){window.Gamepad&&window.navigator&&window.navigator.getGamepads&&(this._is_gamepad_usable=!0)},u.prototype.getGamepad=function(t){return t in this._pads||(this._pads[t]=new c(this,t)),this._pads[t]},u.prototype.getGamepadList=function(){throw new Error("getGamepadList method is not implemented yet.")},u.prototype.isGamepadConnected=function(t){return this._rawgamepads[t]&&this._rawgamepads[t].connected};var c=function(t,e){this._gamepad_manager=t,this._index=e,this._config=o,this._bit_code_to_down_time={},this._initPressedTime()};c.prototype._initPressedTime=function(){for(var t in i){var e=i[t];this._bit_code_to_down_time[e]=0}},c.prototype.update=function(){this._updateConfig(),this._setPressedTime()},c.prototype._updateConfig=function(){var t=this._gamepad_manager._rawgamepads[this._index];t&&("Xbox 360 Controller (STANDARD GAMEPAD Vendor: 045e Product: 028e)"===t.id?this._config=r:"USB Gamepad  (STANDARD GAMEPAD Vendor: 0079 Product: 0011)"===t.id?this._config=a:"Sony PlayStation DualShock 4 (v2) wireless controller"===t.id?this._config=s:this._config=o)},c.prototype._setPressedTime=function(){for(var t in i){var e=i[t];this.isButtonDown(e)?++this._bit_code_to_down_time[e]:this._bit_code_to_down_time[e]=0}},c.prototype._isBeforeButtonDown=function(t){var e=this._gamepad_manager._before_rawgamepads[this._index];if(e){if(t in this._config){var n=this._config[t];return e.buttons[n]&&e.buttons[n].pressed}return!1}return!1},c.prototype.isButtonDown=function(t){var e=this._gamepad_manager._rawgamepads[this._index];if(e){if(t in this._config){var n=this._config[t];return e.buttons[n]&&e.buttons[n].pressed}return!1}return!1},c.prototype.isButtonPush=function(t){return!this._isBeforeButtonDown(t)&&this.isButtonDown(t)},c.prototype.isButtonRelease=function(t){return this._isBeforeButtonDown(t)&&!this.isButtonDown(t)},c.prototype.getButtonDownTime=function(t){return this._bit_code_to_down_time[t]},c.prototype.getAxisX=function(){var t=this._gamepad_manager._rawgamepads[this._index];return t?t.axes[0]:0},c.prototype.getAxisY=function(){var t=this._gamepad_manager._rawgamepads[this._index];return t?t.axes[1]:0},t.exports=u},function(t,e,n){"use strict";var i=n(5),o={};o[i.UP]=12,o[i.DOWN]=13,o[i.LEFT]=14,o[i.RIGHT]=15,o[i.MENU]=16,o[i.A]=0,o[i.B]=1,o[i.X]=2,o[i.Y]=3,o[i.L1]=4,o[i.R1]=5,o[i.L2]=6,o[i.R2]=7,o[i.SELECT]=8,o[i.START]=9,o[i.L3]=10,o[i.R3]=11,t.exports=o},function(t,e,n){"use strict";var i=n(5),o=n(50),r=function(t){this._input_manager=t,this._current_keyflag=0,this._before_keyflag=0,this._key_bit_code_to_down_time={},this._keycode_to_bit_code=this._setupKeycodeMap(o)};r.prototype._setupKeycodeMap=function(t){var e={};for(var n in t){e[t[n]]=n}return e},r.prototype.init=function(){this._current_keyflag=0,this._before_keyflag=0,this._initPressedKeyTime()},r.prototype._initPressedKeyTime=function(){for(var t in this._key_bit_code_to_down_time={},i){var e=i[t];this._key_bit_code_to_down_time[e]=0}},r.prototype.update=function(){this._setGamepadAsKeyboard(),this._setPressedKeyTime()},r.prototype._setPressedKeyTime=function(){for(var t in i){var e=i[t];this.isKeyDown(e)?++this._key_bit_code_to_down_time[e]:this._key_bit_code_to_down_time[e]=0}},r.prototype._setGamepadAsKeyboard=function(){if(this._input_manager.isGamepadConnected(0)){var t=this._input_manager.getGamepad(0);for(var e in i){var n=i[e];t.isButtonDown(n)?this._current_keyflag|=n:this._isGamepPadStickDown(t,n)?this._current_keyflag|=n:this._current_keyflag&=~n}}},r.prototype._isGamepPadStickDown=function(t,e){return e===i.UP&&t.getAxisY()<-.5||(e===i.DOWN&&t.getAxisY()>.5||(e===i.LEFT&&t.getAxisX()<-.5||e===i.RIGHT&&t.getAxisX()>.5))},r.prototype.afterDraw=function(){this._before_keyflag=this._current_keyflag},r.prototype.setupEvents=function(t){var e=this;window.onkeydown=function(t){e._handleKeyDown(t)},window.onkeyup=function(t){e._handleKeyUp(t)}},r.prototype._handleKeyDown=function(t){this._current_keyflag|=this._keycode_to_bit_code[t.keyCode],t.preventDefault()},r.prototype._handleKeyUp=function(t){this._current_keyflag&=~this._keycode_to_bit_code[t.keyCode],t.preventDefault()},r.prototype.isKeyDown=function(t){return!!(this._current_keyflag&t)},r.prototype.isKeyPush=function(t){return!(this._before_keyflag&t)&&this._current_keyflag&t},r.prototype.isKeyRelease=function(t){return this._before_keyflag&t&&!(this._current_keyflag&t)},r.prototype.getKeyDownTime=function(t){return this._key_bit_code_to_down_time[t]},t.exports=r},function(t,e,n){"use strict";var i=n(8),o=function(t){i.apply(this,arguments),this.video=null,this.next_scene_name_and_args=null,this.is_playing=!1,this._height=null,this._width=null,this._top=null,this._left=null,this._is_mute=!1};n(1).inherit(o,i),o.prototype.init=function(t,e){i.prototype.init.apply(this,arguments);var n=this;n.is_playing=!1,n._height=null,n._width=null,n._top=null,n._left=null,n._callback=function(){},e&&(n._callback=e),this.isStopBGM()&&this.core.audio_loader.stopBGM();var o=document.createElement("video");o.src=t,o.controls=!1,o.preload="auto",o.oncanplaythrough=function(){n._calcDrawSizeAndPosition(),o.play(),n.is_playing=!0},this._is_mute&&(o.muted=!0),o.load(),n.video=o},o.prototype.update=function(){i.prototype.update.apply(this,arguments),this.is_playing&&this.video.ended&&this.notifyEnd()},o.prototype.draw=function(){i.prototype.draw.apply(this,arguments);var t=this.core.ctx;t&&(t.save(),t.fillStyle="black",t.fillRect(0,0,this.core.width,this.core.height),this.is_playing&&t.drawImage(this.video,0,0,this.video.videoWidth,this.video.videoHeight,this._left,this._top,this._width,this._height),t.restore())},o.prototype._calcDrawSizeAndPosition=function(){var t,e,n,i,o=this.width/this.height,r=this.video.videoWidth/this.video.videoHeight;r>=o?(n=this.width,i=this.width/r,e=(this.height-i)/2,t=0):(i=this.height,n=this.height*r,e=0,t=(this.width-n)/2),this._height=i,this._width=n,this._top=e,this._left=t},o.prototype.notifyEnd=function(){this.video=null,this.is_playing=!1,this._callback(this.core)},o.prototype.isStopBGM=function(){return!0},o.prototype.mute=function(){return this._is_mute=!0,this},t.exports=o},function(t,e,n){"use strict";var i=n(4),o=n(1),r=function(t){i.apply(this,arguments),this.current_sprite_index=0};o.inherit(r,i),r.prototype.init=function(){i.prototype.init.apply(this,arguments),this.current_sprite_index=0},r.prototype.update=function(){i.prototype.update.apply(this,arguments),this.frame_count%this.spriteAnimationSpan()==0&&(this.current_sprite_index++,this.current_sprite_index>=this.spriteIndices().length&&(this.current_sprite_index=0))},r.prototype.draw=function(){if(this.isShow()){var t=this.core.image_loader.getImage(this.spriteName());this.scale()&&console.error("scale method is deprecated. you should use scaleWidth and scaleHeight.");var e=this.core.ctx;e.save(),e.translate(this.globalCenterX(),this.globalCenterY());var n=o.thetaToRadian(this._velocity.theta+this.rotateAdjust());e.rotate(n);var r=this.spriteWidth(),a=this.spriteHeight();r||(r=t.width),a||(a=t.height);var s=this.width(),u=this.height();this.isReflect()&&e.transform(-1,0,0,1,0,0),e.globalAlpha=this.alpha(),e.drawImage(t,r*this.spriteIndexX(),a*this.spriteIndexY(),r,a,-s/2,-u/2,s,u),e.restore()}i.prototype.draw.apply(this,arguments)},r.prototype.spriteName=function(){throw new Error("spriteName method must be overridden.")},r.prototype.spriteIndexX=function(){return this.spriteIndices()[this.current_sprite_index].x},r.prototype.spriteIndexY=function(){return this.spriteIndices()[this.current_sprite_index].y},r.prototype.width=function(){return this.spriteWidth()*this.scaleWidth()},r.prototype.height=function(){return this.spriteHeight()*this.scaleHeight()},r.prototype.isShow=function(){return!0},r.prototype.spriteAnimationSpan=function(){return 0},r.prototype.spriteIndices=function(){return[{x:0,y:0}]},r.prototype.spriteWidth=function(){return 0},r.prototype.spriteHeight=function(){return 0},r.prototype.rotateAdjust=function(){return 0},r.prototype.scale=function(){return 0},r.prototype.scaleWidth=function(){return 1},r.prototype.scaleHeight=function(){return 1},r.prototype.isReflect=function(){return!1},r.prototype.alpha=function(){return 1},t.exports=r},function(t,e,n){"use strict";var i=n(4),o=n(1),r=n(32).SPRITE3D,a=n(39),s=function(t){i.apply(this,arguments),this.current_sprite_index=0,this._z=0,this.vertices=[],this.coordinates=[],this.indices=[],this.colors=[],this.vertices.length=r.V_SIZE,this.coordinates.length=r.C_SIZE,this.indices.length=r.I_SIZE,this.colors.length=r.A_SIZE;var e=this.core.gl;this.vBuffer=e.createBuffer(),this.cBuffer=e.createBuffer(),this.iBuffer=e.createBuffer(),this.aBuffer=e.createBuffer(),this.texture=null,this.mvMatrix=a.mat4.create(),this.pMatrix=a.mat4.create()};o.inherit(s,i),s.prototype.init=function(){i.prototype.init.apply(this,arguments),this.current_sprite_index=0,this._initmvpMatrix(),this._initVertices(),this._initCoordinates(),this._initIndices(),this._initColors(),this._initTexture()},s.prototype._initmvpMatrix=function(){a.mat4.identity(this.mvMatrix),a.mat4.translate(this.mvMatrix,this.mvMatrix,[-this.core.width/2,this.core.height/2,0]),this._setOrthographicProjection()},s.prototype._initVertices=function(){var t=this.spriteWidth()/2,e=this.spriteHeight()/2;this.vertices[0]=-t,this.vertices[1]=-e,this.vertices[2]=-1,this.vertices[3]=t,this.vertices[4]=-e,this.vertices[5]=-1,this.vertices[6]=t,this.vertices[7]=e,this.vertices[8]=-1,this.vertices[9]=-t,this.vertices[10]=e,this.vertices[11]=-1},s.prototype._initCoordinates=function(){var t=this.core.image_loader.getImage(this.spriteName()),e=this.spriteWidth()/t.width,n=this.spriteHeight()/t.height,i=e*this.spriteIndexX(),o=n*this.spriteIndexY(),r=i+e,a=o+n;this.coordinates[0]=i,this.coordinates[1]=a,this.coordinates[2]=r,this.coordinates[3]=a,this.coordinates[4]=r,this.coordinates[5]=o,this.coordinates[6]=i,this.coordinates[7]=o},s.prototype._initIndices=function(){this.indices[0]=0,this.indices[1]=1,this.indices[2]=2,this.indices[3]=0,this.indices[4]=2,this.indices[5]=3},s.prototype._initColors=function(){this.colors[0]=1,this.colors[1]=1,this.colors[2]=1,this.colors[3]=1,this.colors[4]=1,this.colors[5]=1,this.colors[6]=1,this.colors[7]=1,this.colors[8]=1,this.colors[9]=1,this.colors[10]=1,this.colors[11]=1,this.colors[12]=1,this.colors[13]=1,this.colors[14]=1,this.colors[15]=1},s.prototype._initTexture=function(){var t=this.core.gl,e=this.core.image_loader.getImage(this.spriteName()),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.bindTexture(t.TEXTURE_2D,null),this.texture=n},s.prototype._setOrthographicProjection=function(){a.mat4.identity(this.pMatrix);a.mat4.ortho(this.pMatrix,-this.core.width/2,this.core.width/2,-this.core.height/2,this.core.height/2,.1,10)},s.prototype.update=function(){i.prototype.update.apply(this,arguments),this.frame_count%this.spriteAnimationSpan()==0&&(this.current_sprite_index++,this.current_sprite_index>=this.spriteIndices().length&&(this.current_sprite_index=0)),this._initVertices(),this._initCoordinates(),this._translate()},s.prototype._translate=function(){for(var t=0;t<r.V_ITEM_NUM;t++)this.vertices[t*r.V_ITEM_SIZE+0]+=this.x(),this.vertices[t*r.V_ITEM_SIZE+1]-=this.y(),this.vertices[t*r.V_ITEM_SIZE+2]+=this.z()},s.prototype._rotate=function(){for(var t=this._getRadian(),e=0;e<r.V_ITEM_NUM;e++){var n=this.vertices[e*r.V_ITEM_SIZE+0],i=this.vertices[e*r.V_ITEM_SIZE+1];this.vertices[e*r.V_ITEM_SIZE+0]=n*Math.cos(t)-i*Math.sin(t),this.vertices[e*r.V_ITEM_SIZE+1]=n*Math.sin(t)+i*Math.cos(t)}},s.prototype._getRadian=function(){var t=this.velocity.theta;return o.thetaToRadian(t)},s.prototype.draw=function(){if(this.isShow()){var t=this.core.gl,e=this.shader();t.useProgram(e.shader_program),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),t.enable(t.BLEND),t.disable(t.DEPTH_TEST),this._setupAttribute("aVertexPosition",this.vBuffer,new Float32Array(this.vertices),r.V_ITEM_SIZE),this._setupAttribute("aTextureCoordinates",this.cBuffer,new Float32Array(this.coordinates),r.C_ITEM_SIZE),this._setupAttribute("aColor",this.aBuffer,new Float32Array(this.colors),r.A_ITEM_SIZE),this._setupTexture("uSampler",0,this.texture),t.uniformMatrix4fv(e.uniform_locations.uPMatrix,!1,this.pMatrix),t.uniformMatrix4fv(e.uniform_locations.uMVMatrix,!1,this.mvMatrix),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.iBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.indices),t.STATIC_DRAW),this.setupAdditionalVariables(),t.drawElements(t.TRIANGLES,this.indices.length,t.UNSIGNED_SHORT,0)}i.prototype.draw.apply(this,arguments)},s.prototype._setupAttribute=function(t,e,n,i){var o=this.core.gl,r=this.shader();o.bindBuffer(o.ARRAY_BUFFER,e),o.bufferData(o.ARRAY_BUFFER,n,o.STATIC_DRAW),o.enableVertexAttribArray(r.attribute_locations[t]),o.vertexAttribPointer(r.attribute_locations[t],i,o.FLOAT,!1,0,0)},s.prototype._setupTexture=function(t,e,n){var i=this.core.gl,o=this.shader();i.activeTexture(i["TEXTURE"+e]),i.bindTexture(i.TEXTURE_2D,n),i.uniform1i(o.uniform_locations[t],e)},s.prototype.z=function(t){return void 0!==t&&(this._z=t),this._z},s.prototype.shader=function(){return this.core.sprite_3d_shader},s.prototype.setupAdditionalVariables=function(){},s.prototype.spriteName=function(){throw new Error("spriteName method must be overridden.")},s.prototype.spriteIndexX=function(){return this.spriteIndices()[this.current_sprite_index].x},s.prototype.spriteIndexY=function(){return this.spriteIndices()[this.current_sprite_index].y},s.prototype.width=function(){return this.spriteWidth()*this.scaleWidth()},s.prototype.height=function(){return this.spriteHeight()*this.scaleHeight()},s.prototype.isShow=function(){return!0},s.prototype.spriteAnimationSpan=function(){return 0},s.prototype.spriteIndices=function(){return[{x:0,y:0}]},s.prototype.spriteWidth=function(){return 0},s.prototype.spriteHeight=function(){return 0},s.prototype.rotateAdjust=function(){return 0},s.prototype.scaleWidth=function(){return 1},s.prototype.scaleHeight=function(){return 1},s.prototype.isReflect=function(){return!1},t.exports=s},function(t,e,n){"use strict";var i={SPRITE3D:{}};i.SPRITE3D.V_ITEM_SIZE=3,i.SPRITE3D.V_ITEM_NUM=4,i.SPRITE3D.V_SIZE=i.SPRITE3D.V_ITEM_SIZE*i.SPRITE3D.V_ITEM_NUM,i.SPRITE3D.C_ITEM_SIZE=2,i.SPRITE3D.C_ITEM_NUM=4,i.SPRITE3D.C_SIZE=i.SPRITE3D.C_ITEM_SIZE*i.SPRITE3D.C_ITEM_NUM,i.SPRITE3D.I_ITEM_SIZE=1,i.SPRITE3D.I_ITEM_NUM=6,i.SPRITE3D.I_SIZE=i.SPRITE3D.I_ITEM_SIZE*i.SPRITE3D.I_ITEM_NUM,i.SPRITE3D.A_ITEM_SIZE=4,i.SPRITE3D.A_ITEM_NUM=4,i.SPRITE3D.A_SIZE=i.SPRITE3D.A_ITEM_SIZE*i.SPRITE3D.A_ITEM_NUM,t.exports=i},function(t,e,n){"use strict";var i=n(4),o=n(1),r=function(t){i.apply(this,arguments),this._objects={}};o.inherit(r,i),r.prototype.init=function(){i.prototype.init.apply(this,arguments),this._objects={}},r.prototype.update=function(){for(var t in i.prototype.update.apply(this,arguments),this._objects)this._objects[t].update()},r.prototype.beforeDraw=function(){for(var t in i.prototype.beforeDraw.apply(this,arguments),this._objects)this._objects[t].beforeDraw()},r.prototype.draw=function(){for(var t in i.prototype.draw.apply(this,arguments),this._objects)this._objects[t].draw()},r.prototype.afterDraw=function(){for(var t in i.prototype.afterDraw.apply(this,arguments),this._objects)this._objects[t].afterDraw()},r.prototype.addObject=function(t){this._objects[t.id]=t},r.prototype.addObjects=function(t){for(var e=0,n=t.length;e<n;e++){var i=t[e];this._objects[i.id]=i}},r.prototype.setObjects=function(t){this.removeAllObject(),this.addObjects(t)},r.prototype.removeAllObject=function(){this._objects={}},r.prototype.removeObject=function(t){return this.remove(t.id)},r.prototype.existsObject=function(t){return t.id in this._objects},r.prototype.remove=function(t){var e=this._objects[t];return delete this._objects[t],e},r.prototype.get=function(t){return this._objects[t]},r.prototype.getAll=function(){return Object.values(this._objects)},r.prototype.getRandom=function(){var t=Object.keys(this._objects),e=t[o.getRandomInt(t.length)-1];return this._objects[e]},r.prototype.forEach=function(t){for(var e in this._objects)t(this._objects[e])},r.prototype.count=function(){return Object.keys(this._objects).length},r.prototype.checkCollisionWithObject=function(t){var e=!1;for(var n in this._objects){var i=this._objects[n];t.intersect(i)&&(t.onCollision(i),i.onCollision(t),e=!0)}return e},r.prototype.checkCollisionWithContainer=function(t){for(var e in this._objects)for(var n in t._objects)if(this._objects[e].checkCollision(t.get[n])){var i=this._objects[e],o=t._objects[n];if(i.onCollision(o),o.onCollision(i),!this._objects[e])break}},r.prototype.removeOutOfStageObjects=function(){return console.error("object's removeOutOfStageObjects method is deprecated."),this.removeOutOfSceneObjects.apply(this,arguments)},r.prototype.removeOutOfSceneObjects=function(){for(var t in this._objects)this._objects[t].isOutOfScene()&&this.remove(t)},t.exports=r},function(t,e,n){"use strict";var i=n(4),o=n(1),r=n(39),a=n(32).SPRITE3D,s=function(t,e){i.apply(this,arguments),this.Class=e,this.objects={},this.vertices=[],this.coordinates=[],this.indices=[],this.colors=[];var n=this.core.gl;this.vBuffer=n.createBuffer(),this.cBuffer=n.createBuffer(),this.iBuffer=n.createBuffer(),this.aBuffer=n.createBuffer(),this.mvMatrix=r.mat4.create(),this.pMatrix=r.mat4.create()};o.inherit(s,i),s.prototype.init=function(){i.prototype.init.apply(this,arguments),this.objects={},this._initmvpMatrix()},s.prototype._initmvpMatrix=function(){r.mat4.identity(this.mvMatrix),r.mat4.translate(this.mvMatrix,this.mvMatrix,[-this.core.width/2,this.core.height/2,0]),this._setOrthographicProjection()},s.prototype._setOrthographicProjection=function(){r.mat4.identity(this.pMatrix);r.mat4.ortho(this.pMatrix,-this.core.width/2,this.core.width/2,-this.core.height/2,this.core.height/2,.1,10)},s.prototype.update=function(){for(var t in i.prototype.update.apply(this,arguments),this.objects)this.objects[t].update();this._updateAttributes()},s.prototype._updateAttributes=function(){this._resetAttributes();var t=0;for(var e in this.objects){var n=this.objects[e];if(n.isShow()){var i;for(i=0;i<a.V_SIZE;i++)this.vertices[t*a.V_SIZE+i]=n.vertices[i];for(i=0;i<a.C_SIZE;i++)this.coordinates[t*a.C_SIZE+i]=n.coordinates[i];for(i=0;i<a.I_SIZE;i++)this.indices[t*a.I_SIZE+i]=t*a.V_ITEM_NUM+n.indices[i];for(i=0;i<a.A_SIZE;i++)this.colors[t*a.A_SIZE+i]=n.colors[i];t++}}},s.prototype._resetAttributes=function(){this.vertices.length=0,this.coordinates.length=0,this.indices.length=0,this.colors.length=0},s.prototype.beforeDraw=function(){for(var t in i.prototype.beforeDraw.apply(this,arguments),this.objects)this.objects[t].beforeDraw()},s.prototype.draw=function(){if(i.prototype.draw.apply(this,arguments),0!==this.vertices.length){var t=this.core.gl,e=this.shader();for(var n in t.useProgram(e.shader_program),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),t.enable(t.BLEND),t.disable(t.DEPTH_TEST),this._setupAttribute("aVertexPosition",this.vBuffer,new Float32Array(this.vertices),a.V_ITEM_SIZE),this._setupAttribute("aTextureCoordinates",this.cBuffer,new Float32Array(this.coordinates),a.C_ITEM_SIZE),this._setupAttribute("aColor",this.aBuffer,new Float32Array(this.colors),a.A_ITEM_SIZE),this.objects){var o=this.objects[n].texture;this._setupTexture("uSampler",0,o);break}t.uniformMatrix4fv(e.uniform_locations.uPMatrix,!1,this.pMatrix),t.uniformMatrix4fv(e.uniform_locations.uMVMatrix,!1,this.mvMatrix),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.iBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.indices),t.STATIC_DRAW),t.drawElements(t.TRIANGLES,this.indices.length,t.UNSIGNED_SHORT,0)}},s.prototype._setupAttribute=function(t,e,n,i){var o=this.core.gl,r=this.shader();o.bindBuffer(o.ARRAY_BUFFER,e),o.bufferData(o.ARRAY_BUFFER,n,o.STATIC_DRAW),o.enableVertexAttribArray(r.attribute_locations[t]),o.vertexAttribPointer(r.attribute_locations[t],i,o.FLOAT,!1,0,0)},s.prototype._setupTexture=function(t,e,n){var i=this.core.gl,o=this.shader();i.activeTexture(i["TEXTURE"+e]),i.bindTexture(i.TEXTURE_2D,n),i.uniform1i(o.uniform_locations[t],e)},s.prototype.afterDraw=function(){for(var t in i.prototype.afterDraw.apply(this,arguments),this.objects)this.objects[t].afterDraw()},s.prototype.create=function(){var t=new this.Class(this.scene);return t.init.apply(t,arguments),this.objects[t.id]=t,t},s.prototype.remove=function(t){delete this.objects[t]},s.prototype.checkCollisionWithObject=function(t){for(var e in this.objects){var n=this.objects[e];t.checkCollision(n)&&(t.onCollision(n),n.onCollision(t))}},s.prototype.checkCollisionWithManager=function(t){for(var e in this.objects)for(var n in t.objects)if(this.objects[e].checkCollision(t.objects[n])){var i=this.objects[e],o=t.objects[n];if(i.onCollision(o),o.onCollision(i),!this.objects[e])break}},s.prototype.removeOutOfStageObjects=function(){for(var t in this.objects)this.objects[t].isOutOfStage()&&this.remove(t)},s.prototype.shader=function(){return this.core.sprite_3d_shader},t.exports=s},function(t,e,n){"use strict";var i=n(4),o=n(1),r=function(t,e,n,r,a,s){console.error("UIParts of Object is deprecated."),i.apply(this,arguments),this.x(e),this.y(n),this._width=r,this._height=a,this._draw_function=null,void 0!==s&&(this._draw_function=o.bind(s,this)),this._is_show_rect=!1,this._collision_callback=null};o.inherit(r,i),r.prototype.onCollision=function(t){this._collision_callback&&this._collision_callback(t)},r.prototype.collisionWidth=function(){return this._width},r.prototype.collisionHeight=function(){return this._height},r.prototype.setShowRect=function(){return this._is_show_rect=!0,this},r.prototype.setVariable=function(t,e){return this[t]=e,this},r.prototype.setCollisionCallback=function(t){this._collision_callback=o.bind(t,this)},r.prototype.draw=function(){i.prototype.draw.apply(this,arguments);var t=this.core.ctx;t.save(),this._draw_function&&this._draw_function(),t.restore(),this._is_show_rect&&(t.save(),t.fillStyle="rgb( 255, 255, 255 )",t.globalAlpha=.4,t.fillRect(this.getCollisionLeftX(),this.getCollisionUpY(),this.collisionWidth(),this.collisionHeight()),t.restore())},t.exports=r},function(t,e,n){"use strict";var i=n(11),o=function(t){i.apply(this,arguments)};n(1).inherit(o,i);var r="hakurei_engine",a="save";o.KEY=function(){return!this.isLocalMode()&&window&&window.location?[r,a,window.location.pathname].join(":"):a},t.exports=o},function(t,e,n){"use strict";var i=n(0).Util,o=n(0).Scene.Base,r=n(0).Manager.Scenario,a=function(t){o.apply(this,arguments),this.serif=new r(this.core,{typography_speed:1})};i.inherit(a,o),a.prototype.init=function(){o.prototype.init.apply(this,arguments),this.serif.init(this.serifScript()),this.serif.start(),this.notifySerifStart()},a.prototype.beforeDraw=function(){o.prototype.beforeDraw.apply(this,arguments),60===this.frame_count&&this.bgm()&&this.core.audio_loader.playBGM(this.bgm()),this.core.input_manager.isLeftClickPush()&&(this.serif.isEnd()?this.notifySerifEnd():this.serif.next())},a.prototype.draw=function(){o.prototype.draw.apply(this,arguments),this._showBackground(),this._showMessageWindow(),this._showMessage()},a.prototype._showBackground=function(){var t=this.core.ctx,e=this.serif.getCurrentBackgroundImageName()?this.serif.getCurrentBackgroundImageName():this.background(),n=this.core.image_loader.getImage(e);t.drawImage(n,0,0,n.width,n.height,0,0,this.core.width,this.core.height)},a.prototype._showMessageWindow=function(){var t=this.core.ctx;t.save(),t.globalAlpha=.5,t.fillStyle="rgb( 0, 0, 0 )",t.fillRect(10,this.core.height-125,this.core.width-20,100),t.restore()},a.prototype._showMessage=function(){var t=this.core.ctx,e=this.serif.getCurrentOption().font_color;e=e?i.hexToRGBString(e):"rgb(255, 255, 255)";var n,o=this.serif.getCurrentOption().outline_color;o=o?i.hexToRGBString(o):"rgb(0, 0, 0)";var r=this.serif.getCurrentPrintedSentences();if(r.length){n=this.core.height-125+40;for(var a=0,s=r.length;a<s;a++)t.save(),t.font="18px 'MyFont'",t.textAlign="left",t.strokeStyle=o,t.lineWidth=4,t.strokeText(r[a],40,n),t.fillStyle=e,t.fillText(r[a],40,n),t.restore(),n+=30}},a.prototype.notifySerifEnd=function(){throw new Error("notifySerifEnd method must be defined.")},a.prototype.notifySerifStart=function(){throw new Error("notifySerifStart method must be defined.")},a.prototype.serifScript=function(){throw new Error("serifScript method must be defined.")},a.prototype.background=function(){throw new Error("background method must be defined.")},a.prototype.bgm=function(){},t.exports=a},function(t,e,n){"use strict";var i=n(0).Object.Base,o=function(t,e,n){i.apply(this,arguments),this._width=e,this._height=n};n(0).Util.inherit(o,i),o.prototype.collisionWidth=function(){return this._width},o.prototype.collisionHeight=function(){return this._height},o.prototype.isCollision=function(){return this.parent.isCollision()},o.prototype.x=function(){return this.parent.x()},o.prototype.y=function(){return this.parent.y()},t.exports=o},function(t,e,n){"use strict";n.r(e);var i={};n.r(i),n.d(i,"EPSILON",function(){return l}),n.d(i,"ARRAY_TYPE",function(){return d}),n.d(i,"RANDOM",function(){return f}),n.d(i,"setMatrixArrayType",function(){return m}),n.d(i,"toRadian",function(){return g}),n.d(i,"equals",function(){return b});var o={};n.r(o),n.d(o,"create",function(){return v}),n.d(o,"clone",function(){return w}),n.d(o,"copy",function(){return k}),n.d(o,"identity",function(){return x}),n.d(o,"fromValues",function(){return S}),n.d(o,"set",function(){return M}),n.d(o,"transpose",function(){return E}),n.d(o,"invert",function(){return I}),n.d(o,"adjoint",function(){return T}),n.d(o,"determinant",function(){return A}),n.d(o,"multiply",function(){return C}),n.d(o,"rotate",function(){return P}),n.d(o,"scale",function(){return R}),n.d(o,"fromRotation",function(){return F}),n.d(o,"fromScaling",function(){return B}),n.d(o,"str",function(){return O}),n.d(o,"frob",function(){return U}),n.d(o,"LDU",function(){return D}),n.d(o,"add",function(){return N}),n.d(o,"subtract",function(){return L}),n.d(o,"exactEquals",function(){return j}),n.d(o,"equals",function(){return G}),n.d(o,"multiplyScalar",function(){return W}),n.d(o,"multiplyScalarAndAdd",function(){return H}),n.d(o,"mul",function(){return Y}),n.d(o,"sub",function(){return q});var r={};n.r(r),n.d(r,"create",function(){return X}),n.d(r,"clone",function(){return V}),n.d(r,"copy",function(){return K}),n.d(r,"identity",function(){return z}),n.d(r,"fromValues",function(){return Z}),n.d(r,"set",function(){return Q}),n.d(r,"invert",function(){return J}),n.d(r,"determinant",function(){return $}),n.d(r,"multiply",function(){return tt}),n.d(r,"rotate",function(){return et}),n.d(r,"scale",function(){return nt}),n.d(r,"translate",function(){return it}),n.d(r,"fromRotation",function(){return ot}),n.d(r,"fromScaling",function(){return rt}),n.d(r,"fromTranslation",function(){return at}),n.d(r,"str",function(){return st}),n.d(r,"frob",function(){return ut}),n.d(r,"add",function(){return ct}),n.d(r,"subtract",function(){return ht}),n.d(r,"multiplyScalar",function(){return pt}),n.d(r,"multiplyScalarAndAdd",function(){return _t}),n.d(r,"exactEquals",function(){return lt}),n.d(r,"equals",function(){return dt}),n.d(r,"mul",function(){return ft}),n.d(r,"sub",function(){return mt});var a={};n.r(a),n.d(a,"create",function(){return yt}),n.d(a,"fromMat4",function(){return gt}),n.d(a,"clone",function(){return bt}),n.d(a,"copy",function(){return vt}),n.d(a,"fromValues",function(){return wt}),n.d(a,"set",function(){return kt}),n.d(a,"identity",function(){return xt}),n.d(a,"transpose",function(){return St}),n.d(a,"invert",function(){return Mt}),n.d(a,"adjoint",function(){return Et}),n.d(a,"determinant",function(){return It}),n.d(a,"multiply",function(){return Tt}),n.d(a,"translate",function(){return At}),n.d(a,"rotate",function(){return Ct}),n.d(a,"scale",function(){return Pt}),n.d(a,"fromTranslation",function(){return Rt}),n.d(a,"fromRotation",function(){return Ft}),n.d(a,"fromScaling",function(){return Bt}),n.d(a,"fromMat2d",function(){return Ot}),n.d(a,"fromQuat",function(){return Ut}),n.d(a,"normalFromMat4",function(){return Dt}),n.d(a,"projection",function(){return Nt}),n.d(a,"str",function(){return Lt}),n.d(a,"frob",function(){return jt}),n.d(a,"add",function(){return Gt}),n.d(a,"subtract",function(){return Wt}),n.d(a,"multiplyScalar",function(){return Ht}),n.d(a,"multiplyScalarAndAdd",function(){return Yt}),n.d(a,"exactEquals",function(){return qt}),n.d(a,"equals",function(){return Xt}),n.d(a,"mul",function(){return Vt}),n.d(a,"sub",function(){return Kt});var s={};n.r(s),n.d(s,"create",function(){return zt}),n.d(s,"clone",function(){return Zt}),n.d(s,"copy",function(){return Qt}),n.d(s,"fromValues",function(){return Jt}),n.d(s,"set",function(){return $t}),n.d(s,"identity",function(){return te}),n.d(s,"transpose",function(){return ee}),n.d(s,"invert",function(){return ne}),n.d(s,"adjoint",function(){return ie}),n.d(s,"determinant",function(){return oe}),n.d(s,"multiply",function(){return re}),n.d(s,"translate",function(){return ae}),n.d(s,"scale",function(){return se}),n.d(s,"rotate",function(){return ue}),n.d(s,"rotateX",function(){return ce}),n.d(s,"rotateY",function(){return he}),n.d(s,"rotateZ",function(){return pe}),n.d(s,"fromTranslation",function(){return _e}),n.d(s,"fromScaling",function(){return le}),n.d(s,"fromRotation",function(){return de}),n.d(s,"fromXRotation",function(){return fe}),n.d(s,"fromYRotation",function(){return me}),n.d(s,"fromZRotation",function(){return ye}),n.d(s,"fromRotationTranslation",function(){return ge}),n.d(s,"fromQuat2",function(){return be}),n.d(s,"getTranslation",function(){return ve}),n.d(s,"getScaling",function(){return we}),n.d(s,"getRotation",function(){return ke}),n.d(s,"fromRotationTranslationScale",function(){return xe}),n.d(s,"fromRotationTranslationScaleOrigin",function(){return Se}),n.d(s,"fromQuat",function(){return Me}),n.d(s,"frustum",function(){return Ee}),n.d(s,"perspective",function(){return Ie}),n.d(s,"perspectiveFromFieldOfView",function(){return Te}),n.d(s,"ortho",function(){return Ae}),n.d(s,"lookAt",function(){return Ce}),n.d(s,"targetTo",function(){return Pe}),n.d(s,"str",function(){return Re}),n.d(s,"frob",function(){return Fe}),n.d(s,"add",function(){return Be}),n.d(s,"subtract",function(){return Oe}),n.d(s,"multiplyScalar",function(){return Ue}),n.d(s,"multiplyScalarAndAdd",function(){return De}),n.d(s,"exactEquals",function(){return Ne}),n.d(s,"equals",function(){return Le}),n.d(s,"mul",function(){return je}),n.d(s,"sub",function(){return Ge});var u={};n.r(u),n.d(u,"create",function(){return We}),n.d(u,"clone",function(){return He}),n.d(u,"length",function(){return Ye}),n.d(u,"fromValues",function(){return qe}),n.d(u,"copy",function(){return Xe}),n.d(u,"set",function(){return Ve}),n.d(u,"add",function(){return Ke}),n.d(u,"subtract",function(){return ze}),n.d(u,"multiply",function(){return Ze}),n.d(u,"divide",function(){return Qe}),n.d(u,"ceil",function(){return Je}),n.d(u,"floor",function(){return $e}),n.d(u,"min",function(){return tn}),n.d(u,"max",function(){return en}),n.d(u,"round",function(){return nn}),n.d(u,"scale",function(){return on}),n.d(u,"scaleAndAdd",function(){return rn}),n.d(u,"distance",function(){return an}),n.d(u,"squaredDistance",function(){return sn}),n.d(u,"squaredLength",function(){return un}),n.d(u,"negate",function(){return cn}),n.d(u,"inverse",function(){return hn}),n.d(u,"normalize",function(){return pn}),n.d(u,"dot",function(){return _n}),n.d(u,"cross",function(){return ln}),n.d(u,"lerp",function(){return dn}),n.d(u,"hermite",function(){return fn}),n.d(u,"bezier",function(){return mn}),n.d(u,"random",function(){return yn}),n.d(u,"transformMat4",function(){return gn}),n.d(u,"transformMat3",function(){return bn}),n.d(u,"transformQuat",function(){return vn}),n.d(u,"rotateX",function(){return wn}),n.d(u,"rotateY",function(){return kn}),n.d(u,"rotateZ",function(){return xn}),n.d(u,"angle",function(){return Sn}),n.d(u,"str",function(){return Mn}),n.d(u,"exactEquals",function(){return En}),n.d(u,"equals",function(){return In}),n.d(u,"sub",function(){return Tn}),n.d(u,"mul",function(){return An}),n.d(u,"div",function(){return Cn}),n.d(u,"dist",function(){return Pn}),n.d(u,"sqrDist",function(){return Rn}),n.d(u,"len",function(){return Fn}),n.d(u,"sqrLen",function(){return Bn}),n.d(u,"forEach",function(){return On});var c={};n.r(c),n.d(c,"create",function(){return Un}),n.d(c,"clone",function(){return Dn}),n.d(c,"fromValues",function(){return Nn}),n.d(c,"copy",function(){return Ln}),n.d(c,"set",function(){return jn}),n.d(c,"add",function(){return Gn}),n.d(c,"subtract",function(){return Wn}),n.d(c,"multiply",function(){return Hn}),n.d(c,"divide",function(){return Yn}),n.d(c,"ceil",function(){return qn}),n.d(c,"floor",function(){return Xn}),n.d(c,"min",function(){return Vn}),n.d(c,"max",function(){return Kn}),n.d(c,"round",function(){return zn}),n.d(c,"scale",function(){return Zn}),n.d(c,"scaleAndAdd",function(){return Qn}),n.d(c,"distance",function(){return Jn}),n.d(c,"squaredDistance",function(){return $n}),n.d(c,"length",function(){return ti}),n.d(c,"squaredLength",function(){return ei}),n.d(c,"negate",function(){return ni}),n.d(c,"inverse",function(){return ii}),n.d(c,"normalize",function(){return oi}),n.d(c,"dot",function(){return ri}),n.d(c,"lerp",function(){return ai}),n.d(c,"random",function(){return si}),n.d(c,"transformMat4",function(){return ui}),n.d(c,"transformQuat",function(){return ci}),n.d(c,"str",function(){return hi}),n.d(c,"exactEquals",function(){return pi}),n.d(c,"equals",function(){return _i}),n.d(c,"sub",function(){return li}),n.d(c,"mul",function(){return di}),n.d(c,"div",function(){return fi}),n.d(c,"dist",function(){return mi}),n.d(c,"sqrDist",function(){return yi}),n.d(c,"len",function(){return gi}),n.d(c,"sqrLen",function(){return bi}),n.d(c,"forEach",function(){return vi});var h={};n.r(h),n.d(h,"create",function(){return wi}),n.d(h,"identity",function(){return ki}),n.d(h,"setAxisAngle",function(){return xi}),n.d(h,"getAxisAngle",function(){return Si}),n.d(h,"multiply",function(){return Mi}),n.d(h,"rotateX",function(){return Ei}),n.d(h,"rotateY",function(){return Ii}),n.d(h,"rotateZ",function(){return Ti}),n.d(h,"calculateW",function(){return Ai}),n.d(h,"slerp",function(){return Ci}),n.d(h,"random",function(){return Pi}),n.d(h,"invert",function(){return Ri}),n.d(h,"conjugate",function(){return Fi}),n.d(h,"fromMat3",function(){return Bi}),n.d(h,"fromEuler",function(){return Oi}),n.d(h,"str",function(){return Ui}),n.d(h,"clone",function(){return Di}),n.d(h,"fromValues",function(){return Ni}),n.d(h,"copy",function(){return Li}),n.d(h,"set",function(){return ji}),n.d(h,"add",function(){return Gi}),n.d(h,"mul",function(){return Wi}),n.d(h,"scale",function(){return Hi}),n.d(h,"dot",function(){return Yi}),n.d(h,"lerp",function(){return qi}),n.d(h,"length",function(){return Xi}),n.d(h,"len",function(){return Vi}),n.d(h,"squaredLength",function(){return Ki}),n.d(h,"sqrLen",function(){return zi}),n.d(h,"normalize",function(){return Zi}),n.d(h,"exactEquals",function(){return Qi}),n.d(h,"equals",function(){return Ji}),n.d(h,"rotationTo",function(){return $i}),n.d(h,"sqlerp",function(){return to}),n.d(h,"setAxes",function(){return eo});var p={};n.r(p),n.d(p,"create",function(){return no}),n.d(p,"clone",function(){return io}),n.d(p,"fromValues",function(){return oo}),n.d(p,"fromRotationTranslationValues",function(){return ro}),n.d(p,"fromRotationTranslation",function(){return ao}),n.d(p,"fromTranslation",function(){return so}),n.d(p,"fromRotation",function(){return uo}),n.d(p,"fromMat4",function(){return co}),n.d(p,"copy",function(){return ho}),n.d(p,"identity",function(){return po}),n.d(p,"set",function(){return _o}),n.d(p,"getReal",function(){return lo}),n.d(p,"getDual",function(){return fo}),n.d(p,"setReal",function(){return mo}),n.d(p,"setDual",function(){return yo}),n.d(p,"getTranslation",function(){return go}),n.d(p,"translate",function(){return bo}),n.d(p,"rotateX",function(){return vo}),n.d(p,"rotateY",function(){return wo}),n.d(p,"rotateZ",function(){return ko}),n.d(p,"rotateByQuatAppend",function(){return xo}),n.d(p,"rotateByQuatPrepend",function(){return So}),n.d(p,"rotateAroundAxis",function(){return Mo}),n.d(p,"add",function(){return Eo}),n.d(p,"multiply",function(){return Io}),n.d(p,"mul",function(){return To}),n.d(p,"scale",function(){return Ao}),n.d(p,"dot",function(){return Co}),n.d(p,"lerp",function(){return Po}),n.d(p,"invert",function(){return Ro}),n.d(p,"conjugate",function(){return Fo}),n.d(p,"length",function(){return Bo}),n.d(p,"len",function(){return Oo}),n.d(p,"squaredLength",function(){return Uo}),n.d(p,"sqrLen",function(){return Do}),n.d(p,"normalize",function(){return No}),n.d(p,"str",function(){return Lo}),n.d(p,"exactEquals",function(){return jo}),n.d(p,"equals",function(){return Go});var _={};n.r(_),n.d(_,"create",function(){return Wo}),n.d(_,"clone",function(){return Ho}),n.d(_,"fromValues",function(){return Yo}),n.d(_,"copy",function(){return qo}),n.d(_,"set",function(){return Xo}),n.d(_,"add",function(){return Vo}),n.d(_,"subtract",function(){return Ko}),n.d(_,"multiply",function(){return zo}),n.d(_,"divide",function(){return Zo}),n.d(_,"ceil",function(){return Qo}),n.d(_,"floor",function(){return Jo}),n.d(_,"min",function(){return $o}),n.d(_,"max",function(){return tr}),n.d(_,"round",function(){return er}),n.d(_,"scale",function(){return nr}),n.d(_,"scaleAndAdd",function(){return ir}),n.d(_,"distance",function(){return or}),n.d(_,"squaredDistance",function(){return rr}),n.d(_,"length",function(){return ar}),n.d(_,"squaredLength",function(){return sr}),n.d(_,"negate",function(){return ur}),n.d(_,"inverse",function(){return cr}),n.d(_,"normalize",function(){return hr}),n.d(_,"dot",function(){return pr}),n.d(_,"cross",function(){return _r}),n.d(_,"lerp",function(){return lr}),n.d(_,"random",function(){return dr}),n.d(_,"transformMat2",function(){return fr}),n.d(_,"transformMat2d",function(){return mr}),n.d(_,"transformMat3",function(){return yr}),n.d(_,"transformMat4",function(){return gr}),n.d(_,"rotate",function(){return br}),n.d(_,"angle",function(){return vr}),n.d(_,"str",function(){return wr}),n.d(_,"exactEquals",function(){return kr}),n.d(_,"equals",function(){return xr}),n.d(_,"len",function(){return Sr}),n.d(_,"sub",function(){return Mr}),n.d(_,"mul",function(){return Er}),n.d(_,"div",function(){return Ir}),n.d(_,"dist",function(){return Tr}),n.d(_,"sqrDist",function(){return Ar}),n.d(_,"sqrLen",function(){return Cr}),n.d(_,"forEach",function(){return Pr});var l=1e-6,d="undefined"!=typeof Float32Array?Float32Array:Array,f=Math.random;function m(t){d=t}var y=Math.PI/180;function g(t){return t*y}function b(t,e){return Math.abs(t-e)<=l*Math.max(1,Math.abs(t),Math.abs(e))}function v(){var t=new d(4);return d!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function w(t){var e=new d(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function k(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function x(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function S(t,e,n,i){var o=new d(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=i,o}function M(t,e,n,i,o){return t[0]=e,t[1]=n,t[2]=i,t[3]=o,t}function E(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function I(t,e){var n=e[0],i=e[1],o=e[2],r=e[3],a=n*r-o*i;return a?(a=1/a,t[0]=r*a,t[1]=-i*a,t[2]=-o*a,t[3]=n*a,t):null}function T(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t}function A(t){return t[0]*t[3]-t[2]*t[1]}function C(t,e,n){var i=e[0],o=e[1],r=e[2],a=e[3],s=n[0],u=n[1],c=n[2],h=n[3];return t[0]=i*s+r*u,t[1]=o*s+a*u,t[2]=i*c+r*h,t[3]=o*c+a*h,t}function P(t,e,n){var i=e[0],o=e[1],r=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=i*u+r*s,t[1]=o*u+a*s,t[2]=i*-s+r*u,t[3]=o*-s+a*u,t}function R(t,e,n){var i=e[0],o=e[1],r=e[2],a=e[3],s=n[0],u=n[1];return t[0]=i*s,t[1]=o*s,t[2]=r*u,t[3]=a*u,t}function F(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=-n,t[3]=i,t}function B(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function O(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function U(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))}function D(t,e,n,i){return t[2]=i[2]/i[0],n[0]=i[0],n[1]=i[1],n[3]=i[3]-t[2]*n[1],[t,e,n]}function N(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function L(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function j(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function G(t,e){var n=t[0],i=t[1],o=t[2],r=t[3],a=e[0],s=e[1],u=e[2],c=e[3];return Math.abs(n-a)<=l*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-s)<=l*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(o-u)<=l*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(r-c)<=l*Math.max(1,Math.abs(r),Math.abs(c))}function W(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function H(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t}var Y=C,q=L;function X(){var t=new d(6);return d!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function V(t){var e=new d(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function K(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function z(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function Z(t,e,n,i,o,r){var a=new d(6);return a[0]=t,a[1]=e,a[2]=n,a[3]=i,a[4]=o,a[5]=r,a}function Q(t,e,n,i,o,r,a){return t[0]=e,t[1]=n,t[2]=i,t[3]=o,t[4]=r,t[5]=a,t}function J(t,e){var n=e[0],i=e[1],o=e[2],r=e[3],a=e[4],s=e[5],u=n*r-i*o;return u?(u=1/u,t[0]=r*u,t[1]=-i*u,t[2]=-o*u,t[3]=n*u,t[4]=(o*s-r*a)*u,t[5]=(i*a-n*s)*u,t):null}function $(t){return t[0]*t[3]-t[1]*t[2]}function tt(t,e,n){var i=e[0],o=e[1],r=e[2],a=e[3],s=e[4],u=e[5],c=n[0],h=n[1],p=n[2],_=n[3],l=n[4],d=n[5];return t[0]=i*c+r*h,t[1]=o*c+a*h,t[2]=i*p+r*_,t[3]=o*p+a*_,t[4]=i*l+r*d+s,t[5]=o*l+a*d+u,t}function et(t,e,n){var i=e[0],o=e[1],r=e[2],a=e[3],s=e[4],u=e[5],c=Math.sin(n),h=Math.cos(n);return t[0]=i*h+r*c,t[1]=o*h+a*c,t[2]=i*-c+r*h,t[3]=o*-c+a*h,t[4]=s,t[5]=u,t}function nt(t,e,n){var i=e[0],o=e[1],r=e[2],a=e[3],s=e[4],u=e[5],c=n[0],h=n[1];return t[0]=i*c,t[1]=o*c,t[2]=r*h,t[3]=a*h,t[4]=s,t[5]=u,t}function it(t,e,n){var i=e[0],o=e[1],r=e[2],a=e[3],s=e[4],u=e[5],c=n[0],h=n[1];return t[0]=i,t[1]=o,t[2]=r,t[3]=a,t[4]=i*c+r*h+s,t[5]=o*c+a*h+u,t}function ot(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=-n,t[3]=i,t[4]=0,t[5]=0,t}function rt(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function at(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function st(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function ut(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)}function ct(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t}function ht(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}function pt(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t}function _t(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t[4]=e[4]+n[4]*i,t[5]=e[5]+n[5]*i,t}function lt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function dt(t,e){var n=t[0],i=t[1],o=t[2],r=t[3],a=t[4],s=t[5],u=e[0],c=e[1],h=e[2],p=e[3],_=e[4],d=e[5];return Math.abs(n-u)<=l*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(i-c)<=l*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(o-h)<=l*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(r-p)<=l*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(a-_)<=l*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(s-d)<=l*Math.max(1,Math.abs(s),Math.abs(d))}var ft=tt,mt=ht;function yt(){var t=new d(9);return d!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function gt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function bt(t){var e=new d(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function vt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function wt(t,e,n,i,o,r,a,s,u){var c=new d(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=i,c[4]=o,c[5]=r,c[6]=a,c[7]=s,c[8]=u,c}function kt(t,e,n,i,o,r,a,s,u,c){return t[0]=e,t[1]=n,t[2]=i,t[3]=o,t[4]=r,t[5]=a,t[6]=s,t[7]=u,t[8]=c,t}function xt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function St(t,e){if(t===e){var n=e[1],i=e[2],o=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=i,t[7]=o}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function Mt(t,e){var n=e[0],i=e[1],o=e[2],r=e[3],a=e[4],s=e[5],u=e[6],c=e[7],h=e[8],p=h*a-s*c,_=-h*r+s*u,l=c*r-a*u,d=n*p+i*_+o*l;return d?(d=1/d,t[0]=p*d,t[1]=(-h*i+o*c)*d,t[2]=(s*i-o*a)*d,t[3]=_*d,t[4]=(h*n-o*u)*d,t[5]=(-s*n+o*r)*d,t[6]=l*d,t[7]=(-c*n+i*u)*d,t[8]=(a*n-i*r)*d,t):null}function Et(t,e){var n=e[0],i=e[1],o=e[2],r=e[3],a=e[4],s=e[5],u=e[6],c=e[7],h=e[8];return t[0]=a*h-s*c,t[1]=o*c-i*h,t[2]=i*s-o*a,t[3]=s*u-r*h,t[4]=n*h-o*u,t[5]=o*r-n*s,t[6]=r*c-a*u,t[7]=i*u-n*c,t[8]=n*a-i*r,t}function It(t){var e=t[0],n=t[1],i=t[2],o=t[3],r=t[4],a=t[5],s=t[6],u=t[7],c=t[8];return e*(c*r-a*u)+n*(-c*o+a*s)+i*(u*o-r*s)}function Tt(t,e,n){var i=e[0],o=e[1],r=e[2],a=e[3],s=e[4],u=e[5],c=e[6],h=e[7],p=e[8],_=n[0],l=n[1],d=n[2],f=n[3],m=n[4],y=n[5],g=n[6],b=n[7],v=n[8];return t[0]=_*i+l*a+d*c,t[1]=_*o+l*s+d*h,t[2]=_*r+l*u+d*p,t[3]=f*i+m*a+y*c,t[4]=f*o+m*s+y*h,t[5]=f*r+m*u+y*p,t[6]=g*i+b*a+v*c,t[7]=g*o+b*s+v*h,t[8]=g*r+b*u+v*p,t}function At(t,e,n){var i=e[0],o=e[1],r=e[2],a=e[3],s=e[4],u=e[5],c=e[6],h=e[7],p=e[8],_=n[0],l=n[1];return t[0]=i,t[1]=o,t[2]=r,t[3]=a,t[4]=s,t[5]=u,t[6]=_*i+l*a+c,t[7]=_*o+l*s+h,t[8]=_*r+l*u+p,t}function Ct(t,e,n){var i=e[0],o=e[1],r=e[2],a=e[3],s=e[4],u=e[5],c=e[6],h=e[7],p=e[8],_=Math.sin(n),l=Math.cos(n);return t[0]=l*i+_*a,t[1]=l*o+_*s,t[2]=l*r+_*u,t[3]=l*a-_*i,t[4]=l*s-_*o,t[5]=l*u-_*r,t[6]=c,t[7]=h,t[8]=p,t}function Pt(t,e,n){var i=n[0],o=n[1];return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=o*e[3],t[4]=o*e[4],t[5]=o*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Rt(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function Ft(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=0,t[3]=-n,t[4]=i,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Bt(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Ot(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function Ut(t,e){var n=e[0],i=e[1],o=e[2],r=e[3],a=n+n,s=i+i,u=o+o,c=n*a,h=i*a,p=i*s,_=o*a,l=o*s,d=o*u,f=r*a,m=r*s,y=r*u;return t[0]=1-p-d,t[3]=h-y,t[6]=_+m,t[1]=h+y,t[4]=1-c-d,t[7]=l-f,t[2]=_-m,t[5]=l+f,t[8]=1-c-p,t}function Dt(t,e){var n=e[0],i=e[1],o=e[2],r=e[3],a=e[4],s=e[5],u=e[6],c=e[7],h=e[8],p=e[9],_=e[10],l=e[11],d=e[12],f=e[13],m=e[14],y=e[15],g=n*s-i*a,b=n*u-o*a,v=n*c-r*a,w=i*u-o*s,k=i*c-r*s,x=o*c-r*u,S=h*f-p*d,M=h*m-_*d,E=h*y-l*d,I=p*m-_*f,T=p*y-l*f,A=_*y-l*m,C=g*A-b*T+v*I+w*E-k*M+x*S;return C?(C=1/C,t[0]=(s*A-u*T+c*I)*C,t[1]=(u*E-a*A-c*M)*C,t[2]=(a*T-s*E+c*S)*C,t[3]=(o*T-i*A-r*I)*C,t[4]=(n*A-o*E+r*M)*C,t[5]=(i*E-n*T-r*S)*C,t[6]=(f*x-m*k+y*w)*C,t[7]=(m*v-d*x-y*b)*C,t[8]=(d*k-f*v+y*g)*C,t):null}function Nt(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Lt(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function jt(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))}function Gt(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function Wt(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function Ht(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function Yt(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t[4]=e[4]+n[4]*i,t[5]=e[5]+n[5]*i,t[6]=e[6]+n[6]*i,t[7]=e[7]+n[7]*i,t[8]=e[8]+n[8]*i,t}function qt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function Xt(t,e){var n=t[0],i=t[1],o=t[2],r=t[3],a=t[4],s=t[5],u=t[6],c=t[7],h=t[8],p=e[0],_=e[1],d=e[2],f=e[3],m=e[4],y=e[5],g=e[6],b=e[7],v=e[8];return Math.abs(n-p)<=l*Math.max(1,Math.abs(n),Math.abs(p))&&Math.abs(i-_)<=l*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(o-d)<=l*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(r-f)<=l*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(a-m)<=l*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(s-y)<=l*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(u-g)<=l*Math.max(1,Math.abs(u),Math.abs(g))&&Math.abs(c-b)<=l*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(h-v)<=l*Math.max(1,Math.abs(h),Math.abs(v))}var Vt=Tt,Kt=Wt;function zt(){var t=new d(16);return d!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Zt(t){var e=new d(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Qt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Jt(t,e,n,i,o,r,a,s,u,c,h,p,_,l,f,m){var y=new d(16);return y[0]=t,y[1]=e,y[2]=n,y[3]=i,y[4]=o,y[5]=r,y[6]=a,y[7]=s,y[8]=u,y[9]=c,y[10]=h,y[11]=p,y[12]=_,y[13]=l,y[14]=f,y[15]=m,y}function $t(t,e,n,i,o,r,a,s,u,c,h,p,_,l,d,f,m){return t[0]=e,t[1]=n,t[2]=i,t[3]=o,t[4]=r,t[5]=a,t[6]=s,t[7]=u,t[8]=c,t[9]=h,t[10]=p,t[11]=_,t[12]=l,t[13]=d,t[14]=f,t[15]=m,t}function te(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ee(t,e){if(t===e){var n=e[1],i=e[2],o=e[3],r=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=r,t[11]=e[14],t[12]=o,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function ne(t,e){var n=e[0],i=e[1],o=e[2],r=e[3],a=e[4],s=e[5],u=e[6],c=e[7],h=e[8],p=e[9],_=e[10],l=e[11],d=e[12],f=e[13],m=e[14],y=e[15],g=n*s-i*a,b=n*u-o*a,v=n*c-r*a,w=i*u-o*s,k=i*c-r*s,x=o*c-r*u,S=h*f-p*d,M=h*m-_*d,E=h*y-l*d,I=p*m-_*f,T=p*y-l*f,A=_*y-l*m,C=g*A-b*T+v*I+w*E-k*M+x*S;return C?(C=1/C,t[0]=(s*A-u*T+c*I)*C,t[1]=(o*T-i*A-r*I)*C,t[2]=(f*x-m*k+y*w)*C,t[3]=(_*k-p*x-l*w)*C,t[4]=(u*E-a*A-c*M)*C,t[5]=(n*A-o*E+r*M)*C,t[6]=(m*v-d*x-y*b)*C,t[7]=(h*x-_*v+l*b)*C,t[8]=(a*T-s*E+c*S)*C,t[9]=(i*E-n*T-r*S)*C,t[10]=(d*k-f*v+y*g)*C,t[11]=(p*v-h*k-l*g)*C,t[12]=(s*M-a*I-u*S)*C,t[13]=(n*I-i*M+o*S)*C,t[14]=(f*b-d*w-m*g)*C,t[15]=(h*w-p*b+_*g)*C,t):null}function ie(t,e){var n=e[0],i=e[1],o=e[2],r=e[3],a=e[4],s=e[5],u=e[6],c=e[7],h=e[8],p=e[9],_=e[10],l=e[11],d=e[12],f=e[13],m=e[14],y=e[15];return t[0]=s*(_*y-l*m)-p*(u*y-c*m)+f*(u*l-c*_),t[1]=-(i*(_*y-l*m)-p*(o*y-r*m)+f*(o*l-r*_)),t[2]=i*(u*y-c*m)-s*(o*y-r*m)+f*(o*c-r*u),t[3]=-(i*(u*l-c*_)-s*(o*l-r*_)+p*(o*c-r*u)),t[4]=-(a*(_*y-l*m)-h*(u*y-c*m)+d*(u*l-c*_)),t[5]=n*(_*y-l*m)-h*(o*y-r*m)+d*(o*l-r*_),t[6]=-(n*(u*y-c*m)-a*(o*y-r*m)+d*(o*c-r*u)),t[7]=n*(u*l-c*_)-a*(o*l-r*_)+h*(o*c-r*u),t[8]=a*(p*y-l*f)-h*(s*y-c*f)+d*(s*l-c*p),t[9]=-(n*(p*y-l*f)-h*(i*y-r*f)+d*(i*l-r*p)),t[10]=n*(s*y-c*f)-a*(i*y-r*f)+d*(i*c-r*s),t[11]=-(n*(s*l-c*p)-a*(i*l-r*p)+h*(i*c-r*s)),t[12]=-(a*(p*m-_*f)-h*(s*m-u*f)+d*(s*_-u*p)),t[13]=n*(p*m-_*f)-h*(i*m-o*f)+d*(i*_-o*p),t[14]=-(n*(s*m-u*f)-a*(i*m-o*f)+d*(i*u-o*s)),t[15]=n*(s*_-u*p)-a*(i*_-o*p)+h*(i*u-o*s),t}function oe(t){var e=t[0],n=t[1],i=t[2],o=t[3],r=t[4],a=t[5],s=t[6],u=t[7],c=t[8],h=t[9],p=t[10],_=t[11],l=t[12],d=t[13],f=t[14],m=t[15];return(e*a-n*r)*(p*m-_*f)-(e*s-i*r)*(h*m-_*d)+(e*u-o*r)*(h*f-p*d)+(n*s-i*a)*(c*m-_*l)-(n*u-o*a)*(c*f-p*l)+(i*u-o*s)*(c*d-h*l)}function re(t,e,n){var i=e[0],o=e[1],r=e[2],a=e[3],s=e[4],u=e[5],c=e[6],h=e[7],p=e[8],_=e[9],l=e[10],d=e[11],f=e[12],m=e[13],y=e[14],g=e[15],b=n[0],v=n[1],w=n[2],k=n[3];return t[0]=b*i+v*s+w*p+k*f,t[1]=b*o+v*u+w*_+k*m,t[2]=b*r+v*c+w*l+k*y,t[3]=b*a+v*h+w*d+k*g,b=n[4],v=n[5],w=n[6],k=n[7],t[4]=b*i+v*s+w*p+k*f,t[5]=b*o+v*u+w*_+k*m,t[6]=b*r+v*c+w*l+k*y,t[7]=b*a+v*h+w*d+k*g,b=n[8],v=n[9],w=n[10],k=n[11],t[8]=b*i+v*s+w*p+k*f,t[9]=b*o+v*u+w*_+k*m,t[10]=b*r+v*c+w*l+k*y,t[11]=b*a+v*h+w*d+k*g,b=n[12],v=n[13],w=n[14],k=n[15],t[12]=b*i+v*s+w*p+k*f,t[13]=b*o+v*u+w*_+k*m,t[14]=b*r+v*c+w*l+k*y,t[15]=b*a+v*h+w*d+k*g,t}function ae(t,e,n){var i=n[0],o=n[1],r=n[2],a=void 0,s=void 0,u=void 0,c=void 0,h=void 0,p=void 0,_=void 0,l=void 0,d=void 0,f=void 0,m=void 0,y=void 0;return e===t?(t[12]=e[0]*i+e[4]*o+e[8]*r+e[12],t[13]=e[1]*i+e[5]*o+e[9]*r+e[13],t[14]=e[2]*i+e[6]*o+e[10]*r+e[14],t[15]=e[3]*i+e[7]*o+e[11]*r+e[15]):(a=e[0],s=e[1],u=e[2],c=e[3],h=e[4],p=e[5],_=e[6],l=e[7],d=e[8],f=e[9],m=e[10],y=e[11],t[0]=a,t[1]=s,t[2]=u,t[3]=c,t[4]=h,t[5]=p,t[6]=_,t[7]=l,t[8]=d,t[9]=f,t[10]=m,t[11]=y,t[12]=a*i+h*o+d*r+e[12],t[13]=s*i+p*o+f*r+e[13],t[14]=u*i+_*o+m*r+e[14],t[15]=c*i+l*o+y*r+e[15]),t}function se(t,e,n){var i=n[0],o=n[1],r=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*o,t[5]=e[5]*o,t[6]=e[6]*o,t[7]=e[7]*o,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ue(t,e,n,i){var o,r,a,s,u,c,h,p,_,d,f,m,y,g,b,v,w,k,x,S,M,E,I,T,A=i[0],C=i[1],P=i[2],R=Math.sqrt(A*A+C*C+P*P);return R<l?null:(A*=R=1/R,C*=R,P*=R,o=Math.sin(n),a=1-(r=Math.cos(n)),s=e[0],u=e[1],c=e[2],h=e[3],p=e[4],_=e[5],d=e[6],f=e[7],m=e[8],y=e[9],g=e[10],b=e[11],v=A*A*a+r,w=C*A*a+P*o,k=P*A*a-C*o,x=A*C*a-P*o,S=C*C*a+r,M=P*C*a+A*o,E=A*P*a+C*o,I=C*P*a-A*o,T=P*P*a+r,t[0]=s*v+p*w+m*k,t[1]=u*v+_*w+y*k,t[2]=c*v+d*w+g*k,t[3]=h*v+f*w+b*k,t[4]=s*x+p*S+m*M,t[5]=u*x+_*S+y*M,t[6]=c*x+d*S+g*M,t[7]=h*x+f*S+b*M,t[8]=s*E+p*I+m*T,t[9]=u*E+_*I+y*T,t[10]=c*E+d*I+g*T,t[11]=h*E+f*I+b*T,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function ce(t,e,n){var i=Math.sin(n),o=Math.cos(n),r=e[4],a=e[5],s=e[6],u=e[7],c=e[8],h=e[9],p=e[10],_=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=r*o+c*i,t[5]=a*o+h*i,t[6]=s*o+p*i,t[7]=u*o+_*i,t[8]=c*o-r*i,t[9]=h*o-a*i,t[10]=p*o-s*i,t[11]=_*o-u*i,t}function he(t,e,n){var i=Math.sin(n),o=Math.cos(n),r=e[0],a=e[1],s=e[2],u=e[3],c=e[8],h=e[9],p=e[10],_=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=r*o-c*i,t[1]=a*o-h*i,t[2]=s*o-p*i,t[3]=u*o-_*i,t[8]=r*i+c*o,t[9]=a*i+h*o,t[10]=s*i+p*o,t[11]=u*i+_*o,t}function pe(t,e,n){var i=Math.sin(n),o=Math.cos(n),r=e[0],a=e[1],s=e[2],u=e[3],c=e[4],h=e[5],p=e[6],_=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=r*o+c*i,t[1]=a*o+h*i,t[2]=s*o+p*i,t[3]=u*o+_*i,t[4]=c*o-r*i,t[5]=h*o-a*i,t[6]=p*o-s*i,t[7]=_*o-u*i,t}function _e(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function le(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function de(t,e,n){var i,o,r,a=n[0],s=n[1],u=n[2],c=Math.sqrt(a*a+s*s+u*u);return c<l?null:(a*=c=1/c,s*=c,u*=c,i=Math.sin(e),r=1-(o=Math.cos(e)),t[0]=a*a*r+o,t[1]=s*a*r+u*i,t[2]=u*a*r-s*i,t[3]=0,t[4]=a*s*r-u*i,t[5]=s*s*r+o,t[6]=u*s*r+a*i,t[7]=0,t[8]=a*u*r+s*i,t[9]=s*u*r-a*i,t[10]=u*u*r+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function fe(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function me(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ye(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ge(t,e,n){var i=e[0],o=e[1],r=e[2],a=e[3],s=i+i,u=o+o,c=r+r,h=i*s,p=i*u,_=i*c,l=o*u,d=o*c,f=r*c,m=a*s,y=a*u,g=a*c;return t[0]=1-(l+f),t[1]=p+g,t[2]=_-y,t[3]=0,t[4]=p-g,t[5]=1-(h+f),t[6]=d+m,t[7]=0,t[8]=_+y,t[9]=d-m,t[10]=1-(h+l),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function be(t,e){var n=new d(3),i=-e[0],o=-e[1],r=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],h=e[7],p=i*i+o*o+r*r+a*a;return p>0?(n[0]=2*(s*a+h*i+u*r-c*o)/p,n[1]=2*(u*a+h*o+c*i-s*r)/p,n[2]=2*(c*a+h*r+s*o-u*i)/p):(n[0]=2*(s*a+h*i+u*r-c*o),n[1]=2*(u*a+h*o+c*i-s*r),n[2]=2*(c*a+h*r+s*o-u*i)),ge(t,e,n),t}function ve(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function we(t,e){var n=e[0],i=e[1],o=e[2],r=e[4],a=e[5],s=e[6],u=e[8],c=e[9],h=e[10];return t[0]=Math.sqrt(n*n+i*i+o*o),t[1]=Math.sqrt(r*r+a*a+s*s),t[2]=Math.sqrt(u*u+c*c+h*h),t}function ke(t,e){var n=e[0]+e[5]+e[10],i=0;return n>0?(i=2*Math.sqrt(n+1),t[3]=.25*i,t[0]=(e[6]-e[9])/i,t[1]=(e[8]-e[2])/i,t[2]=(e[1]-e[4])/i):e[0]>e[5]&&e[0]>e[10]?(i=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/i,t[0]=.25*i,t[1]=(e[1]+e[4])/i,t[2]=(e[8]+e[2])/i):e[5]>e[10]?(i=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/i,t[0]=(e[1]+e[4])/i,t[1]=.25*i,t[2]=(e[6]+e[9])/i):(i=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/i,t[0]=(e[8]+e[2])/i,t[1]=(e[6]+e[9])/i,t[2]=.25*i),t}function xe(t,e,n,i){var o=e[0],r=e[1],a=e[2],s=e[3],u=o+o,c=r+r,h=a+a,p=o*u,_=o*c,l=o*h,d=r*c,f=r*h,m=a*h,y=s*u,g=s*c,b=s*h,v=i[0],w=i[1],k=i[2];return t[0]=(1-(d+m))*v,t[1]=(_+b)*v,t[2]=(l-g)*v,t[3]=0,t[4]=(_-b)*w,t[5]=(1-(p+m))*w,t[6]=(f+y)*w,t[7]=0,t[8]=(l+g)*k,t[9]=(f-y)*k,t[10]=(1-(p+d))*k,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function Se(t,e,n,i,o){var r=e[0],a=e[1],s=e[2],u=e[3],c=r+r,h=a+a,p=s+s,_=r*c,l=r*h,d=r*p,f=a*h,m=a*p,y=s*p,g=u*c,b=u*h,v=u*p,w=i[0],k=i[1],x=i[2],S=o[0],M=o[1],E=o[2],I=(1-(f+y))*w,T=(l+v)*w,A=(d-b)*w,C=(l-v)*k,P=(1-(_+y))*k,R=(m+g)*k,F=(d+b)*x,B=(m-g)*x,O=(1-(_+f))*x;return t[0]=I,t[1]=T,t[2]=A,t[3]=0,t[4]=C,t[5]=P,t[6]=R,t[7]=0,t[8]=F,t[9]=B,t[10]=O,t[11]=0,t[12]=n[0]+S-(I*S+C*M+F*E),t[13]=n[1]+M-(T*S+P*M+B*E),t[14]=n[2]+E-(A*S+R*M+O*E),t[15]=1,t}function Me(t,e){var n=e[0],i=e[1],o=e[2],r=e[3],a=n+n,s=i+i,u=o+o,c=n*a,h=i*a,p=i*s,_=o*a,l=o*s,d=o*u,f=r*a,m=r*s,y=r*u;return t[0]=1-p-d,t[1]=h+y,t[2]=_-m,t[3]=0,t[4]=h-y,t[5]=1-c-d,t[6]=l+f,t[7]=0,t[8]=_+m,t[9]=l-f,t[10]=1-c-p,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Ee(t,e,n,i,o,r,a){var s=1/(n-e),u=1/(o-i),c=1/(r-a);return t[0]=2*r*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*r*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(o+i)*u,t[10]=(a+r)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*r*2*c,t[15]=0,t}function Ie(t,e,n,i,o){var r=1/Math.tan(e/2),a=void 0;return t[0]=r/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(a=1/(i-o),t[10]=(o+i)*a,t[14]=2*o*i*a):(t[10]=-1,t[14]=-2*i),t}function Te(t,e,n,i){var o=Math.tan(e.upDegrees*Math.PI/180),r=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(a+s),c=2/(o+r);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(a-s)*u*.5,t[9]=(o-r)*c*.5,t[10]=i/(n-i),t[11]=-1,t[12]=0,t[13]=0,t[14]=i*n/(n-i),t[15]=0,t}function Ae(t,e,n,i,o,r,a){var s=1/(e-n),u=1/(i-o),c=1/(r-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(o+i)*u,t[14]=(a+r)*c,t[15]=1,t}function Ce(t,e,n,i){var o=void 0,r=void 0,a=void 0,s=void 0,u=void 0,c=void 0,h=void 0,p=void 0,_=void 0,d=void 0,f=e[0],m=e[1],y=e[2],g=i[0],b=i[1],v=i[2],w=n[0],k=n[1],x=n[2];return Math.abs(f-w)<l&&Math.abs(m-k)<l&&Math.abs(y-x)<l?te(t):(h=f-w,p=m-k,_=y-x,o=b*(_*=d=1/Math.sqrt(h*h+p*p+_*_))-v*(p*=d),r=v*(h*=d)-g*_,a=g*p-b*h,(d=Math.sqrt(o*o+r*r+a*a))?(o*=d=1/d,r*=d,a*=d):(o=0,r=0,a=0),s=p*a-_*r,u=_*o-h*a,c=h*r-p*o,(d=Math.sqrt(s*s+u*u+c*c))?(s*=d=1/d,u*=d,c*=d):(s=0,u=0,c=0),t[0]=o,t[1]=s,t[2]=h,t[3]=0,t[4]=r,t[5]=u,t[6]=p,t[7]=0,t[8]=a,t[9]=c,t[10]=_,t[11]=0,t[12]=-(o*f+r*m+a*y),t[13]=-(s*f+u*m+c*y),t[14]=-(h*f+p*m+_*y),t[15]=1,t)}function Pe(t,e,n,i){var o=e[0],r=e[1],a=e[2],s=i[0],u=i[1],c=i[2],h=o-n[0],p=r-n[1],_=a-n[2],l=h*h+p*p+_*_;l>0&&(h*=l=1/Math.sqrt(l),p*=l,_*=l);var d=u*_-c*p,f=c*h-s*_,m=s*p-u*h;return(l=d*d+f*f+m*m)>0&&(d*=l=1/Math.sqrt(l),f*=l,m*=l),t[0]=d,t[1]=f,t[2]=m,t[3]=0,t[4]=p*m-_*f,t[5]=_*d-h*m,t[6]=h*f-p*d,t[7]=0,t[8]=h,t[9]=p,t[10]=_,t[11]=0,t[12]=o,t[13]=r,t[14]=a,t[15]=1,t}function Re(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Fe(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))}function Be(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function Oe(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function Ue(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function De(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t[4]=e[4]+n[4]*i,t[5]=e[5]+n[5]*i,t[6]=e[6]+n[6]*i,t[7]=e[7]+n[7]*i,t[8]=e[8]+n[8]*i,t[9]=e[9]+n[9]*i,t[10]=e[10]+n[10]*i,t[11]=e[11]+n[11]*i,t[12]=e[12]+n[12]*i,t[13]=e[13]+n[13]*i,t[14]=e[14]+n[14]*i,t[15]=e[15]+n[15]*i,t}function Ne(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Le(t,e){var n=t[0],i=t[1],o=t[2],r=t[3],a=t[4],s=t[5],u=t[6],c=t[7],h=t[8],p=t[9],_=t[10],d=t[11],f=t[12],m=t[13],y=t[14],g=t[15],b=e[0],v=e[1],w=e[2],k=e[3],x=e[4],S=e[5],M=e[6],E=e[7],I=e[8],T=e[9],A=e[10],C=e[11],P=e[12],R=e[13],F=e[14],B=e[15];return Math.abs(n-b)<=l*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(i-v)<=l*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(o-w)<=l*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(r-k)<=l*Math.max(1,Math.abs(r),Math.abs(k))&&Math.abs(a-x)<=l*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(s-S)<=l*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(u-M)<=l*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(c-E)<=l*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(h-I)<=l*Math.max(1,Math.abs(h),Math.abs(I))&&Math.abs(p-T)<=l*Math.max(1,Math.abs(p),Math.abs(T))&&Math.abs(_-A)<=l*Math.max(1,Math.abs(_),Math.abs(A))&&Math.abs(d-C)<=l*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(f-P)<=l*Math.max(1,Math.abs(f),Math.abs(P))&&Math.abs(m-R)<=l*Math.max(1,Math.abs(m),Math.abs(R))&&Math.abs(y-F)<=l*Math.max(1,Math.abs(y),Math.abs(F))&&Math.abs(g-B)<=l*Math.max(1,Math.abs(g),Math.abs(B))}var je=re,Ge=Oe;function We(){var t=new d(3);return d!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function He(t){var e=new d(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Ye(t){var e=t[0],n=t[1],i=t[2];return Math.sqrt(e*e+n*n+i*i)}function qe(t,e,n){var i=new d(3);return i[0]=t,i[1]=e,i[2]=n,i}function Xe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Ve(t,e,n,i){return t[0]=e,t[1]=n,t[2]=i,t}function Ke(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function ze(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function Ze(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function Qe(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function Je(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function $e(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function tn(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function en(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function nn(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function on(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function rn(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t}function an(t,e){var n=e[0]-t[0],i=e[1]-t[1],o=e[2]-t[2];return Math.sqrt(n*n+i*i+o*o)}function sn(t,e){var n=e[0]-t[0],i=e[1]-t[1],o=e[2]-t[2];return n*n+i*i+o*o}function un(t){var e=t[0],n=t[1],i=t[2];return e*e+n*n+i*i}function cn(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function hn(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function pn(t,e){var n=e[0],i=e[1],o=e[2],r=n*n+i*i+o*o;return r>0&&(r=1/Math.sqrt(r),t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r),t}function _n(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function ln(t,e,n){var i=e[0],o=e[1],r=e[2],a=n[0],s=n[1],u=n[2];return t[0]=o*u-r*s,t[1]=r*a-i*u,t[2]=i*s-o*a,t}function dn(t,e,n,i){var o=e[0],r=e[1],a=e[2];return t[0]=o+i*(n[0]-o),t[1]=r+i*(n[1]-r),t[2]=a+i*(n[2]-a),t}function fn(t,e,n,i,o,r){var a=r*r,s=a*(2*r-3)+1,u=a*(r-2)+r,c=a*(r-1),h=a*(3-2*r);return t[0]=e[0]*s+n[0]*u+i[0]*c+o[0]*h,t[1]=e[1]*s+n[1]*u+i[1]*c+o[1]*h,t[2]=e[2]*s+n[2]*u+i[2]*c+o[2]*h,t}function mn(t,e,n,i,o,r){var a=1-r,s=a*a,u=r*r,c=s*a,h=3*r*s,p=3*u*a,_=u*r;return t[0]=e[0]*c+n[0]*h+i[0]*p+o[0]*_,t[1]=e[1]*c+n[1]*h+i[1]*p+o[1]*_,t[2]=e[2]*c+n[2]*h+i[2]*p+o[2]*_,t}function yn(t,e){e=e||1;var n=2*f()*Math.PI,i=2*f()-1,o=Math.sqrt(1-i*i)*e;return t[0]=Math.cos(n)*o,t[1]=Math.sin(n)*o,t[2]=i*e,t}function gn(t,e,n){var i=e[0],o=e[1],r=e[2],a=n[3]*i+n[7]*o+n[11]*r+n[15];return a=a||1,t[0]=(n[0]*i+n[4]*o+n[8]*r+n[12])/a,t[1]=(n[1]*i+n[5]*o+n[9]*r+n[13])/a,t[2]=(n[2]*i+n[6]*o+n[10]*r+n[14])/a,t}function bn(t,e,n){var i=e[0],o=e[1],r=e[2];return t[0]=i*n[0]+o*n[3]+r*n[6],t[1]=i*n[1]+o*n[4]+r*n[7],t[2]=i*n[2]+o*n[5]+r*n[8],t}function vn(t,e,n){var i=n[0],o=n[1],r=n[2],a=n[3],s=e[0],u=e[1],c=e[2],h=o*c-r*u,p=r*s-i*c,_=i*u-o*s,l=o*_-r*p,d=r*h-i*_,f=i*p-o*h,m=2*a;return h*=m,p*=m,_*=m,l*=2,d*=2,f*=2,t[0]=s+h+l,t[1]=u+p+d,t[2]=c+_+f,t}function wn(t,e,n,i){var o=[],r=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],r[0]=o[0],r[1]=o[1]*Math.cos(i)-o[2]*Math.sin(i),r[2]=o[1]*Math.sin(i)+o[2]*Math.cos(i),t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t}function kn(t,e,n,i){var o=[],r=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],r[0]=o[2]*Math.sin(i)+o[0]*Math.cos(i),r[1]=o[1],r[2]=o[2]*Math.cos(i)-o[0]*Math.sin(i),t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t}function xn(t,e,n,i){var o=[],r=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],r[0]=o[0]*Math.cos(i)-o[1]*Math.sin(i),r[1]=o[0]*Math.sin(i)+o[1]*Math.cos(i),r[2]=o[2],t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t}function Sn(t,e){var n=qe(t[0],t[1],t[2]),i=qe(e[0],e[1],e[2]);pn(n,n),pn(i,i);var o=_n(n,i);return o>1?0:o<-1?Math.PI:Math.acos(o)}function Mn(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function En(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function In(t,e){var n=t[0],i=t[1],o=t[2],r=e[0],a=e[1],s=e[2];return Math.abs(n-r)<=l*Math.max(1,Math.abs(n),Math.abs(r))&&Math.abs(i-a)<=l*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(o-s)<=l*Math.max(1,Math.abs(o),Math.abs(s))}var Tn=ze,An=Ze,Cn=Qe,Pn=an,Rn=sn,Fn=Ye,Bn=un,On=function(){var t=We();return function(e,n,i,o,r,a){var s=void 0,u=void 0;for(n||(n=3),i||(i=0),u=o?Math.min(o*n+i,e.length):e.length,s=i;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],r(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}}();function Un(){var t=new d(4);return d!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Dn(t){var e=new d(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Nn(t,e,n,i){var o=new d(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=i,o}function Ln(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function jn(t,e,n,i,o){return t[0]=e,t[1]=n,t[2]=i,t[3]=o,t}function Gn(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function Wn(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function Hn(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function Yn(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function qn(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function Xn(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function Vn(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}function Kn(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}function zn(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function Zn(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function Qn(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t}function Jn(t,e){var n=e[0]-t[0],i=e[1]-t[1],o=e[2]-t[2],r=e[3]-t[3];return Math.sqrt(n*n+i*i+o*o+r*r)}function $n(t,e){var n=e[0]-t[0],i=e[1]-t[1],o=e[2]-t[2],r=e[3]-t[3];return n*n+i*i+o*o+r*r}function ti(t){var e=t[0],n=t[1],i=t[2],o=t[3];return Math.sqrt(e*e+n*n+i*i+o*o)}function ei(t){var e=t[0],n=t[1],i=t[2],o=t[3];return e*e+n*n+i*i+o*o}function ni(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function ii(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function oi(t,e){var n=e[0],i=e[1],o=e[2],r=e[3],a=n*n+i*i+o*o+r*r;return a>0&&(a=1/Math.sqrt(a),t[0]=n*a,t[1]=i*a,t[2]=o*a,t[3]=r*a),t}function ri(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function ai(t,e,n,i){var o=e[0],r=e[1],a=e[2],s=e[3];return t[0]=o+i*(n[0]-o),t[1]=r+i*(n[1]-r),t[2]=a+i*(n[2]-a),t[3]=s+i*(n[3]-s),t}function si(t,e){var n,i,o,r,a,s;e=e||1;do{a=(n=2*f()-1)*n+(i=2*f()-1)*i}while(a>=1);do{s=(o=2*f()-1)*o+(r=2*f()-1)*r}while(s>=1);var u=Math.sqrt((1-a)/s);return t[0]=e*n,t[1]=e*i,t[2]=e*o*u,t[3]=e*r*u,t}function ui(t,e,n){var i=e[0],o=e[1],r=e[2],a=e[3];return t[0]=n[0]*i+n[4]*o+n[8]*r+n[12]*a,t[1]=n[1]*i+n[5]*o+n[9]*r+n[13]*a,t[2]=n[2]*i+n[6]*o+n[10]*r+n[14]*a,t[3]=n[3]*i+n[7]*o+n[11]*r+n[15]*a,t}function ci(t,e,n){var i=e[0],o=e[1],r=e[2],a=n[0],s=n[1],u=n[2],c=n[3],h=c*i+s*r-u*o,p=c*o+u*i-a*r,_=c*r+a*o-s*i,l=-a*i-s*o-u*r;return t[0]=h*c+l*-a+p*-u-_*-s,t[1]=p*c+l*-s+_*-a-h*-u,t[2]=_*c+l*-u+h*-s-p*-a,t[3]=e[3],t}function hi(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function pi(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function _i(t,e){var n=t[0],i=t[1],o=t[2],r=t[3],a=e[0],s=e[1],u=e[2],c=e[3];return Math.abs(n-a)<=l*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-s)<=l*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(o-u)<=l*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(r-c)<=l*Math.max(1,Math.abs(r),Math.abs(c))}var li=Wn,di=Hn,fi=Yn,mi=Jn,yi=$n,gi=ti,bi=ei,vi=function(){var t=Un();return function(e,n,i,o,r,a){var s=void 0,u=void 0;for(n||(n=4),i||(i=0),u=o?Math.min(o*n+i,e.length):e.length,s=i;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],r(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}();function wi(){var t=new d(4);return d!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function ki(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function xi(t,e,n){n*=.5;var i=Math.sin(n);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(n),t}function Si(t,e){var n=2*Math.acos(e[3]),i=Math.sin(n/2);return i>l?(t[0]=e[0]/i,t[1]=e[1]/i,t[2]=e[2]/i):(t[0]=1,t[1]=0,t[2]=0),n}function Mi(t,e,n){var i=e[0],o=e[1],r=e[2],a=e[3],s=n[0],u=n[1],c=n[2],h=n[3];return t[0]=i*h+a*s+o*c-r*u,t[1]=o*h+a*u+r*s-i*c,t[2]=r*h+a*c+i*u-o*s,t[3]=a*h-i*s-o*u-r*c,t}function Ei(t,e,n){n*=.5;var i=e[0],o=e[1],r=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=i*u+a*s,t[1]=o*u+r*s,t[2]=r*u-o*s,t[3]=a*u-i*s,t}function Ii(t,e,n){n*=.5;var i=e[0],o=e[1],r=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=i*u-r*s,t[1]=o*u+a*s,t[2]=r*u+i*s,t[3]=a*u-o*s,t}function Ti(t,e,n){n*=.5;var i=e[0],o=e[1],r=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=i*u+o*s,t[1]=o*u-i*s,t[2]=r*u+a*s,t[3]=a*u-r*s,t}function Ai(t,e){var n=e[0],i=e[1],o=e[2];return t[0]=n,t[1]=i,t[2]=o,t[3]=Math.sqrt(Math.abs(1-n*n-i*i-o*o)),t}function Ci(t,e,n,i){var o=e[0],r=e[1],a=e[2],s=e[3],u=n[0],c=n[1],h=n[2],p=n[3],_=void 0,d=void 0,f=void 0,m=void 0,y=void 0;return(d=o*u+r*c+a*h+s*p)<0&&(d=-d,u=-u,c=-c,h=-h,p=-p),1-d>l?(_=Math.acos(d),f=Math.sin(_),m=Math.sin((1-i)*_)/f,y=Math.sin(i*_)/f):(m=1-i,y=i),t[0]=m*o+y*u,t[1]=m*r+y*c,t[2]=m*a+y*h,t[3]=m*s+y*p,t}function Pi(t){var e=f(),n=f(),i=f(),o=Math.sqrt(1-e),r=Math.sqrt(e);return t[0]=o*Math.sin(2*Math.PI*n),t[1]=o*Math.cos(2*Math.PI*n),t[2]=r*Math.sin(2*Math.PI*i),t[3]=r*Math.cos(2*Math.PI*i),t}function Ri(t,e){var n=e[0],i=e[1],o=e[2],r=e[3],a=n*n+i*i+o*o+r*r,s=a?1/a:0;return t[0]=-n*s,t[1]=-i*s,t[2]=-o*s,t[3]=r*s,t}function Fi(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function Bi(t,e){var n=e[0]+e[4]+e[8],i=void 0;if(n>0)i=Math.sqrt(n+1),t[3]=.5*i,i=.5/i,t[0]=(e[5]-e[7])*i,t[1]=(e[6]-e[2])*i,t[2]=(e[1]-e[3])*i;else{var o=0;e[4]>e[0]&&(o=1),e[8]>e[3*o+o]&&(o=2);var r=(o+1)%3,a=(o+2)%3;i=Math.sqrt(e[3*o+o]-e[3*r+r]-e[3*a+a]+1),t[o]=.5*i,i=.5/i,t[3]=(e[3*r+a]-e[3*a+r])*i,t[r]=(e[3*r+o]+e[3*o+r])*i,t[a]=(e[3*a+o]+e[3*o+a])*i}return t}function Oi(t,e,n,i){var o=.5*Math.PI/180;e*=o,n*=o,i*=o;var r=Math.sin(e),a=Math.cos(e),s=Math.sin(n),u=Math.cos(n),c=Math.sin(i),h=Math.cos(i);return t[0]=r*u*h-a*s*c,t[1]=a*s*h+r*u*c,t[2]=a*u*c-r*s*h,t[3]=a*u*h+r*s*c,t}function Ui(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var Di=Dn,Ni=Nn,Li=Ln,ji=jn,Gi=Gn,Wi=Mi,Hi=Zn,Yi=ri,qi=ai,Xi=ti,Vi=Xi,Ki=ei,zi=Ki,Zi=oi,Qi=pi,Ji=_i,$i=function(){var t=We(),e=qe(1,0,0),n=qe(0,1,0);return function(i,o,r){var a=_n(o,r);return a<-.999999?(ln(t,e,o),Fn(t)<1e-6&&ln(t,n,o),pn(t,t),xi(i,t,Math.PI),i):a>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(ln(t,o,r),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=1+a,Zi(i,i))}}(),to=function(){var t=wi(),e=wi();return function(n,i,o,r,a,s){return Ci(t,i,a,s),Ci(e,o,r,s),Ci(n,t,e,2*s*(1-s)),n}}(),eo=function(){var t=yt();return function(e,n,i,o){return t[0]=i[0],t[3]=i[1],t[6]=i[2],t[1]=o[0],t[4]=o[1],t[7]=o[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],Zi(e,Bi(e,t))}}();function no(){var t=new d(8);return d!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function io(t){var e=new d(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function oo(t,e,n,i,o,r,a,s){var u=new d(8);return u[0]=t,u[1]=e,u[2]=n,u[3]=i,u[4]=o,u[5]=r,u[6]=a,u[7]=s,u}function ro(t,e,n,i,o,r,a){var s=new d(8);s[0]=t,s[1]=e,s[2]=n,s[3]=i;var u=.5*o,c=.5*r,h=.5*a;return s[4]=u*i+c*n-h*e,s[5]=c*i+h*t-u*n,s[6]=h*i+u*e-c*t,s[7]=-u*t-c*e-h*n,s}function ao(t,e,n){var i=.5*n[0],o=.5*n[1],r=.5*n[2],a=e[0],s=e[1],u=e[2],c=e[3];return t[0]=a,t[1]=s,t[2]=u,t[3]=c,t[4]=i*c+o*u-r*s,t[5]=o*c+r*a-i*u,t[6]=r*c+i*s-o*a,t[7]=-i*a-o*s-r*u,t}function so(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t}function uo(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function co(t,e){var n=wi();ke(n,e);var i=new d(3);return ve(i,e),ao(t,n,i),t}function ho(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function po(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function _o(t,e,n,i,o,r,a,s,u){return t[0]=e,t[1]=n,t[2]=i,t[3]=o,t[4]=r,t[5]=a,t[6]=s,t[7]=u,t}var lo=Li;function fo(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}var mo=Li;function yo(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function go(t,e){var n=e[4],i=e[5],o=e[6],r=e[7],a=-e[0],s=-e[1],u=-e[2],c=e[3];return t[0]=2*(n*c+r*a+i*u-o*s),t[1]=2*(i*c+r*s+o*a-n*u),t[2]=2*(o*c+r*u+n*s-i*a),t}function bo(t,e,n){var i=e[0],o=e[1],r=e[2],a=e[3],s=.5*n[0],u=.5*n[1],c=.5*n[2],h=e[4],p=e[5],_=e[6],l=e[7];return t[0]=i,t[1]=o,t[2]=r,t[3]=a,t[4]=a*s+o*c-r*u+h,t[5]=a*u+r*s-i*c+p,t[6]=a*c+i*u-o*s+_,t[7]=-i*s-o*u-r*c+l,t}function vo(t,e,n){var i=-e[0],o=-e[1],r=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],h=e[7],p=s*a+h*i+u*r-c*o,_=u*a+h*o+c*i-s*r,l=c*a+h*r+s*o-u*i,d=h*a-s*i-u*o-c*r;return Ei(t,e,n),i=t[0],o=t[1],r=t[2],a=t[3],t[4]=p*a+d*i+_*r-l*o,t[5]=_*a+d*o+l*i-p*r,t[6]=l*a+d*r+p*o-_*i,t[7]=d*a-p*i-_*o-l*r,t}function wo(t,e,n){var i=-e[0],o=-e[1],r=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],h=e[7],p=s*a+h*i+u*r-c*o,_=u*a+h*o+c*i-s*r,l=c*a+h*r+s*o-u*i,d=h*a-s*i-u*o-c*r;return Ii(t,e,n),i=t[0],o=t[1],r=t[2],a=t[3],t[4]=p*a+d*i+_*r-l*o,t[5]=_*a+d*o+l*i-p*r,t[6]=l*a+d*r+p*o-_*i,t[7]=d*a-p*i-_*o-l*r,t}function ko(t,e,n){var i=-e[0],o=-e[1],r=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],h=e[7],p=s*a+h*i+u*r-c*o,_=u*a+h*o+c*i-s*r,l=c*a+h*r+s*o-u*i,d=h*a-s*i-u*o-c*r;return Ti(t,e,n),i=t[0],o=t[1],r=t[2],a=t[3],t[4]=p*a+d*i+_*r-l*o,t[5]=_*a+d*o+l*i-p*r,t[6]=l*a+d*r+p*o-_*i,t[7]=d*a-p*i-_*o-l*r,t}function xo(t,e,n){var i=n[0],o=n[1],r=n[2],a=n[3],s=e[0],u=e[1],c=e[2],h=e[3];return t[0]=s*a+h*i+u*r-c*o,t[1]=u*a+h*o+c*i-s*r,t[2]=c*a+h*r+s*o-u*i,t[3]=h*a-s*i-u*o-c*r,s=e[4],u=e[5],c=e[6],h=e[7],t[4]=s*a+h*i+u*r-c*o,t[5]=u*a+h*o+c*i-s*r,t[6]=c*a+h*r+s*o-u*i,t[7]=h*a-s*i-u*o-c*r,t}function So(t,e,n){var i=e[0],o=e[1],r=e[2],a=e[3],s=n[0],u=n[1],c=n[2],h=n[3];return t[0]=i*h+a*s+o*c-r*u,t[1]=o*h+a*u+r*s-i*c,t[2]=r*h+a*c+i*u-o*s,t[3]=a*h-i*s-o*u-r*c,s=n[4],u=n[5],c=n[6],h=n[7],t[4]=i*h+a*s+o*c-r*u,t[5]=o*h+a*u+r*s-i*c,t[6]=r*h+a*c+i*u-o*s,t[7]=a*h-i*s-o*u-r*c,t}function Mo(t,e,n,i){if(Math.abs(i)<l)return ho(t,e);var o=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);i*=.5;var r=Math.sin(i),a=r*n[0]/o,s=r*n[1]/o,u=r*n[2]/o,c=Math.cos(i),h=e[0],p=e[1],_=e[2],d=e[3];t[0]=h*c+d*a+p*u-_*s,t[1]=p*c+d*s+_*a-h*u,t[2]=_*c+d*u+h*s-p*a,t[3]=d*c-h*a-p*s-_*u;var f=e[4],m=e[5],y=e[6],g=e[7];return t[4]=f*c+g*a+m*u-y*s,t[5]=m*c+g*s+y*a-f*u,t[6]=y*c+g*u+f*s-m*a,t[7]=g*c-f*a-m*s-y*u,t}function Eo(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t}function Io(t,e,n){var i=e[0],o=e[1],r=e[2],a=e[3],s=n[4],u=n[5],c=n[6],h=n[7],p=e[4],_=e[5],l=e[6],d=e[7],f=n[0],m=n[1],y=n[2],g=n[3];return t[0]=i*g+a*f+o*y-r*m,t[1]=o*g+a*m+r*f-i*y,t[2]=r*g+a*y+i*m-o*f,t[3]=a*g-i*f-o*m-r*y,t[4]=i*h+a*s+o*c-r*u+p*g+d*f+_*y-l*m,t[5]=o*h+a*u+r*s-i*c+_*g+d*m+l*f-p*y,t[6]=r*h+a*c+i*u-o*s+l*g+d*y+p*m-_*f,t[7]=a*h-i*s-o*u-r*c+d*g-p*f-_*m-l*y,t}var To=Io;function Ao(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t}var Co=Yi;function Po(t,e,n,i){var o=1-i;return Co(e,n)<0&&(i=-i),t[0]=e[0]*o+n[0]*i,t[1]=e[1]*o+n[1]*i,t[2]=e[2]*o+n[2]*i,t[3]=e[3]*o+n[3]*i,t[4]=e[4]*o+n[4]*i,t[5]=e[5]*o+n[5]*i,t[6]=e[6]*o+n[6]*i,t[7]=e[7]*o+n[7]*i,t}function Ro(t,e){var n=Uo(e);return t[0]=-e[0]/n,t[1]=-e[1]/n,t[2]=-e[2]/n,t[3]=e[3]/n,t[4]=-e[4]/n,t[5]=-e[5]/n,t[6]=-e[6]/n,t[7]=e[7]/n,t}function Fo(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}var Bo=Xi,Oo=Bo,Uo=Ki,Do=Uo;function No(t,e){var n=Uo(e);if(n>0){n=Math.sqrt(n);var i=e[0]/n,o=e[1]/n,r=e[2]/n,a=e[3]/n,s=e[4],u=e[5],c=e[6],h=e[7],p=i*s+o*u+r*c+a*h;t[0]=i,t[1]=o,t[2]=r,t[3]=a,t[4]=(s-i*p)/n,t[5]=(u-o*p)/n,t[6]=(c-r*p)/n,t[7]=(h-a*p)/n}return t}function Lo(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function jo(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function Go(t,e){var n=t[0],i=t[1],o=t[2],r=t[3],a=t[4],s=t[5],u=t[6],c=t[7],h=e[0],p=e[1],_=e[2],d=e[3],f=e[4],m=e[5],y=e[6],g=e[7];return Math.abs(n-h)<=l*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(i-p)<=l*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(o-_)<=l*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(r-d)<=l*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(a-f)<=l*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(s-m)<=l*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(u-y)<=l*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(c-g)<=l*Math.max(1,Math.abs(c),Math.abs(g))}function Wo(){var t=new d(2);return d!=Float32Array&&(t[0]=0,t[1]=0),t}function Ho(t){var e=new d(2);return e[0]=t[0],e[1]=t[1],e}function Yo(t,e){var n=new d(2);return n[0]=t,n[1]=e,n}function qo(t,e){return t[0]=e[0],t[1]=e[1],t}function Xo(t,e,n){return t[0]=e,t[1]=n,t}function Vo(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function Ko(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function zo(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function Zo(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function Qo(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function Jo(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function $o(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function tr(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function er(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function nr(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function ir(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t}function or(t,e){var n=e[0]-t[0],i=e[1]-t[1];return Math.sqrt(n*n+i*i)}function rr(t,e){var n=e[0]-t[0],i=e[1]-t[1];return n*n+i*i}function ar(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)}function sr(t){var e=t[0],n=t[1];return e*e+n*n}function ur(t,e){return t[0]=-e[0],t[1]=-e[1],t}function cr(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function hr(t,e){var n=e[0],i=e[1],o=n*n+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o),t}function pr(t,e){return t[0]*e[0]+t[1]*e[1]}function _r(t,e,n){var i=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=i,t}function lr(t,e,n,i){var o=e[0],r=e[1];return t[0]=o+i*(n[0]-o),t[1]=r+i*(n[1]-r),t}function dr(t,e){e=e||1;var n=2*f()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function fr(t,e,n){var i=e[0],o=e[1];return t[0]=n[0]*i+n[2]*o,t[1]=n[1]*i+n[3]*o,t}function mr(t,e,n){var i=e[0],o=e[1];return t[0]=n[0]*i+n[2]*o+n[4],t[1]=n[1]*i+n[3]*o+n[5],t}function yr(t,e,n){var i=e[0],o=e[1];return t[0]=n[0]*i+n[3]*o+n[6],t[1]=n[1]*i+n[4]*o+n[7],t}function gr(t,e,n){var i=e[0],o=e[1];return t[0]=n[0]*i+n[4]*o+n[12],t[1]=n[1]*i+n[5]*o+n[13],t}function br(t,e,n,i){var o=e[0]-n[0],r=e[1]-n[1],a=Math.sin(i),s=Math.cos(i);return t[0]=o*s-r*a+n[0],t[1]=o*a+r*s+n[1],t}function vr(t,e){var n=t[0],i=t[1],o=e[0],r=e[1],a=n*n+i*i;a>0&&(a=1/Math.sqrt(a));var s=o*o+r*r;s>0&&(s=1/Math.sqrt(s));var u=(n*o+i*r)*a*s;return u>1?0:u<-1?Math.PI:Math.acos(u)}function wr(t){return"vec2("+t[0]+", "+t[1]+")"}function kr(t,e){return t[0]===e[0]&&t[1]===e[1]}function xr(t,e){var n=t[0],i=t[1],o=e[0],r=e[1];return Math.abs(n-o)<=l*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-r)<=l*Math.max(1,Math.abs(i),Math.abs(r))}var Sr=ar,Mr=Ko,Er=zo,Ir=Zo,Tr=or,Ar=rr,Cr=sr,Pr=function(){var t=Wo();return function(e,n,i,o,r,a){var s=void 0,u=void 0;for(n||(n=2),i||(i=0),u=o?Math.min(o*n+i,e.length):e.length,s=i;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],r(t,t,a),e[s]=t[0],e[s+1]=t[1];return e}}();n.d(e,"glMatrix",function(){return i}),n.d(e,"mat2",function(){return o}),n.d(e,"mat2d",function(){return r}),n.d(e,"mat3",function(){return a}),n.d(e,"mat4",function(){return s}),n.d(e,"quat",function(){return h}),n.d(e,"quat2",function(){return p}),n.d(e,"vec2",function(){return _}),n.d(e,"vec3",function(){return u}),n.d(e,"vec4",function(){return c})},function(t,e,n){"use strict";var i,o=n(41),r=n(2);window.onload=function(){var t=document.getElementById("mainCanvas");if((i=new o(t,{})).init(),r.DEBUG){var e=document.getElementById("debug");i.setupDebug(e)}i.setupEvents(),window.RPGAtsumaru&&window.RPGAtsumaru.experimental.screenshot&&window.RPGAtsumaru.experimental.screenshot.setScreenshotHandler&&window.RPGAtsumaru.experimental.screenshot.setScreenshotHandler(function(){return new Promise(function(e,n){e(t.toDataURL("image/jpeg"))})}),window.RPGAtsumaru&&navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i)&&(window.innerWidth=screen.width,window.innerHeight=screen.height),i.fullsize(),i.startRun()},window.require&&window.require("electron").webFrame.setVisualZoomLevelLimits(1,1)},function(t,e,n){"use strict";var i=n(0).Core,o=n(0).Util,r=n(64),a=n(65),s=n(66),u=n(68),c=n(101),h=n(103),p=n(106),_=n(2),l=n(107),d=function(t){i.apply(this,arguments),this._total_score=0,this.scene_manager.addScene("loading",new r(this)),this.scene_manager.addScene("scenario_start",new s(this)),this.scene_manager.addScene("title",new a(this)),this.scene_manager.addScene("battle",new u(this)),this.scene_manager.addScene("scenario_end",new c(this)),this.scene_manager.addScene("clear",new h(this)),this.scene_manager.addScene("omake",new p(this))};o.inherit(d,i),d.prototype.init=function(){i.prototype.init.apply(this,arguments),this._total_score=0,_.DEBUG?this.scene_manager.changeScene("loading",l,_.DEBUG_SCENE):this.scene_manager.changeScene("loading",l,"title")},d.prototype.addTotalScore=function(t){this._total_score+=t},d.prototype.totalScore=function(){return this._total_score},d.prototype.initTotalScore=function(){this._total_score=0},d.prototype.setupDebug=function(t){_.DEBUG&&(this.debug_manager.setOn(t),this.debug_manager.addMenuButton("Run/Stop",function(t){t.isRunning()?t.stopRun():t.startRun()}),this.debug_manager.addCaputureImageButton("画面キャプチャ"),this.debug_manager.addMenuButton("FPS表示／非表示",function(t){t.debug_manager.isShowingFps()?t.debug_manager.setShowingFpsOff():t.debug_manager.setShowingFpsOn()}),this.debug_manager.addMenuButton("当たり判定表示／非表示",function(t){t.debug_manager.isShowingCollisionArea()?t.debug_manager.setShowingCollisionAreaOff():t.debug_manager.setShowingCollisionAreaOn()}),this.debug_manager.addMenuButton("HP表示／非表示",function(t){var e=t.debug_manager.get("is_show_hp")||!1;t.debug_manager.set("is_show_hp",!e)}),this.debug_manager.addMenuButton("ボス撃破",function(t){t.scene_manager.currentScene()instanceof u?t.scene_manager.currentScene().destroyBoss():window.alert("バトル中に押してください")}),this.debug_manager.addMenuButton("スペカを使用可にする",function(t){t.scene_manager.currentScene()instanceof u?t.scene_manager.currentScene().enableSpellCard():window.alert("バトル中に押してください")}))},t.exports=d},function(t,e,n){"use strict";var i={util:n(1),core:n(22),shader_program:n(18),constant:n(1).assign(n(5),{button:n(5)}),serif_manager:n(19),save_manager:n(9),manager:{save:n(9),scenario:n(19)},scene:{base:n(8),loading:n(13),movie:n(29)},object:{base:n(4),point:n(10),sprite:n(30),sprite3d:n(31),pool_manager:n(20),pool_manager3d:n(34),ui_parts:n(35)},asset_loader:{image:n(15),audio:n(16),font:n(17)},storage:{base:n(11),save:n(36)},Util:n(1),Core:n(22),ShaderProgram:n(18),Log:n(57),Constant:{Button:n(5)},Manager:{Save:n(9),Scenario:n(19),Time:n(24),Input:n(25)},Scene:{Base:n(8),Loading:n(13),Movie:n(29)},Object:{Base:n(4),Point:n(10),Sprite:n(30),Sprite3d:n(31),Container:n(33),PoolManager:n(20),PoolManager3d:n(34),PoolContainer:n(20),UIParts:n(35),UI:{Base:n(7),Text:n(58),Spinner:n(59),Group:n(60),Image:n(61)}},AssetLoader:{Image:n(15),Audio:n(16),Font:n(17)},Storage:{Base:n(11),Save:n(36)},Master:{RepositoryGenerator:n(62)}};t.exports=i},function(t,e,n){(function(e){WebGLDebugUtils=function(){var t;void 0===t&&(t=e);var n=function(e){t.console&&t.console.error?t.console.error(e):function(e){t.console&&t.console.log&&t.console.log(e)}(e)},i={enable:{1:{0:!0}},disable:{1:{0:!0}},getParameter:{1:{0:!0}},drawArrays:{3:{0:!0}},drawElements:{4:{0:!0,2:!0}},createShader:{1:{0:!0}},getShaderParameter:{2:{1:!0}},getProgramParameter:{2:{1:!0}},getShaderPrecisionFormat:{2:{0:!0,1:!0}},getVertexAttrib:{2:{1:!0}},vertexAttribPointer:{6:{2:!0}},bindTexture:{2:{0:!0}},activeTexture:{1:{0:!0}},getTexParameter:{2:{0:!0,1:!0}},texParameterf:{3:{0:!0,1:!0}},texParameteri:{3:{0:!0,1:!0,2:!0}},copyTexImage2D:{8:{0:!0,2:!0}},copyTexSubImage2D:{8:{0:!0}},generateMipmap:{1:{0:!0}},bindBuffer:{2:{0:!0}},getBufferParameter:{2:{0:!0,1:!0}},pixelStorei:{2:{0:!0,1:!0}},bindRenderbuffer:{2:{0:!0}},bindFramebuffer:{2:{0:!0}},checkFramebufferStatus:{1:{0:!0}},framebufferRenderbuffer:{4:{0:!0,1:!0,2:!0}},framebufferTexture2D:{5:{0:!0,1:!0,2:!0}},getFramebufferAttachmentParameter:{3:{0:!0,1:!0,2:!0}},getRenderbufferParameter:{2:{0:!0,1:!0}},renderbufferStorage:{4:{0:!0,1:!0}},clear:{1:{0:{enumBitwiseOr:["COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT"]}}},depthFunc:{1:{0:!0}},blendFunc:{2:{0:!0,1:!0}},blendFuncSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},blendEquation:{1:{0:!0}},blendEquationSeparate:{2:{0:!0,1:!0}},stencilFunc:{3:{0:!0}},stencilFuncSeparate:{4:{0:!0,1:!0}},stencilMaskSeparate:{2:{0:!0}},stencilOp:{3:{0:!0,1:!0,2:!0}},stencilOpSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},cullFace:{1:{0:!0}},frontFace:{1:{0:!0}},drawArraysInstancedANGLE:{4:{0:!0}},drawElementsInstancedANGLE:{5:{0:!0,2:!0}},blendEquationEXT:{1:{0:!0}},bufferData:{3:{0:!0,2:!0},4:{0:!0,2:!0},5:{0:!0,2:!0}},bufferSubData:{3:{0:!0},4:{0:!0},5:{0:!0}},copyBufferSubData:{5:{0:!0,1:!0}},getBufferSubData:{3:{0:!0},4:{0:!0},5:{0:!0}},blitFramebuffer:{10:{8:{enumBitwiseOr:["COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT"]},9:!0}},framebufferTextureLayer:{5:{0:!0,1:!0}},invalidateFramebuffer:{2:{0:!0}},invalidateSubFramebuffer:{6:{0:!0}},readBuffer:{1:{0:!0}},getInternalformatParameter:{3:{0:!0,1:!0,2:!0}},renderbufferStorageMultisample:{5:{0:!0,2:!0}},texStorage2D:{5:{0:!0,2:!0}},texStorage3D:{6:{0:!0,2:!0}},texImage2D:{9:{0:!0,2:!0,6:!0,7:!0},6:{0:!0,2:!0,3:!0,4:!0},10:{0:!0,2:!0,6:!0,7:!0}},texImage3D:{10:{0:!0,2:!0,7:!0,8:!0},11:{0:!0,2:!0,7:!0,8:!0}},texSubImage2D:{9:{0:!0,6:!0,7:!0},7:{0:!0,4:!0,5:!0},10:{0:!0,6:!0,7:!0}},texSubImage3D:{11:{0:!0,8:!0,9:!0},12:{0:!0,8:!0,9:!0}},copyTexSubImage3D:{9:{0:!0}},compressedTexImage2D:{7:{0:!0,2:!0},8:{0:!0,2:!0},9:{0:!0,2:!0}},compressedTexImage3D:{8:{0:!0,2:!0},9:{0:!0,2:!0},10:{0:!0,2:!0}},compressedTexSubImage2D:{8:{0:!0,6:!0},9:{0:!0,6:!0},10:{0:!0,6:!0}},compressedTexSubImage3D:{10:{0:!0,8:!0},11:{0:!0,8:!0},12:{0:!0,8:!0}},vertexAttribIPointer:{5:{2:!0}},drawArraysInstanced:{4:{0:!0}},drawElementsInstanced:{5:{0:!0,2:!0}},drawRangeElements:{6:{0:!0,4:!0}},readPixels:{7:{4:!0,5:!0},8:{4:!0,5:!0}},clearBufferfv:{3:{0:!0},4:{0:!0}},clearBufferiv:{3:{0:!0},4:{0:!0}},clearBufferuiv:{3:{0:!0},4:{0:!0}},clearBufferfi:{4:{0:!0}},beginQuery:{2:{0:!0}},endQuery:{1:{0:!0}},getQuery:{2:{0:!0,1:!0}},getQueryParameter:{2:{1:!0}},samplerParameteri:{3:{1:!0,2:!0}},samplerParameterf:{3:{1:!0}},getSamplerParameter:{2:{1:!0}},fenceSync:{2:{0:!0,1:{enumBitwiseOr:[]}}},clientWaitSync:{3:{1:{enumBitwiseOr:["SYNC_FLUSH_COMMANDS_BIT"]}}},waitSync:{3:{1:{enumBitwiseOr:[]}}},getSyncParameter:{2:{1:!0}},bindTransformFeedback:{2:{0:!0}},beginTransformFeedback:{1:{0:!0}},transformFeedbackVaryings:{3:{2:!0}},bindBufferBase:{3:{0:!0}},bindBufferRange:{5:{0:!0}},getIndexedParameter:{2:{0:!0}},getActiveUniforms:{3:{2:!0}},getActiveUniformBlockParameter:{3:{2:!0}}},o=null,r=null;function a(t){if(null==o)for(var e in o={},r={},t)"number"==typeof t[e]&&(o[t[e]]=e,r[e]=t[e])}function s(){if(null==o)throw"WebGLDebugUtils.init(ctx) not called"}function u(t){s();var e=o[t];return void 0!==e?"gl."+e:"/*UNKNOWN WebGL ENUM*/ 0x"+t.toString(16)}function c(t,e,n,o){var a;if(void 0!==(a=i[t])&&(void 0!==(a=a[e])&&a[n])){if("object"==typeof a[n]&&void 0!==a[n].enumBitwiseOr){for(var s=a[n].enumBitwiseOr,c=0,h=[],p=0;p<s.length;++p){var _=r[s[p]];0!=(o&_)&&(c|=_,h.push(u(_)))}return c===o?h.join(" | "):u(o)}return u(o)}return null===o?"null":void 0===o?"undefined":o.toString()}function h(t,e,n){t.__defineGetter__(n,function(){return e[n]}),t.__defineSetter__(n,function(t){e[n]=t})}function p(t){var e=!!t.createTransformFeedback;e&&t.bindVertexArray(null);var n=t.getParameter(t.MAX_VERTEX_ATTRIBS),i=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,i);for(var o=0;o<n;++o)t.disableVertexAttribArray(o),t.vertexAttribPointer(o,4,t.FLOAT,!1,0,0),t.vertexAttrib1f(o,0),e&&t.vertexAttribDivisor(o,0);t.deleteBuffer(i);var r=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);for(o=0;o<r;++o)t.activeTexture(t.TEXTURE0+o),t.bindTexture(t.TEXTURE_CUBE_MAP,null),t.bindTexture(t.TEXTURE_2D,null),e&&(t.bindTexture(t.TEXTURE_2D_ARRAY,null),t.bindTexture(t.TEXTURE_3D,null),t.bindSampler(o,null));if(t.activeTexture(t.TEXTURE0),t.useProgram(null),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.DITHER),t.disable(t.SCISSOR_TEST),t.blendColor(0,0,0,0),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.clearColor(0,0,0,0),t.clearDepth(1),t.clearStencil(-1),t.colorMask(!0,!0,!0,!0),t.cullFace(t.BACK),t.depthFunc(t.LESS),t.depthMask(!0),t.depthRange(0,1),t.frontFace(t.CCW),t.hint(t.GENERATE_MIPMAP_HINT,t.DONT_CARE),t.lineWidth(1),t.pixelStorei(t.PACK_ALIGNMENT,4),t.pixelStorei(t.UNPACK_ALIGNMENT,4),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.UNPACK_COLORSPACE_CONVERSION_WEBGL&&t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.BROWSER_DEFAULT_WEBGL),t.polygonOffset(0,0),t.sampleCoverage(1,!1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilMask(4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.viewport(0,0,t.canvas.width,t.canvas.height),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT),e){t.drawBuffers([t.BACK]),t.readBuffer(t.BACK),t.bindBuffer(t.COPY_READ_BUFFER,null),t.bindBuffer(t.COPY_WRITE_BUFFER,null),t.bindBuffer(t.PIXEL_PACK_BUFFER,null),t.bindBuffer(t.PIXEL_UNPACK_BUFFER,null);var a=t.getParameter(t.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS);for(o=0;o<a;++o)t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,o,null);var s=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);for(o=0;o<s;++o)t.bindBufferBase(t.UNIFORM_BUFFER,o,null);t.disable(t.RASTERIZER_DISCARD),t.pixelStorei(t.UNPACK_IMAGE_HEIGHT,0),t.pixelStorei(t.UNPACK_SKIP_IMAGES,0),t.pixelStorei(t.UNPACK_ROW_LENGTH,0),t.pixelStorei(t.UNPACK_SKIP_ROWS,0),t.pixelStorei(t.UNPACK_SKIP_PIXELS,0),t.pixelStorei(t.PACK_ROW_LENGTH,0),t.pixelStorei(t.PACK_SKIP_ROWS,0),t.pixelStorei(t.PACK_SKIP_PIXELS,0),t.hint(t.FRAGMENT_SHADER_DERIVATIVE_HINT,t.DONT_CARE)}for(;t.getError(););}return{init:a,mightBeEnum:function(t){return s(),void 0!==o[t]},glEnumToString:u,glFunctionArgToString:c,glFunctionArgsToString:function(t,e){for(var n="",i=e.length,o=0;o<i;++o)n+=(0==o?"":", ")+c(t,i,o,e[o]);return n},makeDebugContext:function t(e,i,o,r){r=r||e,a(e),i=i||function(t,e,i){for(var o="",r=i.length,a=0;a<r;++a)o+=(0==a?"":", ")+c(e,r,a,i[a]);n("WebGL error "+u(t)+" in "+e+"("+o+")")};var s={};function p(t,e){return function(){o&&o(e,arguments);var n=t[e].apply(t,arguments),a=r.getError();return 0!=a&&(s[a]=!0,i(a,e,arguments)),n}}var _={};for(var l in e)if("function"==typeof e[l])if("getExtension"!=l)_[l]=p(e,l);else{var d=p(e,l);_[l]=function(){var n=d.apply(e,arguments);return n?t(n,i,o,r):null}}else h(_,e,l);return _.getError=function(){for(var t in s)if(s.hasOwnProperty(t)&&s[t])return s[t]=!1,t;return e.NO_ERROR},_},makeLostContextSimulatingCanvas:function(e){var n,i,o=[],r=[],a={},s=1,u=!1,c=[],_=0,l=0,d=!1,f=0,m={};function y(t){return"function"==typeof t?t:function(e){t.handleEvent(e)}}e.getContext=function(o){return function(){var r=o.apply(e,arguments);if(r instanceof WebGLRenderingContext||t.WebGL2RenderingContext&&r instanceof WebGL2RenderingContext){if(r!=n){if(n)throw"got different context";i=t.WebGL2RenderingContext&&r instanceof WebGL2RenderingContext,a=function(t){for(var e in t)"function"==typeof t[e]?a[e]=w(t,e):h(a,t,e);a.getError=function(){if(v(),!u)for(;t=n.getError();)m[t]=!0;for(var t in m)if(m[t])return delete m[t],t;return a.NO_ERROR};var o=["createBuffer","createFramebuffer","createProgram","createRenderbuffer","createShader","createTexture"];i&&o.push("createQuery","createSampler","fenceSync","createTransformFeedback","createVertexArray");for(var r=0;r<o.length;++r){var p=o[r];a[p]=function(e){return function(){if(v(),u)return null;var n=e.apply(t,arguments);return n.__webglDebugContextLostId__=s,c.push(n),n}}(t[p])}var _=["getActiveAttrib","getActiveUniform","getBufferParameter","getContextAttributes","getAttachedShaders","getFramebufferAttachmentParameter","getParameter","getProgramParameter","getProgramInfoLog","getRenderbufferParameter","getShaderParameter","getShaderInfoLog","getShaderSource","getTexParameter","getUniform","getUniformLocation","getVertexAttrib"];i&&_.push("getInternalformatParameter","getQuery","getQueryParameter","getSamplerParameter","getSyncParameter","getTransformFeedbackVarying","getIndexedParameter","getUniformIndices","getActiveUniforms","getActiveUniformBlockParameter","getActiveUniformBlockName");for(var r=0;r<_.length;++r){var p=_[r];a[p]=function(e){return function(){return v(),u?null:e.apply(t,arguments)}}(a[p])}var l=["isBuffer","isEnabled","isFramebuffer","isProgram","isRenderbuffer","isShader","isTexture"];i&&l.push("isQuery","isSampler","isSync","isTransformFeedback","isVertexArray");for(var r=0;r<l.length;++r){var p=l[r];a[p]=function(e){return function(){return v(),!u&&e.apply(t,arguments)}}(a[p])}return a.checkFramebufferStatus=function(e){return function(){return v(),u?a.FRAMEBUFFER_UNSUPPORTED:e.apply(t,arguments)}}(a.checkFramebufferStatus),a.getAttribLocation=function(e){return function(){return v(),u?-1:e.apply(t,arguments)}}(a.getAttribLocation),a.getVertexAttribOffset=function(e){return function(){return v(),u?0:e.apply(t,arguments)}}(a.getVertexAttribOffset),a.isContextLost=function(){return u},i&&(a.getFragDataLocation=function(e){return function(){return v(),u?-1:e.apply(t,arguments)}}(a.getFragDataLocation),a.clientWaitSync=function(e){return function(){return v(),u?a.WAIT_FAILED:e.apply(t,arguments)}}(a.clientWaitSync),a.getUniformBlockIndex=function(e){return function(){return v(),u?a.INVALID_INDEX:e.apply(t,arguments)}}(a.getUniformBlockIndex)),a}(n=r)}return a}return r}}(e.getContext);var g=function(t){o.push(y(t))},b=function(t){r.push(y(t))};function v(){++l,u||_==l&&e.loseContext()}function w(t,e){var n=t[e];return function(){if(v(),!u)return n.apply(t,arguments)}}function k(t){return{statusMessage:t,preventDefault:function(){d=!0}}}return function(t){var e=t.addEventListener;t.addEventListener=function(n,i,o){switch(n){case"webglcontextlost":g(i);break;case"webglcontextrestored":b(i);break;default:e.apply(t,arguments)}}}(e),e.loseContext=function(){if(!u){for(u=!0,_=0,++s;n.getError(););!function(){for(var t=Object.keys(m),e=0;e<t.length;++e)delete m[t[e]]}(),m[n.CONTEXT_LOST_WEBGL]=!0;var t=k("context lost"),i=o.slice();setTimeout(function(){for(var n=0;n<i.length;++n)i[n](t);f>=0&&setTimeout(function(){e.restoreContext()},f)},0)}},e.restoreContext=function(){u&&r.length&&setTimeout(function(){if(!d)throw"can not restore. webglcontestlost listener did not call event.preventDefault";!function(){for(var t=0;t<c.length;++t){var e=c[t];e instanceof WebGLBuffer?n.deleteBuffer(e):e instanceof WebGLFramebuffer?n.deleteFramebuffer(e):e instanceof WebGLProgram?n.deleteProgram(e):e instanceof WebGLRenderbuffer?n.deleteRenderbuffer(e):e instanceof WebGLShader?n.deleteShader(e):e instanceof WebGLTexture?n.deleteTexture(e):i&&(e instanceof WebGLQuery?n.deleteQuery(e):e instanceof WebGLSampler?n.deleteSampler(e):e instanceof WebGLSync?n.deleteSync(e):e instanceof WebGLTransformFeedback?n.deleteTransformFeedback(e):e instanceof WebGLVertexArrayObject&&n.deleteVertexArray(e))}}(),p(n),u=!1,l=0,d=!1;for(var t=r.slice(),e=k("context restored"),o=0;o<t.length;++o)t[o](e)},0)},e.loseContextInNCalls=function(t){if(u)throw"You can not ask a lost contet to be lost";_=l+t},e.getNumCalls=function(){return l},e.setRestoreTimeout=function(t){f=t},e},resetToInitialState:p}}(),t.exports=WebGLDebugUtils}).call(this,n(44))},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var i=n(1),o=function(t){this.core=t,this.dom=null,this.is_debug_mode=!1,this._collision_area_color=null,this._is_showing_fps=!1,this._variables={},this._draw_count=0,this._before_time=0,this._fps=0};o.prototype.init=function(){this._draw_count=0,this._before_time=0,this._fps=0},o.prototype.setOn=function(t){this.is_debug_mode=!0,this.dom=t},o.prototype.setOff=function(){this.is_debug_mode=!1,this.dom=null},o.prototype.set=function(t,e){this.is_debug_mode&&(this._variables[t]=e)},o.prototype.get=function(t){return this.is_debug_mode?this._variables[t]:null},o.prototype.calculateFps=function(){this._draw_count++,this.isShowingFps()&&this._calculateFps()},o.prototype._calculateFps=function(){if(this._draw_count%60==0){var t=this.core.now();this._before_time&&(this._fps=Math.floor(6e4/(t-this._before_time))),this._before_time=t}},o.prototype.renderFps=function(){this.isShowingFps()&&this._renderFps()},o.prototype._renderFps=function(){var t=this.core.ctx;t.save(),t.fillStyle="red",t.textAlign="left",t.font="16px 'sans-serif'",t.fillText("FPS: "+this._fps,this.core.width-70,this.core.height-10),t.restore()},o.prototype.addMenuText=function(t){if(this.is_debug_mode){var e=window.document.createElement("pre");e.textContent=t,this.dom.appendChild(e)}},o.prototype.addNewLine=function(){if(this.is_debug_mode){var t=window.document.createElement("br");this.dom.appendChild(t)}},o.prototype.addMenuImage=function(t){if(this.is_debug_mode){var e=window.document.createElement("img");e.src=t,this.dom.appendChild(e)}},o.prototype.addMenuButton=function(t,e){if(this.is_debug_mode){var n=this.core,i=window.document.createElement("input");i.setAttribute("type","button"),i.setAttribute("value",t),i.onclick=function(){e(n)},this.dom.appendChild(i)}},o.prototype.addMenuSelect=function(t,e,n){if(this.is_debug_mode){for(var i=this.core,o=window.document.createElement("select"),r=0,a=e.length;r<a;r++){var s=e[r],u=s.value,c="name"in s?s.name:u,h=document.createElement("option");h.setAttribute("value",u),h.appendChild(document.createTextNode(c)),o.appendChild(h)}this.dom.appendChild(o);var p=window.document.createElement("input");p.setAttribute("type","button"),p.setAttribute("value",t),p.onclick=function(){n(i,o.value)},this.dom.appendChild(p)}},o.prototype.addGitLatestCommitInfo=function(t,e,n){if(this.is_debug_mode){n=n||"master";var i=window.document.createElement("pre");this.dom.appendChild(i);var o="https://api.github.com/repos/"+t+"/"+e+"/branches/"+n,r=new XMLHttpRequest;r.onload=function(){if(200===r.status){var t,e=r.response;if(!e)throw new Error("Can't parse git lastest commit info");t=JSON.parse(e),i.textContent="last update date: "+new Date(t.commit.commit.author.date)+"\n"}},r.open("GET",o,!0),r.send(null)}};o.prototype.addCaputureImageButton=function(t,e){if(this.is_debug_mode){var n=this.core.canvas_dom;this.addMenuButton(t,function(){var t=e;if(void 0===e){var o=new Date;t=Math.floor(o.getTime()/1e3)}var r=function(t){for(var e=t.split(","),n=atob(e[1]),i=e[0].split(":")[1].split(";")[0],o=new Uint8Array(n.length),r=0;r<n.length;r++)o[r]=n.charCodeAt(r);return new Blob([o],{type:i})}(n.toDataURL("image/png"));i.downloadBlob(r,t+".png")})}};var r={array_buffer:"readAsArrayBuffer",binary_string:"readAsBinaryString",text:"readAsText",data_url:"readAsDataURL"};o.prototype.addUploadFileButton=function(t,e,n){if(this.is_debug_mode){if(void 0===n&&(n="array_buffer"),!r[n])throw new Error("Unknown read_type: "+n);var i=window.document.createElement("pre");i.style.display="inline",i.textContent=t,this.dom.appendChild(i);var o=window.document.createElement("input");o.setAttribute("type","file");var a=r[n],s=this.core;o.onchange=function(t){if(o.value){var n=t.target.files[0],i=new FileReader,r=n.type;i.onload=function(t){var n=t.target.result;e(s,r,n)},i[a](n)}},o.onclick=function(t){o.value=null},this.dom.appendChild(o)}},o.prototype.setShowingCollisionAreaOn=function(t){if(!this.is_debug_mode)return null;t=t||"white",this._collision_area_color=t},o.prototype.setShowingCollisionAreaOff=function(){if(!this.is_debug_mode)return null;this._collision_area_color=null},o.prototype.isShowingCollisionArea=function(){return!!this.is_debug_mode&&!!this._collision_area_color},o.prototype.collisionAreaColor=function(){return this.is_debug_mode?this._collision_area_color:null},o.prototype.setShowingFpsOn=function(){if(!this.is_debug_mode)return null;this._is_showing_fps=!0},o.prototype.setShowingFpsOff=function(){if(!this.is_debug_mode)return null;this._is_showing_fps=!1},o.prototype.isShowingFps=function(){return!!this.is_debug_mode&&this._is_showing_fps},t.exports=o},function(t,e,n){"use strict";var i=n(13),o=function(t){this.core=t,this._current_scene=null,this._reserved_next_scene_name_and_arguments=null,this._is_reserved_next_scene_init=!0,this._scenes={},this._fade_in_duration=null,this._fade_in_color=null,this._fade_in_start_frame_count=null,this._fade_out_duration=null,this._fade_out_color=null,this._fade_out_start_frame_count=null,this._is_fade_out_finished=!1,this.addScene("loading",new i(t))};o.prototype.init=function(){this._current_scene=null,this._reserved_next_scene_name_and_arguments=null,this._is_reserved_next_scene_init=!0,this._fade_in_duration=null,this._fade_in_color=null,this._fade_in_start_frame_count=null,this._fade_out_duration=null,this._fade_out_color=null,this._fade_out_start_frame_count=null,this._is_fade_out_finished=!1},o.prototype.update=function(){this._changeNextSceneIfReserved()},o.prototype.currentScene=function(){return null===this._current_scene?null:this._scenes[this._current_scene]},o.prototype.addScene=function(t,e){this._scenes[t]=e},o.prototype.changeScene=function(t,e){if(!(t in this._scenes))throw new Error(t+" scene doesn't exists.");var n=Array.prototype.slice.call(arguments);this._reserved_next_scene_name_and_arguments=n,this._is_reserved_next_scene_init=!0,this._current_scene||this._changeNextSceneIfReserved()},o.prototype.returnScene=function(t){if(!(t in this._scenes))throw new Error(t+" scene doesn't exists.");if(!this._scenes[t].isInit())throw new Error(t+" scene is not initialized. Please call init method.");this._reserved_next_scene_name_and_arguments=[t],this._is_reserved_next_scene_init=!1},o.prototype._changeNextSceneIfReserved=function(){if(this._reserved_next_scene_name_and_arguments)if(!this.isSetFadeOut()||this._is_fade_out_finished||this.isInFadeOut())if(this.isSetFadeOut()&&!this._is_fade_out_finished&&this.isInFadeOut());else{this._current_scene=this._reserved_next_scene_name_and_arguments.shift();var t=this.currentScene(),e=this._reserved_next_scene_name_and_arguments;this._reserved_next_scene_name_and_arguments=null,this._is_reserved_next_scene_init&&(this._resetFadeOut(),t.init.apply(t,e)),this._is_fade_out_finished=!1}else this.startFadeOut()},o.prototype.changeSceneWithLoading=function(t,e){e||(e={}),this.changeScene("loading",e,t)},o.prototype.setFadeIn=function(t,e){this._fade_in_duration=t||30,this._fade_in_color=e||"white",this._startFadeIn()},o.prototype._startFadeIn=function(){this._quitFadeOut(),this._fade_in_start_frame_count=this.core.frame_count},o.prototype._quitFadeIn=function(){this._fade_in_start_frame_count=null},o.prototype.isInFadeIn=function(){return null!==this._fade_in_start_frame_count},o.prototype.setFadeOut=function(t,e){t=void 0!==t?t:30,this._fade_out_duration=t,this._fade_out_color=e||"black"},o.prototype._resetFadeOut=function(){this._fade_out_duration=null,this._fade_out_color=null},o.prototype.startFadeOut=function(){this.isSetFadeOut()&&(this._quitFadeIn(),this._fade_out_start_frame_count=this.core.frame_count)},o.prototype._quitFadeOut=function(){this._fade_out_start_frame_count=null},o.prototype.isInFadeOut=function(){return null!==this._fade_out_start_frame_count},o.prototype.isSetFadeOut=function(){return!(!this._fade_out_duration||!this._fade_out_color)},o.prototype.drawTransition=function(){var t,e=this.core.ctx;this.isInFadeIn()?(e.save(),t=this.core.frame_count-this._fade_in_start_frame_count<this._fade_in_duration?1-(this.core.frame_count-this._fade_in_start_frame_count)/this._fade_in_duration:0,e.globalAlpha=t,e.fillStyle=this._fade_in_color,e.fillRect(0,0,this.core.width,this.core.height),e.restore(),0===t&&this._quitFadeIn()):this.isInFadeOut()&&(e.save(),t=this.core.frame_count-this._fade_out_start_frame_count<this._fade_out_duration?(this.core.frame_count-this._fade_out_start_frame_count)/this._fade_out_duration:1,e.globalAlpha=t,e.fillStyle=this._fade_out_color,e.fillRect(0,0,this.core.width,this.core.height),e.restore(),1===t&&(this._quitFadeOut(),this._is_fade_out_finished=!0))},t.exports=o},function(t,e,n){"use strict";t.exports=n(27)},function(t,e,n){"use strict";var i=n(5),o={};o[i.UP]=12,o[i.DOWN]=13,o[i.LEFT]=14,o[i.RIGHT]=15,o[i.SELECT]=8,o[i.START]=9,o[i.A]=1,o[i.B]=0,o[i.X]=3,o[i.Y]=2,o[i.L1]=4,o[i.R1]=5,t.exports=o},function(t,e,n){"use strict";var i=n(5),o={};o[i.UP]=12,o[i.DOWN]=13,o[i.LEFT]=14,o[i.RIGHT]=15,o[i.MENU]=16,o[i.A]=1,o[i.B]=0,o[i.X]=2,o[i.Y]=3,o[i.L1]=4,o[i.R1]=5,o[i.L2]=6,o[i.R2]=7,o[i.SELECT]=8,o[i.START]=9,o[i.L3]=10,o[i.R3]=11,t.exports=o},function(t,e,n){"use strict";var i=n(5),o={};o[i.UP]=38,o[i.DOWN]=40,o[i.LEFT]=37,o[i.RIGHT]=39,o[i.MENU]=13,o[i.A]=90,o[i.B]=88,o[i.X]=67,o[i.Y]=86,o[i.L1]=65,o[i.R1]=83,o[i.L2]=81,o[i.R2]=87,o[i.SELECT]=16,o[i.START]=32,o[i.L3]=49,o[i.R3]=50,t.exports=o},function(t,e,n){"use strict";var i=n(10),o=n(14);o.prototype.isLeftClickDown=function(){return this._is_left_clicked},o.prototype.isLeftClickPush=function(){return this._is_left_clicked&&!this._before_is_left_clicked},o.prototype.isLeftClickRelease=function(){return!this._is_left_clicked&&this._before_is_left_clicked},o.prototype.isRightClickDown=function(){return this._is_right_clicked},o.prototype.isRightClickPush=function(){return this._is_right_clicked&&!this._before_is_right_clicked},o.prototype.isRightClickRelease=function(){return!this._is_right_clicked&&this._before_is_right_clicked},o.prototype.mousePositionPoint=function(t){var e=this.mousePositionX(),n=this.mousePositionY(),o=new i(t);return o.init(),o.setPosition(e,n),o},o.prototype.mouseScroll=function(){return this._mouse_scroll},o.prototype.mousePositionX=function(){return this._mouse_x},o.prototype.mousePositionY=function(){return this._mouse_y},o.prototype.mouseMoveX=function(){return this._mouse_change_x},o.prototype.mouseMoveY=function(){return this._mouse_change_y},o.prototype._handleMouseDown=function(t){"which"in t?(this._is_left_clicked=1===t.which,this._is_right_clicked=3===t.which):"button"in t&&(this._is_left_clicked=1===t.button,this._is_right_clicked=2===t.button),t.preventDefault()},o.prototype._handleMouseUp=function(t){"which"in t?(this._is_left_clicked=1!==t.which&&this._is_left_clicked,this._is_right_clicked=3!==t.which&&this._is_right_clicked):"button"in t&&(this._is_left_clicked=1!==t.button&&this._is_left_clicked,this._is_right_clicked=2!==t.button&&this._is_right_clicked),t.preventDefault()},o.prototype._handleMouseMove=function(t){var e=(t=t||window.event).target.getBoundingClientRect(),n=(t.clientX-e.left)*this._click_position_width_ratio,i=(t.clientY-e.top)*this._click_position_height_ratio;this._mouse_change_x=this._mouse_x-n,this._mouse_change_y=this._mouse_y-i,this._mouse_x=n,this._mouse_y=i,t.preventDefault()},o.prototype._handleMouseWheel=function(t){this._mouse_scroll=t.detail?t.detail:-t.wheelDelta/120},t.exports=o},function(t,e,n){"use strict";var i=n(10),o=n(14);o.prototype.getTouch=function(t){if(t>this._touch_ids.length-1)return this._nullTouch();var e=this._touch_ids[t];return new r(this,e)},o.prototype.getAllTouchList=function(){for(var t=[],e=0,n=this._touch_ids.length;e<n;e++){var i=this._touch_ids[e];t.push(new r(this,i))}return t},o.prototype.getTouchList=function(){for(var t=[],e=0,n=this._touch_ids.length;e<n;e++){var i=this._touch_ids[e];i in this._is_touched_map&&t.push(new r(this,i))}return t},o.prototype._nullTouch=function(){return new r(this,-1)},o.prototype._handleTouchDown=function(t){t.preventDefault();for(var e=t.target.getBoundingClientRect(),n=t.changedTouches,i=0,o=n.length;i<o;i++){var r=n[i],a=r.identifier;!function(t,e){for(var n=null,i=0,o=t._touch_ids.length;i<o;i++){if(!(t._touch_ids[i]in t._is_touched_map)){n=i;break}}null===n?n=t._touch_ids.length:delete t._touch_infos[t._touch_ids[n]],t._touch_ids[n]=e,0===n&&(t._is_left_clicked=!0)}(this,a);var s=(r.clientX-e.left)*this._click_position_width_ratio,u=(r.clientY-e.top)*this._click_position_height_ratio;this._touch_infos[a]={x:s,y:u,change_x:0,change_y:0},this._is_touched_map[a]=!0}},o.prototype._handleTouchUp=function(t){t.preventDefault();for(var e=t.changedTouches,n=0,i=e.length;n<i;n++){var o=e[n].identifier;delete this._is_touched_map[o],o===this._touch_ids[0]&&(this._is_left_clicked=!1)}},o.prototype._handleTouchMove=function(t){t.preventDefault();for(var e=t.target.getBoundingClientRect(),n=t.changedTouches,i=0,o=n.length;i<o;i++){var r=n[i],a=r.identifier;if(a in this._touch_infos){var s=r.clientX-e.left,u=r.clientY-e.top,c=this._touch_infos[a];c.change_x=c.x-s,c.change_y=c.y-u,c.x=s,c.y=u}}},o.prototype._setTouchAsMouse=function(){var t=this.getTouch(0);t.isTouching()&&(this._mouse_change_x=t.moveX(),this._mouse_change_y=t.moveY(),this._mouse_x=t.x(),this._mouse_y=t.y())};var r=function(t,e){this._input_manager=t,this._id=e};r.prototype.isEnable=function(){return this._id in this._input_manager._touch_infos},r.prototype.isTouching=function(){return this._id in this._input_manager._is_touched_map},r.prototype.isTap=function(){return this.isTouching()&&!(this._id in this._input_manager._before_is_touched_map)},r.prototype.isTouchRelease=function(){return!this.isTouching()&&this._id in this._input_manager._before_is_touched_map},r.prototype.positionPoint=function(t){var e=this.x(),n=this.y(),o=new i(t);return o.init(),o.setPosition(e,n),o},r.prototype.x=function(){return this.isEnable()?this._input_manager._touch_infos[this._id].x:0},r.prototype.y=function(){return this.isEnable()?this._input_manager._touch_infos[this._id].y:0},r.prototype.moveX=function(){return this.isEnable()?this._input_manager._touch_infos[this._id].change_x:0},r.prototype.moveY=function(){return this.isEnable()?this._input_manager._touch_infos[this._id].change_y:0},t.exports=o},function(t,e,n){"use strict";var i=n(11),o=function(t){i.apply(this,arguments)};n(1).inherit(o,i);var r="hakurei_engine",a="scenario";o.KEY=function(){return!this.isLocalMode()&&window&&window.location?[r,a,window.location.pathname].join(":"):a},o.prototype.getSerifStatus=function(t){var e=this.get(t);return e||(e={}),e},o.prototype.getPlayedCount=function(t){return this.getSerifStatus(t).played_count||0},o.prototype.incrementPlayedCount=function(t){var e=this.getSerifStatus(t);e.played_count=e.played_count||0,e.played_count++,this.set(t,e)},o.prototype.resetPlayedCount=function(t){var e=this.getSerifStatus(t);e.played_count=0,this.set(t,e)},t.exports=o},function(t,e,n){"use strict";t.exports="precision mediump float;\nuniform sampler2D uSampler;\nvarying vec2 vTextureCoordinates;\nvarying vec4 vColor;\n\nvoid main() {\n\tvec4 textureColor = texture2D(uSampler, vTextureCoordinates);\n\tgl_FragColor = textureColor * vColor;\n}\n\n"},function(t,e,n){"use strict";t.exports="attribute vec3 aVertexPosition;\nattribute vec2 aTextureCoordinates;\nattribute vec4 aColor;\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\nvarying vec2 vTextureCoordinates;\nvarying vec4 vColor;\n\nvoid main() {\n\tgl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n\tvTextureCoordinates = aTextureCoordinates;\n\tvColor = aColor;\n}\n\n"},function(t,e,n){"use strict";var i=function(t){};i.prototype.init=function(t){return console.error("this method is abolished.")},i.prototype.setAutoStart=function(t){return console.error("this method is abolished.")},i.prototype.isEnd=function(){return console.error("this method is abolished.")},i.prototype.isStart=function(){return console.error("this method is abolished.")},i.prototype.next=function(){return console.error("this method is abolished.")},i.prototype._showBackground=function(t){return console.error("this method is abolished.")},i.prototype._showChara=function(t){return console.error("this method is abolished.")},i.prototype._setOption=function(t){return console.error("this method is abolished.")},i.prototype._printMessage=function(t){return console.error("this method is abolished.")},i.prototype.isWaitingNext=function(){return console.error("this method is abolished.")},i.prototype.isEndPrinting=function(){return console.error("this method is abolished.")},i.prototype._startPrintMessage=function(){return console.error("this method is abolished.")},i.prototype._cancelPrintMessage=function(){return console.error("this method is abolished.")},i.prototype.startPrintMessage=function(){return console.error("this method is abolished.")},i.prototype.cancelPrintMessage=function(){return console.error("this method is abolished.")},i.prototype.isBackgroundChanged=function(){return console.error("this method is abolished.")},i.prototype.getBackgroundImageName=function(){return console.error("this method is abolished.")},i.prototype.getImageName=function(t){return console.error("this method is abolished.")},i.prototype.getChara=function(t){return console.error("this method is abolished.")},i.prototype.isTalking=function(t){return console.error("this method is abolished.")},i.prototype.getOption=function(){return console.error("this method is abolished.")},i.prototype.lines=function(){return console.error("this method is abolished.")},i.prototype.getSerifRowsCount=function(){return console.error("this method is abolished.")},i.prototype.right_image=function(){return console.error("this method is abolished.")},i.prototype.left_image=function(){return console.error("this method is abolished.")},i.prototype.is_right_talking=function(){return console.error("this method is abolished.")},i.prototype.is_left_talking=function(){return console.error("this method is abolished.")},i.prototype.font_color=function(){return console.error("this method is abolished.")},i.prototype.is_end=function(){return console.error("this method is abolished.")},i.prototype.is_background_changed=function(){return console.error("this method is abolished.")},i.prototype.background_image=function(){return console.error("this method is abolished.")},t.exports=i},function(t,e,n){"use strict";var i=function(){this._mode=this.ERROR,this._generateFunction()};i.prototype.DEBUG=0,i.prototype.INFO=1,i.prototype.WARN=2,i.prototype.ERROR=3;var o={};o[i.prototype.DEBUG]={name:"debug",logger:function(){console.log.apply(console,arguments)}},o[i.prototype.INFO]={name:"info",logger:function(){console.info.apply(console,arguments)}},o[i.prototype.WARN]={name:"warn",logger:function(){console.warn.apply(console,arguments)}},o[i.prototype.ERROR]={name:"error",logger:function(){console.error.apply(console,arguments)}},i.prototype.setMode=function(t){this._mode=t,this._generateFunction()},i.prototype.mode=function(){return this._mode},i.prototype._generateFunction=function(){for(var t in o){var e=o[t],n=e.name,i=e.logger;this.mode()<=t?this[n]=i:this[n]=function(){}}},t.exports=new i},function(t,e,n){"use strict";var i=n(7),o=n(1),r=function(t,e){i.apply(this,arguments),e=e||{},this._default_property=o.assign(this._default_property,{text:e.text||"",textColor:e.textColor||"black",textSize:e.textSize||"24px",textAlign:e.textAlign||"left",textBaseline:e.textBaseline||"alphabetic",textFont:e.textFont||"sans-serif",lineColor:e.lineColor||null,lineWidth:e.lineWidth||1})};o.inherit(r,i),o.defineProperty(r,"text"),o.defineProperty(r,"textColor"),o.defineProperty(r,"textSize"),o.defineProperty(r,"textAlign"),o.defineProperty(r,"textBaseline"),o.defineProperty(r,"textFont"),o.defineProperty(r,"lineColor"),o.defineProperty(r,"lineWidth"),r.prototype.init=function(){i.prototype.init.apply(this,arguments),this.text(this._default_property.text),this.textColor(this._default_property.textColor),this.textSize(this._default_property.textSize),this.textAlign(this._default_property.textAlign),this.textBaseline(this._default_property.textBaseline),this.textFont(this._default_property.textFont),this.lineColor(this._default_property.lineColor),this.lineWidth(this._default_property.lineWidth)},r.prototype.update=function(){i.prototype.update.apply(this,arguments)},r.prototype.draw=function(){if(this.isShow()){var t=this.core.ctx;t.save(),t.textAlign=this.textAlign(),t.textBaseline=this.textBaseline(),t.font=this.textSize()+" '"+this.textFont()+"'",this.lineColor()&&this.lineWidth()&&(t.strokeStyle=this.lineColor(),t.lineWidth=this.lineWidth(),t.strokeText(this.text(),this.x(),this.y())),t.fillStyle=this.textColor(),t.fillText(this.text(),this.x(),this.y()),t.restore(),i.prototype.draw.apply(this,arguments)}},t.exports=r},function(t,e,n){"use strict";var i=n(7),o=n(1),r=function(t,e){i.apply(this,arguments),e=e||{},this._default_property=o.assign(this._default_property,{size:e.size||"",color:e.color||"black"})};o.inherit(r,i),o.defineProperty(r,"size"),o.defineProperty(r,"color"),r.prototype.init=function(){i.prototype.init.apply(this,arguments),this.size(this._default_property.size),this.color(this._default_property.color),this._start=new Date},r.prototype.update=function(){i.prototype.update.apply(this,arguments)},r.prototype.draw=function(){if(this.isShow()){var t=this.core.ctx,e=Math.floor(this.frame_count/60*16)/16;t.save(),t.translate(this.x(),this.y()),t.rotate(2*Math.PI*e);for(var n=0;n<16;n++)t.beginPath(),t.rotate(2*Math.PI/16),t.moveTo(this.size()/10,0),t.lineTo(this.size()/4,0),t.lineWidth=this.size()/30,t.globalAlpha=n/16,t.strokeStyle=this.color(),t.stroke();t.restore(),i.prototype.draw.apply(this,arguments)}},r.prototype.width=function(){return this.size()/2},r.prototype.height=function(){return this.size()/2},t.exports=r},function(t,e,n){"use strict";var i=n(7),o=n(1),r=function(t,e){i.apply(this,arguments),e=e||{},this._default_property=o.assign(this._default_property,{width:e.width||0,height:e.height||0,backgroundColor:e.backgroundColor||null,alpha:e.alpha||1})};o.inherit(r,i),o.defineProperty(r,"width"),o.defineProperty(r,"height"),o.defineProperty(r,"backgroundColor"),o.defineProperty(r,"alpha"),r.prototype.init=function(){i.prototype.init.apply(this,arguments),this.width(this._default_property.width),this.height(this._default_property.height),this.backgroundColor(this._default_property.backgroundColor),this.alpha(this._default_property.alpha)},r.prototype.update=function(){i.prototype.update.apply(this,arguments)},r.prototype.draw=function(){if(this.isShow()){var t=this.core.ctx;this.backgroundColor()&&(t.save(),t.translate(this.x(),this.y()),t.fillStyle=this.backgroundColor(),t.globalAlpha=this.alpha(),t.fillRect(-this.width()/2,-this.height()/2,this.width(),this.height()),t.restore()),i.prototype.draw.apply(this,arguments)}},t.exports=r},function(t,e,n){"use strict";var i=n(7),o=n(1),r=function(t,e){i.apply(this,arguments),e=e||{},this._default_property=o.assign(this._default_property,{imageName:e.imageName||null,scale:e.scale||1,width:e.width||null,height:e.height||null})};o.inherit(r,i),o.defineProperty(r,"imageName"),o.defineProperty(r,"scale"),o.defineProperty(r,"width"),o.defineProperty(r,"height"),r.prototype.init=function(){if(i.prototype.init.apply(this,arguments),this.imageName(this._default_property.imageName),this.scale(this._default_property.scale),this.width(this._default_property.width),this.height(this._default_property.height),!this.width()&&!this.height()){var t=this.core.image_loader.getImage(this.imageName());this.width(t.width*this.scale()),this.height(t.height*this.scale())}},r.prototype.update=function(){i.prototype.update.apply(this,arguments)},r.prototype.draw=function(){if(this.isShow()){var t=this.core.image_loader.getImage(this.imageName()),e=t.width*this.scale(),n=t.height*this.scale(),o=this.core.ctx;o.save(),o.translate(this.x(),this.y()),o.drawImage(t,-e/2,-n/2,e,n),o.restore(),i.prototype.draw.apply(this,arguments)}},t.exports=r},function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(63),r={exec:function(t,e,n){if(!t||"object"!==(void 0===t?"undefined":i(t)))throw new Error("type_info argument must be set");if(e=e||{pk:null,validate:!1},n=n||[],!e.pk)throw new Error("pk option must be set");for(var r=o.exec(t,e),a={},s=[],u=0,c=n.length;u<c;u++){var h=n[u];if(!(e.pk in h))throw new Error(e.pk+" key data does not exists in master data (index: "+u+")");var p=h[e.pk],_=new r(h);a[p]=_,s[u]=_}var l={};return l.DAOClass=r,l.find=function(t){return a[t]},l.all=function(){return s},l}};t.exports=r},function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o={exec:function(t,e){if(!t||"object"!==(void 0===t?"undefined":i(t)))throw new Error("type_info argument must be set");if(!(e=e||{pk:null}).pk)throw new Error("pk option must be set");var n=function(t){this._data=t||{}};for(var o in t)!function(t){n.prototype[t]=function(){return this._data[t]}}(o);return n}};t.exports=o},function(t,e,n){"use strict";var i=n(0).Scene.Loading,o=n(2),r=n(0).Util,a=function(t){i.apply(this,arguments)};r.inherit(a,i),a.prototype.init=function(){i.prototype.init.apply(this,arguments)},a.prototype._loadSounds=function(t){var e=r.canPlayOgg()?".ogg":".m4a";for(var n in t){var i=t[n],a=o.DEBUG&&o.DEBUG_MUTE?0:i.volume;this.core.audio_loader.loadSound(n,i.path+e,a)}},a.prototype._loadBGMs=function(t){var e=r.canPlayOgg()?".ogg":".m4a";for(var n in t){var i=t[n],a=o.DEBUG&&o.DEBUG_MUTE?0:i.volume;this.core.audio_loader.loadBGM(n,i.path+e,a,i.loopStart,i.loopEnd)}},a.prototype.draw=function(){i.prototype.draw.apply(this,arguments);var t=this.core.ctx;t.save(),t.fillStyle="black",t.fillRect(0,0,this.width,this.height),t.restore(),this._drawLoading()},a.prototype._drawLoading=function(){var t=this.core.ctx,e=this.frame_count%60,n="";n=15>e&&e>=0?"":30>e&&e>=15?".":45>e&&e>=30?"..":"...",t.save(),t.fillStyle="white",t.textAlign="left",t.font="30px 'MyFont'",t.fillText("Now Loading"+n,this.core.width-250,this.core.height-50),t.restore(),t.save(),t.fillStyle="white",t.fillRect(0,this.core.height-20,this.core.width*this.progress(),50),t.restore()},t.exports=a},function(t,e,n){"use strict";var i=n(0).Scene.Base,o=function(t){i.apply(this,arguments)};n(0).Util.inherit(o,i),o.prototype.init=function(){i.prototype.init.apply(this,arguments),this.core.scene_manager.setFadeIn(60,"black"),this.core.initTotalScore(),this.core.audio_loader.playBGM("title")},o.prototype.update=function(){i.prototype.update.apply(this,arguments),this.core.input_manager.isLeftClickPush()&&this.core.scene_manager.changeScene("scenario_start")},o.prototype.draw=function(){i.prototype.draw.apply(this,arguments);var t=this.core.ctx,e=this.core.image_loader.getImage("title");t.save(),t.translate(this.width/2,this.height/2),t.drawImage(e,-e.width/2,-e.height/2),t.restore(),t.save(),t.fillStyle="rgb( 0, 0, 0 )",t.globalAlpha=.8,t.translate(this.width/2,this.height/2),t.fillRect(-this.width/2,-this.height/2,this.width,this.height),t.restore(),t.save(),t.fillStyle="white",t.font="32px 'MyFont'",t.textAlign="center",t.fillText("Touch to Start!!",this.width/2,this.height/2+200),t.restore();var n=this.core.image_loader.getImage("logo");t.save(),t.translate(408,312),t.drawImage(n,-n.width/2,-n.height/2),t.restore()},t.exports=o},function(t,e,n){"use strict";var i=n(67),o=n(0).Util,r=n(37),a=function(t){r.apply(this,arguments)};o.inherit(a,r),a.prototype.notifySerifStart=function(){},a.prototype.notifySerifEnd=function(){this.core.scene_manager.changeScene("battle")},a.prototype.serifScript=function(){return i},a.prototype.bgm=function(){return""},a.prototype.background=function(){return""},t.exports=a},function(t,e,n){"use strict";t.exports=[{background:"title",serif:"妖精メイドが全滅したわ"},{serif:"かくなるうえは......"},{serif:"仕方がありません"},{serif:"ーーいくらでも増えるから、と酷使されてきた紅魔館の妖精メイドたち。",option:{font_color:"#FC4455",outline_color:"#000000"}},{serif:"ーー妖精メイドを労働から開放すべく、自由な森の妖精たちが蜂起！",option:{font_color:"#FC4455",outline_color:"#000000"}},{serif:"ーーしかし妖精メイドと森の妖精が衝突する結果となり......",option:{font_color:"#FC4455",outline_color:"#000000"}},{serif:"ーー妖精メイドは全滅した。",option:{font_color:"#FC4455",outline_color:"#000000"}},{serif:"ーーしかし自由を目指す妖精の攻撃は止まらない！",option:{font_color:"#FC4455",outline_color:"#000000"}},{serif:"私が増えればよろしい"},{serif:"タイムパラドックス！"}]},function(t,e,n){"use strict";var i=n(0).Scene.Base,o=n(69),r=n(71),a=n(72),s=n(73),u=n(74),c=n(75),h=n(78),p=n(79),_=n(80),l=n(81),d=n(82),f=n(83),m=n(84),y=n(85),g=n(86),b=n(87),v=n(88),w=n(89),k=n(90),x=n(91),S=n(92),M=n(93),E=n(94),I=n(95),T=n(96),A=n(97),C=n(98),P=n(99),R=n(100),F=n(0).Object.UI.Image,B=n(0).Object.UI.Text,O=n(0).Object.Container,U=n(0).Util,D=n(2),N=[d,l,_,p],L=["battle_bg1","battle_bg2","battle_bg3","battle_bg4"],j=[{x:286,y:574},{x:396,y:574},{x:506,y:574},{x:616,y:574},{x:726,y:574}],G=[f,m,y,g,b,v,w,k,x,S],W=[M,E,I,T,A,C,P,R],H=function(t){i.apply(this,arguments),this.fort=new u(this),this.fort.x(90),this.fort.y(416),this._bosses=[];for(var e=0,n=N.length;e<n;e++){var p=new N[e](this);p.x(726),p.y(410),this._bosses.push(p)}this.spellcard_anime=new c(this),this.spellcard_anime.x(this.width/2),this.spellcard_anime.y(this.height/2),this.mission_manager=new h(this),this._unit_buttons=[],this._setupUnitButtons(),this._unit_paging_left_button=null,this._unit_paging_right_button=null,this._setupPagingButtons(),this._spellcard_button=null,this._setupSpellCardButton(),this.addObject(this.fort),this.addObject(this.mission_manager),this.addObjects(this._unit_buttons),this.addObjects([this._unit_paging_left_button,this._unit_paging_right_button,this._spellcard_button]),this.addSubScene("ready",new r(t)),this.addSubScene("main",new o(t)),this.addSubScene("gameover",new a(t)),this.addSubScene("result",new s(t)),this.stage_no=0,this.p_num=D.P_MAX,this.b_num=0,this.enemies=new O(this),this.units=new O(this),this._remaining_time_to_use_timestop_frame=D.TIME_TO_USE_TIMESTOP_FRAME,this._remaining_timestop_frame=0,this._is_show_spellcard_anime=!1,this._current_paging_position=0,this.addObjects(this.enemies),this.addObjects(this.units)};U.inherit(H,i),H.prototype._setupUnitButtons=function(){for(var t=this,e=0,n=G.length;e<n;e++){var i=e%j.length,r=j[i].x,a=j[i].y,s=G[e].buttonImage(),u=G[e].consumedP(),c=function(e){return new F(t,{imageName:s,x:r,y:a,children:[new B(t,{text:u.toString()+"P",textColor:"black",textSize:"18px",textAlign:"center",textFont:"MyFont",lineColor:"white",lineWidth:4,x:r,y:a+35})]}).setMoveOnClick().on("click",function(){t.currentSubScene()instanceof o&&(t._generateUnit(e)&&t.core.audio_loader.playSound("summon_unit"))})}(e);this._unit_buttons.push(c)}},H.prototype._setupPagingButtons=function(){var t=this;this._unit_paging_left_button=new F(this,{imageName:"btn_arrow_l",x:211,y:574}),this._unit_paging_right_button=new F(this,{imageName:"btn_arrow_r",x:801,y:574});var e=function(){t.currentSubScene()instanceof o&&(t._current_paging_position=0===t._current_paging_position?1:0,t._showUnitButtonsInCurrentPage())};this._unit_paging_left_button.setMoveOnClick().on("click",e),this._unit_paging_right_button.setMoveOnClick().on("click",e)},H.prototype._setupSpellCardButton=function(){var t=this;this._spellcard_button=new F(this,{imageName:"btn_spell_off",x:86,y:573.5}).setMoveOnClick().on("click",function(){t.currentSubScene()instanceof o&&t._canSpellCard()&&(t.core.audio_loader.playSound("use_spellcard"),t._useSpellCard())})},H.prototype.init=function(t){i.prototype.init.apply(this,arguments),this.stage_no=t||0,D.DEBUG&&"battle"===D.DEBUG_SCENE&&(this.stage_no=D.DEBUG_STAGE_NO),this.spellcard_anime.init(),this.currentBoss().init(),this._showUnitButtonsInCurrentPage(),this.p_num=D.P_MAX,this.b_num=0,this.enemies.removeAllObject(),this.units.removeAllObject(),this._remaining_timestop_frame=0,this._remaining_time_to_use_timestop_frame=D.TIME_TO_USE_TIMESTOP_FRAME,this._is_show_spellcard_anime=!1,this._current_paging_position=0,this.changeSubScene("ready")},H.prototype._showUnitButtonsInCurrentPage=function(){for(var t=0,e=this._unit_buttons.length;t<e;t++){var n=this._unit_buttons[t],i=j.length*this._current_paging_position,o=j.length*(this._current_paging_position+1)-1;i<=t&&t<=o?n.show():n.hide()}},H.prototype._generateUnit=function(t){var e=new(0,G[t])(this);if(this.p_num<e.consumedP())return!1;this.p_num-=e.consumedP();var n=U.getRandomInt(D.UNIT_GENERATED_AREA_LEFT_X,D.UNIT_GENERATED_AREA_RIGHT_X),i=U.getRandomInt(D.UNIT_GENERATED_AREA_UP_Y,D.UNIT_GENERATED_AREA_DOWN_Y);return e.init(),e.x(n),e.y(i),this.units.addObject(e),this.mission_manager.notifyUnitGenerated(e),!0},H.prototype.currentBoss=function(){return this._bosses[this.stage_no]},H.prototype.destroyBoss=function(){this.currentBoss().reduceHP(this.currentBoss().maxHP())},H.prototype.enableSpellCard=function(){this._remaining_time_to_use_timestop_frame=0},H.prototype._canSpellCard=function(){return 0===this._remaining_time_to_use_timestop_frame},H.prototype._useSpellCard=function(){this._remaining_time_to_use_timestop_frame=D.TIME_TO_USE_TIMESTOP_FRAME,this._is_show_spellcard_anime=!0;var t=this;this.spellcard_anime.playAnimationOnce(function(){t._is_show_spellcard_anime=!1}),this._remaining_timestop_frame=D.TIMESTOP_FRAME,this.mission_manager.notifySpellCardUsed()},H.prototype.generateEnemyGroup=function(t){for(var e=W[t].emergeCoefficient(),n=0;n<e;n++)this.generateEnemy(t)},H.prototype.generateEnemy=function(t){var e=new W[t](this),n=U.getRandomInt(D.ENEMY_GENERATED_AREA_LEFT_X,D.ENEMY_GENERATED_AREA_RIGHT_X),i=U.getRandomInt(D.ENEMY_GENERATED_AREA_UP_Y,D.ENEMY_GENERATED_AREA_DOWN_Y);e.init(),e.x(n),e.y(i),this.enemies.addObject(e)},H.prototype.isTimeStop=function(){return this._remaining_timestop_frame>0},H.prototype.notifyStageClear=function(){this.changeSubScene("result")},H.prototype.notifyGameover=function(){this.currentSubScene()instanceof o&&this.changeSubScene("gameover")},H.prototype.getElapsedSeconds=function(){return this.getSubScene("main").getElapsedSeconds()},H.prototype.getElapsedSecondsText=function(){return this.getSubScene("main").getElapsedSecondsText()},H.prototype.hasNextStage=function(){return!!L[this.stage_no+1]},H.prototype.changeNextStage=function(){this.core.scene_manager.changeScene("battle",this.stage_no+1)},H.prototype.restart=function(){this.core.scene_manager.changeScene("battle",this.stage_no)},H.prototype.update=function(){if(i.prototype.update.apply(this,arguments),this.currentBoss().update(),this.spellcard_anime.update(),this.frame_count%D.FRAME_TO_RECOVER_P==0&&this.p_num<D.P_MAX&&(this.p_num+=1),this._remaining_timestop_frame>0&&this._remaining_timestop_frame--,!this.isTimeStop()&&this._remaining_time_to_use_timestop_frame>0&&this._remaining_time_to_use_timestop_frame--,this._canSpellCard()?this._spellcard_button.imageName("btn_spell_on"):this._spellcard_button.imageName("btn_spell_off"),D.DEBUG&&this.core.input_manager.isLeftClickPush()){var t=this.core.input_manager.mousePositionX(),e=this.core.input_manager.mousePositionY();console.log("x: "+t+", y: "+e)}},H.prototype.draw=function(){var t=this.core.ctx,e=L[this.stage_no],n=this.core.image_loader.getImage(e);t.save(),t.translate(this.width/2,this.height/2),t.drawImage(n,-n.width/2,-n.height/2),t.restore(),t.save(),t.font="36px 'MyFont'",t.textAlign="center",t.textBaseline="middle",t.strokeStyle=U.hexToRGBString("#FFFFFF"),t.lineWidth=4,t.strokeText(this.p_num,639,36),t.fillStyle=U.hexToRGBString("#945ae8"),t.fillText(this.p_num,639,36),t.restore(),t.save(),t.font="36px 'MyFont'",t.textAlign="center",t.textBaseline="middle",t.fillStyle=U.hexToRGBString("#141e46"),t.fillText("/"+D.P_MAX+"P",740,35),t.restore(),this.currentBoss().draw(),i.prototype.draw.apply(this,arguments),this._is_show_spellcard_anime&&this.spellcard_anime.draw()},t.exports=H},function(t,e,n){"use strict";var i=n(21),o=n(0).Util,r=n(70),a=function(t){i.apply(this,arguments),this.opponent_manager=new r(this),this._elapsed_seconds=0,this.addObject(this.opponent_manager)};o.inherit(a,i),a.prototype.init=function(){i.prototype.init.apply(this,arguments),this.current_paging_position=0,this._elapsed_seconds=0},a.prototype.getElapsedSeconds=function(){return this._elapsed_seconds},a.prototype.getElapsedSecondsText=function(){var t=this._elapsed_seconds/60|0;t=("00"+t).slice(-2);var e=this._elapsed_seconds%60;return e=("00"+e).slice(-2),t.toString()+":"+e.toString()},a.prototype.update=function(){i.prototype.update.apply(this,arguments),this.parent.isTimeStop()||this.frame_count%60==0&&this._elapsed_seconds<6e3&&(this._elapsed_seconds++,this.parent.mission_manager.notifySecondsGoneBy())},a.prototype.draw=function(){var t=this.core.ctx;i.prototype.draw.apply(this,arguments),t.save(),t.font="36px 'MyFont'",t.textAlign="center",t.textBaseline="middle",t.fillStyle=o.hexToRGBString("#141e46"),t.fillText(this.getElapsedSecondsText(),73,32),t.restore()},t.exports=a},function(t,e,n){"use strict";var i=n(0).util,o=n(0).Object.Base,r=function(t){o.apply(this,arguments)};i.inherit(r,o),r.prototype.init=function(){o.prototype.init.apply(this,arguments)},r.prototype.update=function(){o.prototype.update.apply(this,arguments);var t=this.scene.parent;if(!t.isTimeStop()){var e=0;if(0===t.stage_no?e=420:1===t.stage_no?e=360:2===t.stage_no?e=300:3===t.stage_no&&(e=240),1===this.frame_count||this.frame_count%e==0){var n=i.getRandomInt(0,7);t.generateEnemyGroup(n)}}},r.prototype.draw=function(){o.prototype.draw.apply(this,arguments)},t.exports=r},function(t,e,n){"use strict";var i=n(21),o=function(t){i.apply(this,arguments)};n(0).Util.inherit(o,i),o.prototype.init=function(){i.prototype.init.apply(this,arguments),this.core.audio_loader.isPlayingBGM("battle")||this.core.audio_loader.playBGM("battle")},o.prototype.update=function(){i.prototype.update.apply(this,arguments),this.frame_count>240&&this.parent.changeSubScene("main")},o.prototype.draw=function(){i.prototype.draw.apply(this,arguments);var t=this.core.ctx;t.save(),t.fillStyle="black",t.font="64px 'MyFont'",t.textAlign="center",60>=this.frame_count&&this.frame_count>0?t.fillText("3",this.width/2,this.height/2):120>=this.frame_count&&this.frame_count>60?t.fillText("2",this.width/2,this.height/2):180>=this.frame_count&&this.frame_count>120?t.fillText("1",this.width/2,this.height/2):240>=this.frame_count&&this.frame_count>180&&t.fillText("Start !!",this.width/2,this.height/2),t.restore()},t.exports=o},function(t,e,n){"use strict";var i=n(21),o=function(t){i.apply(this,arguments),this._t=0};n(0).Util.inherit(o,i),o.prototype.init=function(){i.prototype.init.apply(this,arguments),this._t=0,this.core.audio_loader.stopBGM(),this.core.audio_loader.playSound("gameover01")},o.prototype.update=function(){i.prototype.update.apply(this,arguments),this.frame_count>60&&this._t<=1&&(this._t+=.005),this.core.input_manager.isLeftClickPush()&&this.parent.restart()},o.prototype.draw=function(){i.prototype.draw.apply(this,arguments);var t=this.core.ctx,e=this.core.image_loader.getImage("explosion");t.save(),t.translate(this.width/2,this.height/2),t.drawImage(e,-e.width/2,-e.height/2),t.restore();e=this.core.image_loader.getImage("gameover");t.save(),t.globalAlpha=this._t,t.translate(this.width/2,this.height/2),t.drawImage(e,-e.width/2,-e.height/2),t.restore()},t.exports=o},function(t,e,n){"use strict";var i=n(0).Scene.Base,o=n(0).Util,r=function(t){i.apply(this,arguments),this._status=0,this._frame_y=0,this._is_reverse_frame_y=!1,this._bonuses_current_page=0,this._time_text="",this._score=0,this._bonuses=[]};o.inherit(r,i),r.prototype.init=function(){i.prototype.init.apply(this,arguments),this._status=0,this._frame_y=0,this._is_reverse_frame_y=!1,this._bonuses_current_page=0,this._time_text=this.parent.getElapsedSecondsText(),this._score=this.parent.mission_manager.calcScore(this.parent.getElapsedSeconds()),this._bonuses=this.parent.mission_manager.calcAccomplishedMissions()},r.prototype.update=function(){i.prototype.update.apply(this,arguments),0===this._status&&this.frame_count>60&&(this._status=1),1===this._status?!1===this._is_reverse_frame_y?(this._frame_y+=15,this._frame_y>=this.height/2+50&&(this._is_reverse_frame_y=!0)):(this._frame_y-=5,this._frame_y<this.height/2&&(this._frame_y=this.height/2,this.core.audio_loader.playSound("result"),this._status=2)):2===this._status?7*(this._bonuses_current_page+1)<this._bonuses.length?this.core.input_manager.isLeftClickPush()&&(this.core.audio_loader.playSound("result"),this._bonuses_current_page++):this._status=3:3===this._status&&this.core.input_manager.isLeftClickPush()&&(this.core.addTotalScore(this._score),this.parent.hasNextStage()?this.parent.changeNextStage():this.core.scene_manager.changeScene("scenario_end"))},r.prototype.draw=function(){i.prototype.draw.apply(this,arguments);var t=this.core.ctx;if(0!==this._status){t.save(),t.fillStyle=o.hexToRGBString("#141E46"),t.globalAlpha=.5,t.translate(this.width/2,this.height/2),t.fillRect(-this.width/2,-this.height/2,this.width,this.height),t.restore();var e=this.core.image_loader.getImage("result_frame");t.save(),t.translate(this.width/2,this._frame_y),t.drawImage(e,-e.width/2,-e.height/2),t.restore()}if(0!==this._status&&1!==this._status){t.save(),t.font="32px 'MyFont'",a(t,85,170,"クリア時間 : "+this._time_text),t.restore(),t.save(),t.font="32px 'MyFont'",a(t,85,210,"ボーナス"),t.restore();for(var n=0;n<7;n++){var r=n+7*this._bonuses_current_page,s=this._bonuses[r];s&&(t.save(),t.font="24px 'MyFont'",a(t,120,250+30*n,s.text()+":"),a(t,630,250+30*n,"×"+s.num()+"倍"),t.restore())}t.save(),t.font="36px 'MyFont'",a(t,85,500,"スコア : "+this._score),t.restore()}};var a=function(t,e,n,i){t.strokeStyle="black",t.lineWidth=3,t.strokeText(i,e,n),t.fillStyle="white",t.fillText(i,e,n)};t.exports=r},function(t,e,n){"use strict";var i=n(0).Object.Base,o=function(t){i.apply(this,arguments)};n(0).Util.inherit(o,i),o.prototype.init=function(){i.prototype.init.apply(this,arguments)},o.prototype.update=function(){i.prototype.update.apply(this,arguments)},o.prototype.draw=function(){i.prototype.draw.apply(this,arguments);var t=this.core.ctx,e=this.core.image_loader.getImage("fort");t.save(),t.translate(this.x(),this.y()),t.drawImage(e,-e.width/2,-e.height/2),t.restore()},o.prototype.collisionWidth=function(){return 100},o.prototype.collisionHeight=function(){return 100},t.exports=o},function(t,e,n){"use strict";var i=n(76),o=n(0).Object.Base,r=n(0).Util,a=n(77),s=a.SsImageList,u=a.SsAnimation,c=a.SsSprite,h=function(t){o.apply(this,arguments),this.ss=new c,this.anime_frame=0,this.loop_count=0};r.inherit(h,o),h.prototype.init=function(){o.prototype.init.apply(this,arguments);var t=i;this.imageList=this._getImageList(t[0].images),this.changeAnimation()},h.prototype.changeAnimation=function(){this.anime_frame=0,this.loop_count=0;var t=i;return this._canvas_width=t[0].animation.CanvasWidth,this._canvas_width<t[0].animation.MarginWidth&&(this._canvas_width=t[0].animation.MarginWidth),this._canvas_height=t[0].animation.CanvasHeight,this._canvas_height<t[0].animation.MarginHeight&&(this._canvas_height=t[0].animation.MarginHeight),this.animation=new u(t[0].animation,this.imageList),this.ss.setAnimation(this.animation),this.ss.x=t[0].animation.MarginWidth*this.scaleWidth(),this.ss.y=t[0].animation.MarginHeight*this.scaleHeight(),!0},h.prototype.playAnimationOnce=function(t){var e=this.ss;if(void 0!==t){e.setEndCallBack(function(){e.setEndCallBack(null),t()})}else e.setEndCallBack(null);this.ss.setLoop(1),this.changeAnimation()},h.prototype.playAnimationInfinity=function(){this.ss.setLoop(0),this.changeAnimation()},h.prototype._getImageList=function(t){for(var e=new s([],""),n=0;n<t.length;n++){var i=t[n].split(/(?=\.[^.]+$)/);e.imagePaths[n]=null,e.images[n]=this.core.image_loader.getImage(i[0])}return e},h.prototype.getFrameNo=function(){return Math.floor(this.anime_frame)},h.prototype.update=function(){o.prototype.update.apply(this,arguments),this.ss.rootScaleX=this.scaleWidth(),this.ss.rootScaleY=this.scaleHeight(),this._updateCurrentAnimeFrameNo()},h.prototype.draw=function(){if(o.prototype.draw.apply(this,arguments),this.isShow()){var t=this.core.ctx,e=this.getFrameNo(),n=this._getAnimeImage(e);t.save(),t.translate(this.x(),this.y()),t.drawImage(n,-this.width()/2,-this.height()/2),t.restore()}},h.prototype._updateCurrentAnimeFrameNo=function(){var t=this.ss.inner.animation.getFrameCount();if(0!==t){var e=this.ss.inner.loop;0===e?(this.anime_frame+=this.ss.inner.animation.getFPS()/60,this.anime_frame%=t):this.loop_count<e&&(this.anime_frame+=this.ss.inner.animation.getFPS()/60,this.anime_frame>=t-1&&(this.loop_count++,this.loop_count>=e&&null!=this.ss.inner.endCallBack&&this.ss.inner.endCallBack()),this.anime_frame%=t)}},h.prototype._getAnimeImage=function(t){var e=document.createElement("canvas");e.width=this.width(),e.height=this.height();var n=e.getContext("2d");return this.ss.inner.animation.ssaData.ssa[t]?(this.ss.inner.animation.drawFunc(n,t,this.ss.x,this.ss.y,this.ss.flipH,this.ss.flipV,this.ss.inner.partStates,this.ss.rootScaleX,this.ss.rootScaleY),e):e},h.prototype.width=function(){return this._canvas_width*this.scaleWidth()},h.prototype.height=function(){return this._canvas_height*this.scaleHeight()},h.prototype.isShow=function(){return this.ss.inner.animation.getFrameCount()>0},h.prototype.jsonAnimeMap=function(){return{}},h.prototype.scaleWidth=function(){return 1},h.prototype.scaleHeight=function(){return 1},t.exports=h},function(t){t.exports=[{images:["SS_Battle_spell1.png"],name:"spell_anime_1",animation:{fps:30,CanvasWidth:816,CanvasHeight:624,MarginWidth:416,MarginHeight:320,parts:["root","bg","clock","hari1","hari2","hari3"],ssa:[[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.04],[1,0,0,0,666,666,0,263.200012,1.531526,1.181,1.181,333,333,0,0,.1],[2,0,668,0,57,260,0,263.200012,11.495288,1.181,1.181,29,236,0,0,.1],[3,0,810,0,81,295,1.180089,263.246368,3.447025,1.181,1.181,40,257,0,0,.1],[4,0,727,0,81,347,0,263.200012,7.015288,1.181,1.181,39,308,0,0,.1]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.08],[1,0,0,0,666,666,0,234.399994,1.492257,1.162,1.162,333,333,0,0,.2],[2,0,668,0,57,260,0,234.399994,10.947804,1.162,1.162,29,236,0,0,.2],[3,0,810,0,81,295,1.158418,234.491165,3.228859,1.162,1.162,40,257,0,0,.2],[4,0,727,0,81,347,0,234.399994,6.68274,1.162,1.162,39,308,0,0,.2]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.12],[1,0,0,0,666,666,0,205.599991,1.452987,1.143,1.143,333,333,0,0,.3],[2,0,668,0,57,260,0,205.599991,10.400321,1.143,1.143,29,236,0,0,.3],[3,0,810,0,81,295,1.135077,205.734329,3.010693,1.143,1.143,40,257,0,0,.3],[4,0,727,0,81,347,0,205.599991,6.350192,1.143,1.143,39,308,0,0,.3]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.16],[1,0,0,0,666,666,0,176.800003,1.413717,1.124,1.124,333,333,0,0,.4],[2,0,668,0,57,260,0,176.800003,9.852837,1.124,1.124,29,236,0,0,.4],[3,0,810,0,81,295,1.110162,176.97583,2.792527,1.124,1.124,40,257,0,0,.4],[4,0,727,0,81,347,0,176.800003,6.017644,1.124,1.124,39,308,0,0,.4]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.2],[1,0,0,0,666,666,0,148,1.374447,1.105,1.105,333,333,0,0,.5],[2,0,668,0,57,260,0,148,9.305353,1.105,1.105,29,236,0,0,.5],[3,0,810,0,81,295,1.083768,148.215576,2.574361,1.105,1.105,40,257,0,0,.5],[4,0,727,0,81,347,0,148,5.685096,1.105,1.105,39,308,0,0,.5]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.24],[1,0,0,0,666,666,0,119.199997,1.335177,1.086,1.086,333,333,0,0,.6],[2,0,668,0,57,260,0,119.199997,8.75787,1.086,1.086,29,236,0,0,.6],[3,0,810,0,81,295,1.055994,119.453522,2.356194,1.086,1.086,40,257,0,0,.6],[4,0,727,0,81,347,0,119.199997,5.352548,1.086,1.086,39,308,0,0,.6]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.28],[1,0,0,0,666,666,0,90.400002,1.295907,1.067,1.067,333,333,0,0,.7],[2,0,668,0,57,260,0,90.400002,8.210386,1.067,1.067,29,236,0,0,.7],[3,0,810,0,81,295,1.02694,90.689629,2.138028,1.067,1.067,40,257,0,0,.7],[4,0,727,0,81,347,0,90.400002,5.02,1.067,1.067,39,308,0,0,.7]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.32],[1,0,0,0,666,666,0,61.599998,1.256637,1.048,1.048,333,333,0,0,.8],[2,0,668,0,57,260,0,61.599998,7.662903,1.048,1.048,29,236,0,0,.8],[3,0,810,0,81,295,.996707,61.923847,1.919862,1.048,1.048,40,257,0,0,.8],[4,0,727,0,81,347,0,61.599998,4.687452,1.048,1.048,39,308,0,0,.8]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.36],[1,0,0,0,666,666,0,32.800007,1.217367,1.029,1.029,333,333,0,0,.9],[2,0,668,0,57,260,0,32.800007,7.115419,1.029,1.029,29,236,0,0,.9],[3,0,810,0,81,295,.965399,33.156162,1.701696,1.029,1.029,40,257,0,0,.9],[4,0,727,0,81,347,0,32.800007,4.354904,1.029,1.029,39,308,0,0,.9]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.4],[1,0,0,0,666,666,0,4,1.178097,1.01,1.01,333,333],[2,0,668,0,57,260,0,4,6.567935,1.01,1.01,29,236],[3,0,810,0,81,295,.933118,4.38651,1.48353,1.01,1.01,40,257],[4,0,727,0,81,347,0,4,4.022356,1.01,1.01,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.44],[1,0,0,0,666,666,0,3.6,1.138827,1.009,1.009,333,333],[2,0,668,0,57,260,0,3.6,6.020452,1.009,1.009,29,236],[3,0,810,0,81,295,.916316,4.022428,1.265364,1.009,1.009,40,257],[4,0,727,0,81,347,0,3.6,3.689808,1.009,1.009,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.48],[1,0,0,0,666,666,0,3.2,1.099557,1.008,1.008,333,333],[2,0,668,0,57,260,0,3.2,5.472968,1.008,1.008,29,236],[3,0,810,0,81,295,.898135,3.657623,1.047197,1.008,1.008,40,257],[4,0,727,0,81,347,0,3.2,3.35726,1.008,1.008,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.52],[1,0,0,0,666,666,0,2.8,1.060288,1.007,1.007,333,333],[2,0,668,0,57,260,0,2.8,4.925485,1.007,1.007,29,236],[3,0,810,0,81,295,.878604,3.292042,.829032,1.007,1.007,40,257],[4,0,727,0,81,347,0,2.8,3.024712,1.007,1.007,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.56],[1,0,0,0,666,666,0,2.4,1.021018,1.006,1.006,333,333],[2,0,668,0,57,260,0,2.4,4.378002,1.006,1.006,29,236],[3,0,810,0,81,295,.857756,2.925634,.610865,1.006,1.006,40,257],[4,0,727,0,81,347,0,2.4,2.692163,1.006,1.006,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.6],[1,0,0,0,666,666,0,2,.981748,1.005,1.005,333,333],[2,0,668,0,57,260,0,2,3.830518,1.005,1.005,29,236],[3,0,810,0,81,295,.835627,2.558348,.392699,1.005,1.005,40,257],[4,0,727,0,81,347,0,2,2.359615,1.005,1.005,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.64],[1,0,0,0,666,666,0,1.6,.942478,1.004,1.004,333,333],[2,0,668,0,57,260,0,1.6,3.283034,1.004,1.004,29,236],[3,0,810,0,81,295,.812253,2.190136,.174533,1.004,1.004,40,257],[4,0,727,0,81,347,0,1.6,2.027067,1.004,1.004,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.68],[1,0,0,0,666,666,0,1.2,.903208,1.003,1.003,333,333],[2,0,668,0,57,260,0,1.2,2.73555,1.003,1.003,29,236],[3,0,810,0,81,295,.787673,1.820951,-.043633,1.003,1.003,40,257],[4,0,727,0,81,347,0,1.2,1.694519,1.003,1.003,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.72],[1,0,0,0,666,666,0,.8,.863938,1.002,1.002,333,333],[2,0,668,0,57,260,0,.8,2.188067,1.002,1.002,29,236],[3,0,810,0,81,295,.761927,1.450747,-.261799,1.002,1.002,40,257],[4,0,727,0,81,347,0,.8,1.361971,1.002,1.002,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.76],[1,0,0,0,666,666,0,.4,.824668,1.001,1.001,333,333],[2,0,668,0,57,260,0,.4,1.640584,1.001,1.001,29,236],[3,0,810,0,81,295,.735057,1.07948,-.479966,1.001,1.001,40,257],[4,0,727,0,81,347,0,.4,1.029423,1.001,1.001,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,.785398,1,1,333,333],[2,0,668,0,57,260,0,0,1.0931,1,1,29,236],[3,0,810,0,81,295,.707107,.707107,-.698132,1,1,40,257],[4,0,727,0,81,347,0,0,.696875,1,1,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,.746128,1,1,333,333],[2,0,668,0,57,260,0,0,1.05383,1,1,29,236],[3,0,810,0,81,295,.678801,.734322,-.741765,1,1,40,257],[4,0,727,0,81,347,0,0,.636724,1,1,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,.706858,1,1,333,333],[2,0,668,0,57,260,0,0,1.01456,1,1,29,236],[3,0,810,0,81,295,.649448,.760406,-.785398,1,1,40,257],[4,0,727,0,81,347,0,0,.576573,1,1,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,.667588,1,1,333,333],[2,0,668,0,57,260,0,0,.97529,1,1,29,236],[3,0,810,0,81,295,.619094,.785317,-.829031,1,1,40,257],[4,0,727,0,81,347,0,0,.516422,1,1,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,.628318,1,1,333,333],[2,0,668,0,57,260,0,0,.93602,1,1,29,236],[3,0,810,0,81,295,.587785,.809017,-.872665,1,1,40,257],[4,0,727,0,81,347,0,0,.456271,1,1,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,.589049,1,1,333,333],[2,0,668,0,57,260,0,0,.806203,1,1,29,236],[3,0,810,0,81,295,.55557,.83147,-.916298,1,1,40,257],[4,0,727,0,81,347,0,0,.39612,1,1,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,.549779,1,1,333,333],[2,0,668,0,57,260,0,0,.766933,1,1,29,236],[3,0,810,0,81,295,.522499,.85264,-.959931,1,1,40,257],[4,0,727,0,81,347,0,0,.335969,1,1,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,.510509,1,1,333,333],[2,0,668,0,57,260,0,0,.727663,1,1,29,236],[3,0,810,0,81,295,.488621,.872496,-1.003564,1,1,40,257],[4,0,727,0,81,347,0,0,.275818,1,1,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,.471239,1,1,333,333],[2,0,668,0,57,260,0,0,.688393,1,1,29,236],[3,0,810,0,81,295,.453991,.891007,-1.047198,1,1,40,257],[4,0,727,0,81,347,0,0,.215667,1,1,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,.431969,1,1,333,333],[2,0,668,0,57,260,0,0,.649123,1,1,29,236],[3,0,810,0,81,295,.41866,.908143,-1.090831,1,1,40,257],[4,0,727,0,81,347,0,0,.155516,1,1,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,.392699,1,1,333,333],[2,0,668,0,57,260,0,0,.609853,1,1,29,236],[3,0,810,0,81,295,.382683,.92388,-1.134464,1,1,40,257],[4,0,727,0,81,347,0,0,.095365,1,1,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,.353429,1,1,333,333],[2,0,668,0,57,260,0,0,.570583,1,1,29,236],[3,0,810,0,81,295,.346117,.938191,-1.178097,1,1,40,257],[4,0,727,0,81,347,0,0,.035214,1,1,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,.314159,1,1,333,333],[2,0,668,0,57,260,0,0,.531313,1,1,29,236],[3,0,810,0,81,295,.309017,.951057,-1.22173,1,1,40,257],[4,0,727,0,81,347,0,0,-.024937,1,1,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,.274889,1,1,333,333],[2,0,668,0,57,260,0,0,.492043,1,1,29,236],[3,0,810,0,81,295,.27144,.962455,-1.265364,1,1,40,257],[4,0,727,0,81,347,0,0,-.085088,1,1,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,.235619,1,1,333,333],[2,0,668,0,57,260,0,0,.452773,1,1,29,236],[3,0,810,0,81,295,.233445,.97237,-1.308997,1,1,40,257],[4,0,727,0,81,347,0,0,-.145239,1,1,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,.19635,1,1,333,333],[2,0,668,0,57,260,0,0,.301069,1,1,29,236],[3,0,810,0,81,295,.19509,.980785,-1.35263,1,1,40,257],[4,0,727,0,81,347,0,0,-.20539,1,1,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,.15708,1,1,333,333],[2,0,668,0,57,260,0,0,.261799,1,1,29,236],[3,0,810,0,81,295,.156435,.987688,-1.396263,1,1,40,257],[4,0,727,0,81,347,0,0,-.265541,1,1,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,.11781,1,1,333,333],[2,0,668,0,57,260,0,0,.222529,1,1,29,236],[3,0,810,0,81,295,.117537,.993068,-1.439897,1,1,40,257],[4,0,727,0,81,347,0,0,-.325692,1,1,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,.07854,1,1,333,333],[2,0,668,0,57,260,0,0,.18326,1,1,29,236],[3,0,810,0,81,295,.078459,.996917,-1.48353,1,1,40,257],[4,0,727,0,81,347,0,0,-.385843,1,1,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,.03927,1,1,333,333],[2,0,668,0,57,260,0,0,.14399,1,1,29,236],[3,0,810,0,81,295,.03926,.999229,-1.527163,1,1,40,257],[4,0,727,0,81,347,0,0,-.445994,1,1,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,0,1,1,333,333],[2,0,668,0,57,260,0,0,.10472,1,1,29,236],[3,0,810,0,81,295,0,1,-1.570796,1,1,40,257],[4,0,727,0,81,347,0,0,-.506145,1,1,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,0,1,1,333,333],[2,0,668,0,57,260,0,0,.10472,1,1,29,236],[3,0,810,0,81,295,0,1,-1.570796,1,1,40,257],[4,0,727,0,81,347,0,0,-.506145,1,1,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,0,1,1,333,333],[2,0,668,0,57,260,0,0,.10472,1,1,29,236],[3,0,810,0,81,295,0,1,-1.570796,1,1,40,257],[4,0,727,0,81,347,0,0,-.506145,1,1,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,0,1,1,333,333],[2,0,668,0,57,260,0,0,.10472,1,1,29,236],[3,0,810,0,81,295,0,1,-1.570796,1,1,40,257],[4,0,727,0,81,347,0,0,-.506145,1,1,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,0,1,1,333,333],[2,0,668,0,57,260,0,0,.10472,1,1,29,236],[3,0,810,0,81,295,0,1,-1.570796,1,1,40,257],[4,0,727,0,81,347,0,0,-.506145,1,1,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,0,1,1,333,333],[2,0,668,0,57,260,0,0,.10472,1,1,29,236],[3,0,810,0,81,295,0,1,-1.570796,1,1,40,257],[4,0,727,0,81,347,0,0,-.506145,1,1,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,0,1,1,333,333],[2,0,668,0,57,260,0,0,.10472,1,1,29,236],[3,0,810,0,81,295,0,1,-1.570796,1,1,40,257],[4,0,727,0,81,347,0,0,-.506145,1,1,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,0,1,1,333,333],[2,0,668,0,57,260,0,0,.10472,1,1,29,236],[3,0,810,0,81,295,0,1,-1.570796,1,1,40,257],[4,0,727,0,81,347,0,0,-.506145,1,1,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,0,1,1,333,333],[2,0,668,0,57,260,0,0,.10472,1,1,29,236],[3,0,810,0,81,295,0,1,-1.570796,1,1,40,257],[4,0,727,0,81,347,0,0,-.506145,1,1,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,0,1,1,333,333],[2,0,668,0,57,260,0,0,.10472,1,1,29,236],[3,0,810,0,81,295,0,1,-1.570796,1,1,40,257],[4,0,727,0,81,347,0,0,-.506145,1,1,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,0,1,1,333,333],[2,0,668,0,57,260,0,0,.10472,1,1,29,236],[3,0,810,0,81,295,0,1,-1.570796,1,1,40,257],[4,0,727,0,81,347,0,0,-.506145,1,1,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,0,1,1,333,333],[2,0,668,0,57,260,0,0,.10472,1,1,29,236],[3,0,810,0,81,295,0,1,-1.570796,1,1,40,257],[4,0,727,0,81,347,0,0,-.506145,1,1,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,0,1,1,333,333],[2,0,668,0,57,260,0,0,.10472,1,1,29,236],[3,0,810,0,81,295,0,1,-1.570796,1,1,40,257],[4,0,727,0,81,347,0,0,-.506145,1,1,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,0,1,1,333,333],[2,0,668,0,57,260,0,0,.10472,1,1,29,236],[3,0,810,0,81,295,0,1,-1.570796,1,1,40,257],[4,0,727,0,81,347,0,0,-.506145,1,1,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,0,1.028571,1.028571,333,333],[2,0,668,0,57,260,0,0,.05236,1.028571,1.028571,29,236],[3,0,810,0,81,295,0,1.028571,-1.570796,1.028571,1.028571,40,257],[4,0,727,0,81,347,0,0,-.506145,1.028571,1.028571,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,0,1.057143,1.057143,333,333],[2,0,668,0,57,260,0,0,0,1.057143,1.057143,29,236],[3,0,810,0,81,295,0,1.057143,-1.570796,1.057143,1.057143,40,257],[4,0,727,0,81,347,0,0,-.506145,1.057143,1.057143,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,0,1.085714,1.085714,333,333],[2,0,668,0,57,260,0,0,0,1.085714,1.085714,29,236],[3,0,810,0,81,295,0,1.085714,-1.570796,1.085714,1.085714,40,257],[4,0,727,0,81,347,0,0,-.506145,1.085714,1.085714,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,0,1.114286,1.114286,333,333],[2,0,668,0,57,260,0,0,0,1.114286,1.114286,29,236],[3,0,810,0,81,295,0,1.114286,-1.570796,1.114286,1.114286,40,257],[4,0,727,0,81,347,0,0,-.506145,1.114286,1.114286,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,0,1.142857,1.142857,333,333],[2,0,668,0,57,260,0,0,0,1.142857,1.142857,29,236],[3,0,810,0,81,295,0,1.142857,-1.570796,1.142857,1.142857,40,257],[4,0,727,0,81,347,0,0,-.506145,1.142857,1.142857,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,0,1.171429,1.171429,333,333],[2,0,668,0,57,260,0,0,0,1.171429,1.171429,29,236],[3,0,810,0,81,295,0,1.171429,-1.570796,1.171429,1.171429,40,257],[4,0,727,0,81,347,0,0,-.506145,1.171429,1.171429,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,0,1.2,1.2,333,333],[2,0,668,0,57,260,0,0,0,1.2,1.2,29,236],[3,0,810,0,81,295,0,1.2,-1.570796,1.2,1.2,40,257],[4,0,727,0,81,347,0,0,-.506145,1.2,1.2,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,0,1.20069,1.20069,333,333],[2,0,668,0,57,260,0,0,0,1.20069,1.20069,29,236],[3,0,810,0,81,295,0,1.20069,-1.570796,1.20069,1.20069,40,257],[4,0,727,0,81,347,0,0,-.506145,1.20069,1.20069,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,0,1.201379,1.201379,333,333],[2,0,668,0,57,260,0,0,0,1.201379,1.201379,29,236],[3,0,810,0,81,295,0,1.201379,-1.570796,1.201379,1.201379,40,257],[4,0,727,0,81,347,0,0,-.506145,1.201379,1.201379,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,0,1.202069,1.202069,333,333],[2,0,668,0,57,260,0,0,0,1.202069,1.202069,29,236],[3,0,810,0,81,295,0,1.202069,-1.570796,1.202069,1.202069,40,257],[4,0,727,0,81,347,0,0,-.506145,1.202069,1.202069,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,0,1.202759,1.202759,333,333],[2,0,668,0,57,260,0,0,0,1.202759,1.202759,29,236],[3,0,810,0,81,295,0,1.202759,-1.570796,1.202759,1.202759,40,257],[4,0,727,0,81,347,0,0,-.506145,1.202759,1.202759,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,0,1.203448,1.203448,333,333],[2,0,668,0,57,260,0,0,0,1.203448,1.203448,29,236],[3,0,810,0,81,295,0,1.203448,-1.570796,1.203448,1.203448,40,257],[4,0,727,0,81,347,0,0,-.506145,1.203448,1.203448,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,0,1.204138,1.204138,333,333],[2,0,668,0,57,260,0,0,0,1.204138,1.204138,29,236],[3,0,810,0,81,295,0,1.204138,-1.570796,1.204138,1.204138,40,257],[4,0,727,0,81,347,0,0,-.506145,1.204138,1.204138,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,0,1.204828,1.204828,333,333],[2,0,668,0,57,260,0,0,0,1.204828,1.204828,29,236],[3,0,810,0,81,295,0,1.204828,-1.570796,1.204828,1.204828,40,257],[4,0,727,0,81,347,0,0,-.506145,1.204828,1.204828,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,0,1.205517,1.205517,333,333],[2,0,668,0,57,260,0,0,0,1.205517,1.205517,29,236],[3,0,810,0,81,295,0,1.205517,-1.570796,1.205517,1.205517,40,257],[4,0,727,0,81,347,0,0,-.506145,1.205517,1.205517,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,0,1.206207,1.206207,333,333],[2,0,668,0,57,260,0,0,0,1.206207,1.206207,29,236],[3,0,810,0,81,295,0,1.206207,-1.570796,1.206207,1.206207,40,257],[4,0,727,0,81,347,0,0,-.506145,1.206207,1.206207,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,0,1.206897,1.206897,333,333],[2,0,668,0,57,260,0,0,0,1.206897,1.206897,29,236],[3,0,810,0,81,295,0,1.206897,-1.570796,1.206897,1.206897,40,257],[4,0,727,0,81,347,0,0,-.506145,1.206897,1.206897,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,0,1.207586,1.207586,333,333],[2,0,668,0,57,260,0,0,0,1.207586,1.207586,29,236],[3,0,810,0,81,295,0,1.207586,-1.570796,1.207586,1.207586,40,257],[4,0,727,0,81,347,0,0,-.506145,1.207586,1.207586,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,0,1.208276,1.208276,333,333],[2,0,668,0,57,260,0,0,0,1.208276,1.208276,29,236],[3,0,810,0,81,295,0,1.208276,-1.570796,1.208276,1.208276,40,257],[4,0,727,0,81,347,0,0,-.506145,1.208276,1.208276,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,0,1.208966,1.208966,333,333],[2,0,668,0,57,260,0,0,0,1.208966,1.208966,29,236],[3,0,810,0,81,295,0,1.208966,-1.570796,1.208966,1.208966,40,257],[4,0,727,0,81,347,0,0,-.506145,1.208966,1.208966,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,0,1.209655,1.209655,333,333],[2,0,668,0,57,260,0,0,0,1.209655,1.209655,29,236],[3,0,810,0,81,295,0,1.209655,-1.570796,1.209655,1.209655,40,257],[4,0,727,0,81,347,0,0,-.506145,1.209655,1.209655,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,0,1.210345,1.210345,333,333],[2,0,668,0,57,260,0,0,0,1.210345,1.210345,29,236],[3,0,810,0,81,295,0,1.210345,-1.570796,1.210345,1.210345,40,257],[4,0,727,0,81,347,0,0,-.506145,1.210345,1.210345,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,0,1.211035,1.211035,333,333],[2,0,668,0,57,260,0,0,0,1.211035,1.211035,29,236],[3,0,810,0,81,295,0,1.211035,-1.570796,1.211035,1.211035,40,257],[4,0,727,0,81,347,0,0,-.506145,1.211035,1.211035,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,0,1.211724,1.211724,333,333],[2,0,668,0,57,260,0,0,0,1.211724,1.211724,29,236],[3,0,810,0,81,295,0,1.211724,-1.570796,1.211724,1.211724,40,257],[4,0,727,0,81,347,0,0,-.506145,1.211724,1.211724,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,0,1.212414,1.212414,333,333],[2,0,668,0,57,260,0,0,0,1.212414,1.212414,29,236],[3,0,810,0,81,295,0,1.212414,-1.570796,1.212414,1.212414,40,257],[4,0,727,0,81,347,0,0,-.506145,1.212414,1.212414,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,0,1.213104,1.213104,333,333],[2,0,668,0,57,260,0,0,0,1.213104,1.213104,29,236],[3,0,810,0,81,295,0,1.213104,-1.570796,1.213104,1.213104,40,257],[4,0,727,0,81,347,0,0,-.506145,1.213104,1.213104,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.8],[1,0,0,0,666,666,0,0,0,1.213793,1.213793,333,333],[2,0,668,0,57,260,0,0,0,1.213793,1.213793,29,236],[3,0,810,0,81,295,0,1.213793,-1.570796,1.213793,1.213793,40,257],[4,0,727,0,81,347,0,0,-.506145,1.213793,1.213793,39,308]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.711111],[1,0,0,0,666,666,0,0,0,1.214483,1.214483,333,333,0,0,.888889],[2,0,668,0,57,260,0,0,0,1.214483,1.214483,29,236,0,0,.888889],[3,0,810,0,81,295,0,1.214483,-1.570796,1.214483,1.214483,40,257,0,0,.888889],[4,0,727,0,81,347,0,0,-.506145,1.214483,1.214483,39,308,0,0,.888889]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.622222],[1,0,0,0,666,666,0,0,0,1.215172,1.215172,333,333,0,0,.777778],[2,0,668,0,57,260,0,0,0,1.215172,1.215172,29,236,0,0,.777778],[3,0,810,0,81,295,0,1.215172,-1.570796,1.215172,1.215172,40,257,0,0,.777778],[4,0,727,0,81,347,0,0,-.506145,1.215172,1.215172,39,308,0,0,.777778]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.533333],[1,0,0,0,666,666,0,0,0,1.215862,1.215862,333,333,0,0,.666667],[2,0,668,0,57,260,0,0,0,1.215862,1.215862,29,236,0,0,.666667],[3,0,810,0,81,295,0,1.215862,-1.570796,1.215862,1.215862,40,257,0,0,.666667],[4,0,727,0,81,347,0,0,-.506145,1.215862,1.215862,39,308,0,0,.666667]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.444444],[1,0,0,0,666,666,0,0,0,1.216552,1.216552,333,333,0,0,.555556],[2,0,668,0,57,260,0,0,0,1.216552,1.216552,29,236,0,0,.555556],[3,0,810,0,81,295,0,1.216552,-1.570796,1.216552,1.216552,40,257,0,0,.555556],[4,0,727,0,81,347,0,0,-.506145,1.216552,1.216552,39,308,0,0,.555556]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.355556],[1,0,0,0,666,666,0,0,0,1.217241,1.217241,333,333,0,0,.444444],[2,0,668,0,57,260,0,0,0,1.217241,1.217241,29,236,0,0,.444444],[3,0,810,0,81,295,0,1.217241,-1.570796,1.217241,1.217241,40,257,0,0,.444444],[4,0,727,0,81,347,0,0,-.506145,1.217241,1.217241,39,308,0,0,.444444]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.266667],[1,0,0,0,666,666,0,0,0,1.217931,1.217931,333,333,0,0,.333333],[2,0,668,0,57,260,0,0,0,1.217931,1.217931,29,236,0,0,.333333],[3,0,810,0,81,295,0,1.217931,-1.570796,1.217931,1.217931,40,257,0,0,.333333],[4,0,727,0,81,347,0,0,-.506145,1.217931,1.217931,39,308,0,0,.333333]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.177778],[1,0,0,0,666,666,0,0,0,1.218621,1.218621,333,333,0,0,.222222],[2,0,668,0,57,260,0,0,0,1.218621,1.218621,29,236,0,0,.222222],[3,0,810,0,81,295,0,1.218621,-1.570796,1.218621,1.218621,40,257,0,0,.222222],[4,0,727,0,81,347,0,0,-.506145,1.218621,1.218621,39,308,0,0,.222222]],[[0,0,924,0,100,100,0,0,0,8.36,6.42,50,50,0,0,.088889],[1,0,0,0,666,666,0,0,0,1.21931,1.21931,333,333,0,0,.111111],[2,0,668,0,57,260,0,0,0,1.21931,1.21931,29,236,0,0,.111111],[3,0,810,0,81,295,0,1.21931,-1.570796,1.21931,1.21931,40,257,0,0,.111111],[4,0,727,0,81,347,0,0,-.506145,1.21931,1.21931,39,308,0,0,.111111]]]}}]},function(t,e,n){"use strict";function i(t,e,n,i){this.fileRoot=e,this.imagePaths=new Array,this.images=new Array,this.onLoad=i,this.onLoad_=function(){for(var t in this.images)if(null!=t&&0==t.complete)return;null!=this.onLoad&&this.onLoad()};for(var o=0;o<t.length;o++){var r=this.fileRoot+t[o];this.imagePaths.push(r);var a=new Image;n&&(a.onload=this.onLoad_,a.src=r),this.images.push(a)}}function o(t){this.name=t,this.x=0,this.y=0}function r(t,e){this.ssaData=t,this.imageList=e,this.partsMap=new Array,this.parts=t.parts;for(var n=0;n<this.parts.length;n++)this.partsMap[this.parts[n]]=n}function a(t){this.inner={animation:t,playingFrame:0,prevDrawnTime:0,step:1,loop:0,loopCount:0,endCallBack:null,partStates:null,initPartStates:function(){if(this.partStates=null,null!=this.animation){for(var t=this.animation.getParts(),e=new Array,n=0;n<t.length;n++)e.push(new o(t[n]));this.partStates=e}}},this.inner.initPartStates()}i.prototype.getImage=function(t){return t<0||t>=this.images.length?null:this.images[t]},i.prototype.setImage=function(t,e){if(t<0||t>=this.images.length)return null;this.imagePaths[t]=this.fileRoot+e,this.images[t].onload=this.onLoad_,this.images[t].src=this.imagePaths[t]},i.prototype.setOnLoad=function(t){this.onLoad=t},r.prototype.getFPS=function(){return this.ssaData.fps},r.prototype.getFrameCount=function(){return this.ssaData.ssa.length},r.prototype.getParts=function(){return this.ssaData.parts},r.prototype.getPartsMap=function(){return this.partsMap},r.prototype.drawFunc=function(t,e,n,i,o,r,a,s,u){for(var c=new Array("source-over","source-over","lighter","source-over"),h=this.ssaData.ssa[e],p=0;p<h.length;p++){var _=h[p],l=_.length,d=_[0],f=this.imageList.getImage(_[1]),m=_[2],y=_[3],g=_[4],b=_[5],v=_[6]*s,w=_[7]*u,k=g,x=b;if(v+=n,w+=i,g>0&&b>0){var S=_[8],M=_[9],E=_[10],I=l>11?_[11]:0,T=l>12?_[12]:0,A=l>13&&0!=_[13]?-1:1,C=l>14&&0!=_[14]?-1:1,P=l>15?_[15]:1,R=l>16?_[16]:0;t.globalCompositeOperation=c[R],t.globalAlpha=P,t.setTransform(1*s,0,0,1*u,v,w),t.rotate(-S),t.scale(M,E),t.translate(k/2-I,x/2-T),t.scale(A,C),t.drawImage(f,m,y,g,b,-k/2,-x/2,k,x)}var F=a[d];F.x=v,F.y=w}},a.prototype.x=0,a.prototype.y=0,a.prototype.flipH=!1,a.prototype.flipV=!1,a.prototype.rootScaleX=1,a.prototype.rootScaleY=1,a.prototype.setAnimation=function(t){this.inner.animation=t,this.inner.initPartStates(),this.inner.playingFrame=0,this.inner.prevDrawnTime=0,this.clearLoopCount()},a.prototype.getAnimation=function(){return this.inner.animation},a.prototype.setFrameNo=function(t){this.inner.playingFrame=t,this.inner.prevDrawnTime=0},a.prototype.getFrameNo=function(){return this.inner.playingFrame>>0},a.prototype.setStep=function(t){this.inner.step=t},a.prototype.getStep=function(){return this.inner.step},a.prototype.setLoop=function(t){t<0||(this.inner.loop=t)},a.prototype.getLoop=function(){return this.inner.loop},a.prototype.getLoopCount=function(){return this.inner.loopCount},a.prototype.clearLoopCount=function(){this.inner.loopCount=0},a.prototype.setEndCallBack=function(t){this.inner.endCallBack=t},a.prototype.getPartState=function(t){if(null==this.inner.partStates)return null;var e=this.inner.animation.getPartsMap()[t];return null==e?null:this.inner.partStates[e]},a.prototype.draw=function(t,e){if(null!=this.inner.animation){if((0==this.inner.loop||this.inner.loop>this.inner.loopCount)&&this.inner.prevDrawnTime>0){var n=(e-this.inner.prevDrawnTime)/(1e3/this.inner.animation.getFPS());this.inner.playingFrame+=n*this.inner.step;var i=this.inner.playingFrame/this.inner.animation.getFrameCount()>>0;this.inner.step>=0?this.inner.playingFrame>=this.inner.animation.getFrameCount()&&(this.inner.loopCount+=i,0==this.inner.loop||this.inner.loopCount<this.inner.loop?this.inner.playingFrame%=this.inner.animation.getFrameCount():(this.inner.playingFrame=this.inner.animation.getFrameCount()-1,null!=this.inner.endCallBack&&this.inner.endCallBack())):this.inner.playingFrame<0&&(this.inner.loopCount+=1-i,0==this.inner.loop||this.inner.loopCount<this.inner.loop?(this.inner.playingFrame%=this.inner.animation.getFrameCount(),this.inner.playingFrame<0&&(this.inner.playingFrame+=this.inner.animation.getFrameCount())):(this.inner.playingFrame=0,null!=this.inner.endCallBack&&this.inner.endCallBack()))}this.inner.prevDrawnTime=e,this.inner.animation.drawFunc(t,this.getFrameNo(),this.x,this.y,this.flipH,this.flipV,this.inner.partStates,this.rootScaleX,this.rootScaleY)}},t.exports={SsImageList:i,SsAnimation:r,SsSprite:a}},function(t,e,n){"use strict";var i=n(0).Util,o=n(0).Object.Base,r=n(2),a={0:function(t,e){return t.killed_enemy_num_all>=e[0]},1:function(t,e){var n=0;for(var i in t.killed_enemy_num_per_unit_type){var o=t.killed_enemy_num_per_unit_type[i]||0;o>=n&&(n=o)}return n>=e[0]},2:function(t,e){return t.unit_died_num>=e[0]},3:function(t,e){return t.elapsed_time<=e[0]},4:function(t,e){return 0===t.unit_died_num},5:function(t,e){return 0===t.used_spellcard_num},6:function(t,e){if(0===(t.used_unit_num_per_unit_type[e[0]]||0))return!1;for(var n in t.used_unit_num_per_unit_type){if(n!==String(e[0]))if((t.used_unit_num_per_unit_type[n]||0)>0)return!1}return!0},7:function(t,e){return(t.used_unit_num_per_unit_type[e[0]]||0)>=e[1]}},s=[{name:"まずは抱えボムをなくせ",category:2,bonus:2,parameters:[20]},{name:"なんてこった！咲夜がピチュっちゃった！",category:2,bonus:3,parameters:[10]},{name:"紅魔館は燃えているか",category:2,bonus:4,parameters:[5]},{name:"私の屍を越えてゆけ",category:2,bonus:5,parameters:[3]},{name:"散弾ではなぁ！",category:7,bonus:2,parameters:[r.UNIT_TYPE_BAZOOKA,1]},{name:"マグネット・コーティング",category:7,bonus:3,parameters:[r.UNIT_TYPE_BAZOOKA,5]},{name:"君は刻の涙を見る",category:7,bonus:4,parameters:[r.UNIT_TYPE_BAZOOKA,10]},{name:"こんなにうれしいことはない",category:7,bonus:5,parameters:[r.UNIT_TYPE_BAZOOKA,20]},{name:"ムー大陸に投稿",category:7,bonus:2,parameters:[r.UNIT_TYPE_TUPAI,1]},{name:"出た！？出っ歯の妖怪",category:7,bonus:3,parameters:[r.UNIT_TYPE_TUPAI,5]},{name:"遊星からの吸血鬼X",category:7,bonus:4,parameters:[r.UNIT_TYPE_TUPAI,10]},{name:"ばちこん☆",category:7,bonus:5,parameters:[r.UNIT_TYPE_TUPAI,20]},{name:"赤いマフラー",category:7,bonus:2,parameters:[r.UNIT_TYPE_YOYOMU,1]},{name:"春を求めて",category:7,bonus:3,parameters:[r.UNIT_TYPE_YOYOMU,5]},{name:"ファンタズム",category:7,bonus:4,parameters:[r.UNIT_TYPE_YOYOMU,10]},{name:"パーフェクトチェリーブロッサム",category:7,bonus:5,parameters:[r.UNIT_TYPE_YOYOMU,20]},{name:"パチュリーのへそくり",category:7,bonus:2,parameters:[r.UNIT_TYPE_MANDORAGORA,1]},{name:"耳を塞げ",category:7,bonus:3,parameters:[r.UNIT_TYPE_MANDORAGORA,5]},{name:"うちの地元じゃマンドレイク",category:7,bonus:4,parameters:[r.UNIT_TYPE_MANDORAGORA,10]},{name:"お薬増やしましょう",category:7,bonus:5,parameters:[r.UNIT_TYPE_MANDORAGORA,20]},{name:"青色の紅茶",category:7,bonus:2,parameters:[r.UNIT_TYPE_TEA,1]},{name:"スコーンはまだ？",category:7,bonus:3,parameters:[r.UNIT_TYPE_TEA,5]},{name:"七色の紅茶",category:7,bonus:4,parameters:[r.UNIT_TYPE_TEA,10]},{name:"メイド、図書館、永遠に",category:7,bonus:5,parameters:[r.UNIT_TYPE_TEA,20]},{name:"タネなし手品",category:7,bonus:2,parameters:[r.UNIT_TYPE_MAGICIAN,1]},{name:"フーディーニ再臨",category:7,bonus:3,parameters:[r.UNIT_TYPE_MAGICIAN,5]},{name:"ハンドパワ～～",category:7,bonus:4,parameters:[r.UNIT_TYPE_MAGICIAN,10]},{name:"メンタリズムではありません",category:7,bonus:5,parameters:[r.UNIT_TYPE_MAGICIAN,20]},{name:"いつもの",category:7,bonus:2,parameters:[r.UNIT_TYPE_NORMAL1,1]},{name:"原作のような安心感",category:7,bonus:3,parameters:[r.UNIT_TYPE_NORMAL1,10]},{name:"月面人説",category:7,bonus:4,parameters:[r.UNIT_TYPE_NORMAL1,20]},{name:"吸血鬼ハンター説",category:7,bonus:5,parameters:[r.UNIT_TYPE_NORMAL1,40]},{name:"なんか書いとけ",category:7,bonus:2,parameters:[r.UNIT_TYPE_NORMAL2,1]},{name:"射幸心を煽るメッセージを挿入",category:7,bonus:3,parameters:[r.UNIT_TYPE_NORMAL2,8]},{name:"なんか書いとけ",category:7,bonus:4,parameters:[r.UNIT_TYPE_NORMAL2,15]},{name:"sm7905073",category:7,bonus:5,parameters:[r.UNIT_TYPE_NORMAL2,30]},{name:"モデリング：ゆたろう",category:7,bonus:2,parameters:[r.UNIT_TYPE_MMD,10]},{name:"good apple",category:7,bonus:3,parameters:[r.UNIT_TYPE_MMD,50]},{name:"細かすぎて伝わらない",category:7,bonus:4,parameters:[r.UNIT_TYPE_MMD,80]},{name:"紳士の社交場",category:7,bonus:5,parameters:[r.UNIT_TYPE_MMD,150]},{name:"めーさく劇場",category:7,bonus:2,parameters:[r.UNIT_TYPE_MEISAKU,1]},{name:"日本めーさく劇場",category:7,bonus:3,parameters:[r.UNIT_TYPE_MEISAKU,5]},{name:"世界めーさく劇場",category:7,bonus:4,parameters:[r.UNIT_TYPE_MEISAKU,10]},{name:"さくめーもいいぞ。",category:7,bonus:5,parameters:[r.UNIT_TYPE_MEISAKU,20]},{name:"地元じゃ負け知らず",category:1,bonus:2,parameters:[3]},{name:"ワンマンアーミー",category:1,bonus:3,parameters:[5]},{name:"お主こそ万夫不当の豪傑よ",category:1,bonus:4,parameters:[10]},{name:"完全で瀟洒な従者",category:1,bonus:5,parameters:[20]},{name:"新春かくし芸大会",category:6,bonus:5,parameters:[r.UNIT_TYPE_MAGICIAN]},{name:"畑泥棒対策",category:6,bonus:5,parameters:[r.UNIT_TYPE_MANDORAGORA]},{name:"もはやUMAに非ず",category:6,bonus:5,parameters:[r.UNIT_TYPE_TUPAI]},{name:"忍者は何人じゃ？",category:6,bonus:5,parameters:[r.UNIT_TYPE_YOYOMU]},{name:"原理としては別時間の自分を云々",category:6,bonus:5,parameters:[r.UNIT_TYPE_NORMAL2]},{name:"それがドリームチームだ",category:6,bonus:5,parameters:[r.UNIT_TYPE_NORMAL1]},{name:"MMD合作",category:6,bonus:5,parameters:[r.UNIT_TYPE_MMD]},{name:"名将の采配",category:4,bonus:5,parameters:[]},{name:"あー忙しい忙しい！",category:3,bonus:2,parameters:[60]},{name:"お掃除が終わらないじゃない",category:3,bonus:3,parameters:[45]},{name:"幻想郷最速？",category:3,bonus:4,parameters:[30]},{name:"光速より速く動ける",category:3,bonus:5,parameters:[20]},{name:"タイムストッパない咲夜",category:5,bonus:3,parameters:[]},{name:"妖精キラー",category:0,bonus:2,parameters:[15]},{name:"妖精バスター",category:0,bonus:3,parameters:[30]},{name:"世紀末覇者",category:0,bonus:4,parameters:[50]},{name:"いったい何の恨みがあって……",category:0,bonus:5,parameters:[100]}],u=function(t){o.apply(this,arguments),this.unit_died_num=0,this.killed_enemy_num_all=0,this.killed_enemy_num_per_unit_type={},this.used_unit_num_per_unit_type={},this.unit_died_num=0,this.elapsed_time=0,this.used_spellcard_num=0,this._cached_accomplished_missions=[],this._is_cache_need_recalculation=!0};i.inherit(u,o),u.prototype.init=function(){o.prototype.init.apply(this,arguments),this.unit_died_num=0,this.killed_enemy_num_all=0,this.killed_enemy_num_per_unit_type={},this.used_unit_num_per_unit_type={},this.unit_died_num=0,this.elapsed_time=0,this.used_spellcard_num=0,this._cached_accomplished_missions=[],this._is_cache_need_recalculation=!0},u.prototype.notifyUnitDied=function(){this._is_cache_need_recalculation=!0,this.unit_died_num++},u.prototype.notifyUnitGenerated=function(t){this._is_cache_need_recalculation=!0,t.type()in this.used_unit_num_per_unit_type?this.used_unit_num_per_unit_type[t.type()]++:this.used_unit_num_per_unit_type[t.type()]=1},u.prototype.notifyEnemyKilled=function(t,e){this._is_cache_need_recalculation=!0,this.killed_enemy_num_all++,t.type()in this.killed_enemy_num_per_unit_type?this.killed_enemy_num_per_unit_type[t.type()]++:this.killed_enemy_num_per_unit_type[t.type()]=1},u.prototype.notifySpellCardUsed=function(){this._is_cache_need_recalculation=!0,this.used_spellcard_num++},u.prototype.notifySecondsGoneBy=function(){this._is_cache_need_recalculation=!0,this.elapsed_time++},u.prototype.calcAccomplishedMissions=function(){if(!this._is_cache_need_recalculation)return this._cached_accomplished_missions;this._cached_accomplished_missions=[];for(var t=0;t<s.length;t++){var e=s[t].name,n=s[t].category,i=s[t].bonus,o=s[t].parameters,r=a[n];if(!(n in a))throw new Error("Can't find category: "+n);if(r(this,o)){var u=new c(this.scene);u.text(e),u.num(i),this._cached_accomplished_missions.push(u)}}return this._is_cache_need_recalculation=!1,this._cached_accomplished_missions},u.prototype.calcScore=function(t){for(var e=1,n=this.calcAccomplishedMissions(),i=0;i<n.length;i++)e+=n[i].num();return 951*(6e3-t)*e};var c=function(t){o.apply(this,arguments)};i.inherit(c,o),i.defineProperty(o,"text"),i.defineProperty(o,"num"),t.exports=u},function(t,e,n){"use strict";var i=n(12),o=function(t){i.apply(this,arguments)};n(0).Util.inherit(o,i),o.prototype.init=function(){i.prototype.init.apply(this,arguments)},o.prototype.update=function(){i.prototype.update.apply(this,arguments)},o.prototype.draw=function(){i.prototype.draw.apply(this,arguments)},o.prototype.collisionWidth=function(){return 150},o.prototype.collisionHeight=function(){return 180},o.prototype.maxHP=function(){return 1200},o.prototype.normalImage=function(){return"boss_clownpiece_normal"},o.prototype.damageImage=function(){return"boss_clownpiece_damage"},t.exports=o},function(t,e,n){"use strict";var i=n(12),o=function(t){i.apply(this,arguments)};n(0).Util.inherit(o,i),o.prototype.init=function(){i.prototype.init.apply(this,arguments)},o.prototype.update=function(){i.prototype.update.apply(this,arguments)},o.prototype.draw=function(){i.prototype.draw.apply(this,arguments)},o.prototype.collisionWidth=function(){return 150},o.prototype.collisionHeight=function(){return 180},o.prototype.maxHP=function(){return 900},o.prototype.normalImage=function(){return"boss_lunachild_normal"},o.prototype.damageImage=function(){return"boss_lunachild_damage"},t.exports=o},function(t,e,n){"use strict";var i=n(12),o=function(t){i.apply(this,arguments)};n(0).Util.inherit(o,i),o.prototype.init=function(){i.prototype.init.apply(this,arguments)},o.prototype.update=function(){i.prototype.update.apply(this,arguments)},o.prototype.draw=function(){i.prototype.draw.apply(this,arguments)},o.prototype.collisionWidth=function(){return 150},o.prototype.collisionHeight=function(){return 180},o.prototype.maxHP=function(){return 900},o.prototype.normalImage=function(){return"boss_starsapphire_normal"},o.prototype.damageImage=function(){return"boss_starsapphire_damage"},t.exports=o},function(t,e,n){"use strict";var i=n(12),o=function(t){i.apply(this,arguments)};n(0).Util.inherit(o,i),o.prototype.init=function(){i.prototype.init.apply(this,arguments)},o.prototype.update=function(){i.prototype.update.apply(this,arguments)},o.prototype.draw=function(){i.prototype.draw.apply(this,arguments)},o.prototype.collisionWidth=function(){return 150},o.prototype.collisionHeight=function(){return 180},o.prototype.maxHP=function(){return 900},o.prototype.normalImage=function(){return"boss_sunnymilk_normal"},o.prototype.damageImage=function(){return"boss_sunnymilk_damage"},t.exports=o},function(t,e,n){"use strict";var i=n(3),o=n(0).Util,r=n(2),a=function(t){i.apply(this,arguments)};o.inherit(a,i),a.prototype.init=function(){i.prototype.init.apply(this,arguments)},a.prototype.update=function(){i.prototype.update.apply(this,arguments)},a.prototype.draw=function(){i.prototype.draw.apply(this,arguments)},a.prototype.stoppingImage=function(){return"unit_kinkyori_stand"},a.prototype.attackImages=function(){return["unit_kinkyori_attack1","unit_kinkyori_attack2"]},a.prototype.deadImage=function(){return"unit_kinkyori_damage"},a.prototype.walkImage1=function(){return"unit_kinkyori_walk1"},a.prototype.walkImage2=function(){return"unit_kinkyori_walk2"},a.prototype.attackEffect=function(){return"effect_slash"},a.buttonImage=function(){return"btn_icon_sakuya_normalkinkyori"},a.prototype.attackSound=function(){return"unit_normal1_attack2"},a.prototype.attackCollisionWidth=function(){return 100},a.prototype.attackCollisionHeight=function(){return 200},a.prototype.bodyCollisionWidth=function(){return 100},a.prototype.bodyCollisionHeight=function(){return 200},a.prototype.type=function(){return r.UNIT_TYPE_NORMAL1},a.consumedP=function(){return 20},a.prototype.maxHP=function(){return 150},a.prototype.damage=function(){return 10},a.prototype.speed=function(){return.5},t.exports=a},function(t,e,n){"use strict";var i=n(3),o=n(0).Util,r=n(2),a=function(t){i.apply(this,arguments)};o.inherit(a,i),a.prototype.init=function(){i.prototype.init.apply(this,arguments)},a.prototype.update=function(){i.prototype.update.apply(this,arguments)},a.prototype.draw=function(){i.prototype.draw.apply(this,arguments)},a.prototype.stoppingImage=function(){return"unit_enkyori_stand"},a.prototype.attackImages=function(){return["unit_enkyori_attack1","unit_enkyori_attack2"]},a.prototype.deadImage=function(){return"unit_enkyori_damage"},a.prototype.walkImage1=function(){return"unit_enkyori_walk1"},a.prototype.walkImage2=function(){return"unit_enkyori_walk2"},a.prototype.attackEffect=function(){return"effect_slash"},a.buttonImage=function(){return"btn_icon_sakuya_normalenkyori"},a.prototype.attackCollisionWidth=function(){return 300},a.prototype.attackCollisionHeight=function(){return 200},a.prototype.bodyCollisionWidth=function(){return 100},a.prototype.bodyCollisionHeight=function(){return 200},a.prototype.type=function(){return r.UNIT_TYPE_NORMAL2},a.consumedP=function(){return 30},a.prototype.maxHP=function(){return 100},a.prototype.damage=function(){return 10},a.prototype.speed=function(){return.5},t.exports=a},function(t,e,n){"use strict";var i=n(3),o=n(0).Util,r=n(2),a=function(t){i.apply(this,arguments)};o.inherit(a,i),a.prototype.init=function(){i.prototype.init.apply(this,arguments)},a.prototype.update=function(){i.prototype.update.apply(this,arguments)},a.prototype.draw=function(){i.prototype.draw.apply(this,arguments)},a.prototype.stoppingImage=function(){return"unit_tea_stand"},a.prototype.attackImages=function(){return["unit_tea_attack"]},a.prototype.deadImage=function(){return"unit_tea_damage"},a.buttonImage=function(){return"btn_icon_sakuya_tea"},a.prototype.deadSound=function(){return"unit_tea_damage"},a.prototype.attackCollisionWidth=function(){return 100},a.prototype.attackCollisionHeight=function(){return 200},a.prototype.bodyCollisionWidth=function(){return 100},a.prototype.bodyCollisionHeight=function(){return 200},a.prototype.type=function(){return r.UNIT_TYPE_TEA},a.consumedP=function(){return 40},a.prototype.maxHP=function(){return 1e3},a.prototype.damage=function(){return 0},a.prototype.speed=function(){return 0},t.exports=a},function(t,e,n){"use strict";var i=n(3),o=n(0).Util,r=n(2),a=function(t){i.apply(this,arguments)};o.inherit(a,i),a.prototype.init=function(){i.prototype.init.apply(this,arguments)},a.prototype.update=function(){i.prototype.update.apply(this,arguments)},a.prototype.draw=function(){i.prototype.draw.apply(this,arguments)},a.prototype.stoppingImage=function(){return"unit_meisaku_stand"},a.prototype.attackImages=function(){return["unit_meisaku_attack1","unit_meisaku_attack2","unit_meisaku_attack3"]},a.prototype.deadImage=function(){return"unit_meisaku_damage"},a.prototype.attackEffect=function(){return"effect_hit"},a.buttonImage=function(){return"btn_icon_sakuya_meisaku"},a.prototype.deadSound=function(){return"unit_meisaku_damage"},a.prototype.attackCollisionWidth=function(){return 200},a.prototype.attackCollisionHeight=function(){return 200},a.prototype.bodyCollisionWidth=function(){return 100},a.prototype.bodyCollisionHeight=function(){return 200},a.prototype.type=function(){return r.UNIT_TYPE_MEISAKU},a.consumedP=function(){return 60},a.prototype.maxHP=function(){return 100},a.prototype.damage=function(){return 300},a.prototype.speed=function(){return 0},t.exports=a},function(t,e,n){"use strict";var i=n(3),o=n(0).Util,r=n(2),a=function(t){i.apply(this,arguments)};o.inherit(a,i),a.prototype.init=function(){i.prototype.init.apply(this,arguments)},a.prototype.update=function(){i.prototype.update.apply(this,arguments)},a.prototype.draw=function(){i.prototype.draw.apply(this,arguments)},a.prototype.stoppingImage=function(){return"unit_bazooka_stand"},a.prototype.attackImages=function(){return["unit_bazooka_attack1","unit_bazooka_attack2"]},a.prototype.deadImage=function(){return"unit_bazooka_damage"},a.buttonImage=function(){return"btn_icon_sakuya_bazooka"},a.prototype.attackSound=function(){return"unit_mmd_or_bazooka_attack1"},a.prototype.attackCollisionWidth=function(){return 400},a.prototype.attackCollisionHeight=function(){return 200},a.prototype.bodyCollisionWidth=function(){return 100},a.prototype.bodyCollisionHeight=function(){return 200},a.prototype.type=function(){return r.UNIT_TYPE_BAZOOKA},a.consumedP=function(){return 80},a.prototype.maxHP=function(){return 10},a.prototype.damage=function(){return 300},a.prototype.speed=function(){return 0},t.exports=a},function(t,e,n){"use strict";var i=n(3),o=n(0).Util,r=n(2),a=function(t){i.apply(this,arguments)};o.inherit(a,i),a.prototype.init=function(){i.prototype.init.apply(this,arguments)},a.prototype.update=function(){i.prototype.update.apply(this,arguments)},a.prototype.draw=function(){i.prototype.draw.apply(this,arguments)},a.prototype.stoppingImage=function(){return"unit_mmd_stand"},a.prototype.attackImages=function(){return["unit_mmd_attack"]},a.prototype.deadImage=function(){return"unit_mmd_stand"},a.prototype.walkImage1=function(){return"unit_mmd_stand"},a.prototype.walkImage2=function(){return"unit_mmd_stand"},a.buttonImage=function(){return"btn_icon_sakuya_mmd"},a.prototype.attackSound=function(){return"unit_mmd_attack2"},a.prototype.attackCollisionWidth=function(){return 150},a.prototype.attackCollisionHeight=function(){return 200},a.prototype.bodyCollisionWidth=function(){return 100},a.prototype.bodyCollisionHeight=function(){return 200},a.prototype.type=function(){return r.UNIT_TYPE_MMD},a.consumedP=function(){return 10},a.prototype.maxHP=function(){return 1},a.prototype.damage=function(){return 10},a.prototype.speed=function(){return 15},t.exports=a},function(t,e,n){"use strict";var i=n(3),o=n(0).Util,r=n(2),a=function(t){i.apply(this,arguments)};o.inherit(a,i),a.prototype.init=function(){i.prototype.init.apply(this,arguments)},a.prototype.update=function(){i.prototype.update.apply(this,arguments)},a.prototype.draw=function(){i.prototype.draw.apply(this,arguments)},a.prototype.stoppingImage=function(){return"unit_magician_walk1"},a.prototype.attackImages=function(){return["unit_magician_attack1","unit_magician_attack2"]},a.prototype.deadImage=function(){return"unit_magician_damage"},a.prototype.walkImage1=function(){return"unit_magician_walk1"},a.prototype.walkImage2=function(){return"unit_magician_walk2"},a.buttonImage=function(){return"btn_icon_sakuya_magic"},a.prototype.attackSound=function(){return"unit_magician_attack2"},a.prototype.deadSound=function(){return"unit_magician_damage"},a.prototype.attackCollisionWidth=function(){return 150},a.prototype.attackCollisionHeight=function(){return 200},a.prototype.bodyCollisionWidth=function(){return 100},a.prototype.bodyCollisionHeight=function(){return 200},a.prototype.type=function(){return r.UNIT_TYPE_MAGICIAN},a.consumedP=function(){return 60},a.prototype.maxHP=function(){return 250},a.prototype.damage=function(){return 30},a.prototype.speed=function(){return.75},t.exports=a},function(t,e,n){"use strict";var i=n(3),o=n(0).Util,r=n(2),a=function(t){i.apply(this,arguments)};o.inherit(a,i),a.prototype.init=function(){i.prototype.init.apply(this,arguments)},a.prototype.update=function(){i.prototype.update.apply(this,arguments)},a.prototype.draw=function(){i.prototype.draw.apply(this,arguments)},a.prototype.stoppingImage=function(){return"unit_mandoragora_walk1"},a.prototype.attackImages=function(){return["unit_mandoragora_attack1","unit_mandoragora_attack2"]},a.prototype.attackImage3=function(){return"unit_mandoragora_attack3"},a.prototype.deadImage=function(){return"unit_mandoragora_damage"},a.prototype.walkImage1=function(){return"unit_mandoragora_walk1"},a.prototype.walkImage2=function(){return"unit_mandoragora_walk2"},a.buttonImage=function(){return"btn_icon_sakuya_mandoragora"},a.prototype.attackSound=function(){return"unit_mandoragora_attack2"},a.prototype.attackCollisionWidth=function(){return 100},a.prototype.attackCollisionHeight=function(){return 200},a.prototype.bodyCollisionWidth=function(){return 100},a.prototype.bodyCollisionHeight=function(){return 200},a.prototype.type=function(){return r.UNIT_TYPE_MANDORAGORA},a.consumedP=function(){return 80},a.prototype.maxHP=function(){return 400},a.prototype.damage=function(){return 50},a.prototype.speed=function(){return.5},t.exports=a},function(t,e,n){"use strict";var i=n(3),o=n(0).Util,r=n(2),a=function(t){i.apply(this,arguments)};o.inherit(a,i),a.prototype.init=function(){i.prototype.init.apply(this,arguments)},a.prototype.update=function(){i.prototype.update.apply(this,arguments)},a.prototype.draw=function(){i.prototype.draw.apply(this,arguments)},a.prototype.stoppingImage=function(){return"unit_tupai_walk1"},a.prototype.attackImages=function(){return["unit_tupai_attack1","unit_tupai_attack2","unit_tupai_attack3"]},a.prototype.deadImage=function(){return"unit_tupai_damage"},a.prototype.walkImage1=function(){return"unit_tupai_walk1"},a.prototype.walkImage2=function(){return"unit_tupai_walk2"},a.buttonImage=function(){return"btn_icon_sakuya_tupai"},a.prototype.attackSound=function(){return"unit_tupai_attack2"},a.prototype.attackCollisionWidth=function(){return 350},a.prototype.attackCollisionHeight=function(){return 200},a.prototype.bodyCollisionWidth=function(){return 100},a.prototype.bodyCollisionHeight=function(){return 200},a.prototype.type=function(){return r.UNIT_TYPE_TUPAI},a.consumedP=function(){return 120},a.prototype.maxHP=function(){return 300},a.prototype.damage=function(){return 60},a.prototype.speed=function(){return.75},t.exports=a},function(t,e,n){"use strict";var i=n(3),o=n(0).Util,r=n(2),a=function(t){i.apply(this,arguments)};o.inherit(a,i),a.prototype.init=function(){i.prototype.init.apply(this,arguments)},a.prototype.update=function(){i.prototype.update.apply(this,arguments)},a.prototype.draw=function(){i.prototype.draw.apply(this,arguments)},a.prototype.stoppingImage=function(){return"unit_yoyomu_walk1"},a.prototype.attackImages=function(){return["unit_yoyomu_attack1","unit_yoyomu_attack2"]},a.prototype.deadImage=function(){return"unit_yoyomu_damage"},a.prototype.walkImage1=function(){return"unit_yoyomu_walk1"},a.prototype.walkImage2=function(){return"unit_yoyomu_walk2"},a.prototype.attackEffect=function(){return"effect_slash"},a.buttonImage=function(){return"btn_icon_sakuya_yoyomu"},a.prototype.attackCollisionWidth=function(){return 200},a.prototype.attackCollisionHeight=function(){return 200},a.prototype.bodyCollisionWidth=function(){return 150},a.prototype.bodyCollisionHeight=function(){return 200},a.prototype.type=function(){return r.UNIT_TYPE_YOYOMU},a.consumedP=function(){return 60},a.prototype.maxHP=function(){return 150},a.prototype.damage=function(){return 20},a.prototype.speed=function(){return 2},t.exports=a},function(t,e,n){"use strict";var i=n(6),o=function(t){i.apply(this,arguments)};n(0).Util.inherit(o,i),o.prototype.init=function(){i.prototype.init.apply(this,arguments)},o.prototype.update=function(){i.prototype.update.apply(this,arguments)},o.prototype.draw=function(){i.prototype.draw.apply(this,arguments)},o.prototype.attackImage=function(){return"enemy_blue_long_attack"},o.prototype.deadImage=function(){return"enemy_blue_long_damage"},o.prototype.walkImage1=function(){return"enemy_blue_long_walk01"},o.prototype.walkImage2=function(){return"enemy_blue_long_walk02"},o.prototype.attackCollisionWidth=function(){return 350},o.prototype.attackCollisionHeight=function(){return 200},o.prototype.bodyCollisionWidth=function(){return 100},o.prototype.bodyCollisionHeight=function(){return 200},o.prototype.maxHP=function(){return 200},o.prototype.damage=function(){return 20},o.prototype.speed=function(){return 1},o.emergeCoefficient=function(){return 2},t.exports=o},function(t,e,n){"use strict";var i=n(6),o=function(t){i.apply(this,arguments)};n(0).Util.inherit(o,i),o.prototype.init=function(){i.prototype.init.apply(this,arguments)},o.prototype.update=function(){i.prototype.update.apply(this,arguments)},o.prototype.draw=function(){i.prototype.draw.apply(this,arguments)},o.prototype.attackImage=function(){return"enemy_blue_short_attack"},o.prototype.deadImage=function(){return"enemy_blue_short_damage"},o.prototype.walkImage1=function(){return"enemy_blue_short_walk01"},o.prototype.walkImage2=function(){return"enemy_blue_short_walk02"},o.prototype.attackCollisionWidth=function(){return 350},o.prototype.attackCollisionHeight=function(){return 200},o.prototype.bodyCollisionWidth=function(){return 100},o.prototype.bodyCollisionHeight=function(){return 200},o.prototype.maxHP=function(){return 100},o.prototype.damage=function(){return 10},o.prototype.speed=function(){return.5},o.emergeCoefficient=function(){return 5},t.exports=o},function(t,e,n){"use strict";var i=n(6),o=function(t){i.apply(this,arguments)};n(0).Util.inherit(o,i),o.prototype.init=function(){i.prototype.init.apply(this,arguments)},o.prototype.update=function(){i.prototype.update.apply(this,arguments)},o.prototype.draw=function(){i.prototype.draw.apply(this,arguments)},o.prototype.attackImage=function(){return"enemy_pink_long_attack"},o.prototype.deadImage=function(){return"enemy_pink_long_damage"},o.prototype.walkImage1=function(){return"enemy_pink_long_walk01"},o.prototype.walkImage2=function(){return"enemy_pink_long_walk02"},o.prototype.attackCollisionWidth=function(){return 100},o.prototype.attackCollisionHeight=function(){return 200},o.prototype.bodyCollisionWidth=function(){return 100},o.prototype.bodyCollisionHeight=function(){return 200},o.prototype.maxHP=function(){return 500},o.prototype.damage=function(){return 20},o.prototype.speed=function(){return 1},o.emergeCoefficient=function(){return 3},t.exports=o},function(t,e,n){"use strict";var i=n(6),o=function(t){i.apply(this,arguments)};n(0).Util.inherit(o,i),o.prototype.init=function(){i.prototype.init.apply(this,arguments)},o.prototype.update=function(){i.prototype.update.apply(this,arguments)},o.prototype.draw=function(){i.prototype.draw.apply(this,arguments)},o.prototype.attackImage=function(){return"enemy_pink_short_attack"},o.prototype.deadImage=function(){return"enemy_pink_short_damage"},o.prototype.walkImage1=function(){return"enemy_pink_short_walk01"},o.prototype.walkImage2=function(){return"enemy_pink_short_walk02"},o.prototype.attackCollisionWidth=function(){return 100},o.prototype.attackCollisionHeight=function(){return 200},o.prototype.bodyCollisionWidth=function(){return 100},o.prototype.bodyCollisionHeight=function(){return 200},o.prototype.maxHP=function(){return 300},o.prototype.damage=function(){return 30},o.prototype.speed=function(){return 1.5},o.emergeCoefficient=function(){return 3},t.exports=o},function(t,e,n){"use strict";var i=n(6),o=function(t){i.apply(this,arguments)};n(0).Util.inherit(o,i),o.prototype.init=function(){i.prototype.init.apply(this,arguments)},o.prototype.update=function(){i.prototype.update.apply(this,arguments)},o.prototype.draw=function(){i.prototype.draw.apply(this,arguments)},o.prototype.attackImage=function(){return"enemy_red_long_attack"},o.prototype.deadImage=function(){return"enemy_red_long_damage"},o.prototype.walkImage1=function(){return"enemy_red_long_walk01"},o.prototype.walkImage2=function(){return"enemy_red_long_walk02"},o.prototype.attackCollisionWidth=function(){return 350},o.prototype.attackCollisionHeight=function(){return 200},o.prototype.bodyCollisionWidth=function(){return 100},o.prototype.bodyCollisionHeight=function(){return 200},o.prototype.maxHP=function(){return 100},o.prototype.damage=function(){return 10},o.prototype.speed=function(){return 2.5},o.emergeCoefficient=function(){return 2},t.exports=o},function(t,e,n){"use strict";var i=n(6),o=function(t){i.apply(this,arguments)};n(0).Util.inherit(o,i),o.prototype.init=function(){i.prototype.init.apply(this,arguments)},o.prototype.update=function(){i.prototype.update.apply(this,arguments)},o.prototype.draw=function(){i.prototype.draw.apply(this,arguments)},o.prototype.attackImage=function(){return"enemy_red_short_attack"},o.prototype.deadImage=function(){return"enemy_red_short_damage"},o.prototype.walkImage1=function(){return"enemy_red_short_walk01"},o.prototype.walkImage2=function(){return"enemy_red_short_walk02"},o.prototype.attackCollisionWidth=function(){return 350},o.prototype.attackCollisionHeight=function(){return 200},o.prototype.bodyCollisionWidth=function(){return 100},o.prototype.bodyCollisionHeight=function(){return 200},o.prototype.maxHP=function(){return 100},o.prototype.damage=function(){return 40},o.prototype.speed=function(){return 1.5},o.emergeCoefficient=function(){return 1},t.exports=o},function(t,e,n){"use strict";var i=n(6),o=function(t){i.apply(this,arguments)};n(0).Util.inherit(o,i),o.prototype.init=function(){i.prototype.init.apply(this,arguments)},o.prototype.update=function(){i.prototype.update.apply(this,arguments)},o.prototype.draw=function(){i.prototype.draw.apply(this,arguments)},o.prototype.attackImage=function(){return"enemy_white_long_attack"},o.prototype.deadImage=function(){return"enemy_white_long_damage"},o.prototype.walkImage1=function(){return"enemy_white_long_walk01"},o.prototype.walkImage2=function(){return"enemy_white_long_walk02"},o.prototype.attackCollisionWidth=function(){return 100},o.prototype.attackCollisionHeight=function(){return 200},o.prototype.bodyCollisionWidth=function(){return 100},o.prototype.bodyCollisionHeight=function(){return 200},o.prototype.maxHP=function(){return 500},o.prototype.damage=function(){return 40},o.prototype.speed=function(){return.5},o.emergeCoefficient=function(){return 3},t.exports=o},function(t,e,n){"use strict";var i=n(6),o=function(t){i.apply(this,arguments)};n(0).Util.inherit(o,i),o.prototype.init=function(){i.prototype.init.apply(this,arguments)},o.prototype.update=function(){i.prototype.update.apply(this,arguments)},o.prototype.draw=function(){i.prototype.draw.apply(this,arguments)},o.prototype.attackImage=function(){return"enemy_white_short_attack"},o.prototype.deadImage=function(){return"enemy_white_short_damage"},o.prototype.walkImage1=function(){return"enemy_white_short_walk01"},o.prototype.walkImage2=function(){return"enemy_white_short_walk02"},o.prototype.attackCollisionWidth=function(){return 100},o.prototype.attackCollisionHeight=function(){return 200},o.prototype.bodyCollisionWidth=function(){return 100},o.prototype.bodyCollisionHeight=function(){return 200},o.prototype.maxHP=function(){return 200},o.prototype.damage=function(){return 40},o.prototype.speed=function(){return 2},o.emergeCoefficient=function(){return 3},t.exports=o},function(t,e,n){"use strict";var i=n(102),o=n(0).util,r=n(37),a=function(t){r.apply(this,arguments)};o.inherit(a,r),a.prototype.notifySerifStart=function(){},a.prototype.notifySerifEnd=function(){this.core.scene_manager.changeScene("clear")},a.prototype.serifScript=function(){return i},a.prototype.bgm=function(){return"result"},a.prototype.background=function(){return""},t.exports=a},function(t,e,n){"use strict";t.exports=[{background:"ed_illust1",serif:"なんとか妖精を片づけたわ"},{serif:"でもこれでたくさん労働力を捕まえられたから"},{serif:"しばらくお暇をいただけそう"},{background:"ed_illust2",serif:"見つけた！",option:{font_color:"#945ae8",outline_color:"#FFFFFF"}},{serif:"あなたは？"},{serif:"いま私のバースでは館が妖精たちに攻撃されているの",option:{font_color:"#945ae8",outline_color:"#FFFFFF"}},{serif:"だから手伝いに来て頂戴",option:{font_color:"#945ae8",outline_color:"#FFFFFF"}},{serif:"えっ妖精？"},{serif:"もう片づけたはずよ"},{background:"ed_illust3",serif:"私の世界ではこれから片づけるのよ",option:{font_color:"#945ae8",outline_color:"#FFFFFF"}},{serif:"手伝いに来てくれないと困るわ",option:{font_color:"#945ae8",outline_color:"#FFFFFF"}},{serif:"ふえ"},{serif:"ーー十六夜咲夜は気づいてしまった。",option:{font_color:"#FC4455",outline_color:"#000000"}},{background:"ed_illust4",serif:"ーーひょっとするとこの後たくさんの自分が自分をさらいに来るかもしれない。",option:{font_color:"#FC4455",outline_color:"#000000"}},{serif:"ーー十六夜咲夜は少しだけ妖精の気持ちが分かった気がしたのだった。",option:{font_color:"#FC4455",outline_color:"#000000"}}]},function(t,e,n){"use strict";var i=n(0).Util,o=n(0).Scene.Base,r=n(2),a=n(104),s=n(105),u=function(t){o.apply(this,arguments),this.addSubScene("main",new a(t)),this.addSubScene("atsumaru_share_dialog",new s(t))};i.inherit(u,o),u.prototype.init=function(){o.prototype.init.apply(this,arguments),this.core.scene_manager.setFadeIn(60,"black"),this.core.audio_loader.stopBGM(),this.changeSubScene("main")},u.prototype.update=function(){o.prototype.update.apply(this,arguments)},u.prototype.draw=function(){var t=this.core.ctx,e=this.core.image_loader.getImage("gameclear1");t.save(),t.translate(this.width/2,this.height/2),t.drawImage(e,-e.width/2,-e.height/2),t.restore(),t.save(),t.font="36px 'MyFont'",t.textAlign="right",t.textBaseline="middle",t.fillStyle="white",i.hexToRGBString("#141e46"),t.fillText("スコア: "+this.core.totalScore(),this.width-10,this.height-30),t.restore(),o.prototype.draw.apply(this,arguments)},u.prototype.exit=function(){this.core.scene_manager.setFadeOut(60,"black"),this.core.totalScore()>=r.SCORE_TO_SHOW_OMAKE?this.core.scene_manager.changeScene("omake"):this.core.scene_manager.changeScene("title")},t.exports=u},function(t,e,n){"use strict";var i=n(0).Scene.Base,o=function(t){i.apply(this,arguments),this._is_showed_screenshot_modal=!1};n(0).Util.inherit(o,i),o.prototype.init=function(){i.prototype.init.apply(this,arguments),this._is_showed_screenshot_modal=!1},o.prototype.update=function(){i.prototype.update.apply(this,arguments),this.core.input_manager.isLeftClickPush()&&(this._isEnableToScreenshotInAtsumaru()&&!this._is_showed_screenshot_modal?(this.parent.changeSubScene("atsumaru_share_dialog"),this._is_showed_screenshot_modal=!0):this.parent.exit())},o.prototype._isEnableToScreenshotInAtsumaru=function(){return window.RPGAtsumaru&&window.RPGAtsumaru.experimental.screenshot&&window.RPGAtsumaru.experimental.screenshot.displayModal},t.exports=o},function(t,e,n){"use strict";var i=n(0),o=function(t){i.Scene.Base.apply(this,arguments);var e=new i.Object.UI.Group(this,{x:this.width/2,y:this.height/2,width:360,height:120,backgroundColor:"black",alpha:.8,children:[new i.Object.UI.Text(this,{x:this.width/2,y:this.height/2-20,text:"結果をTwitterにシェアする？",textColor:"white",textSize:"22px",textAlign:"center",textFont:"MyFont"})]}),n=new i.Object.UI.Image(this,{imageName:"button_white",x:this.width/2+90,y:this.height/2+20,children:[new i.Object.UI.Text(this,{text:"シェアする",textColor:"black",textSize:"20px",textAlign:"center",textBaseline:"middle",textFont:"MyFont",x:this.width/2+90,y:this.height/2+20})]}),o=new i.Object.UI.Image(this,{imageName:"button_white",x:this.width/2-90,y:this.height/2+20,children:[new i.Object.UI.Text(this,{text:"シェアしない",textColor:"black",textSize:"20px",textAlign:"center",textBaseline:"middle",textFont:"MyFont",x:this.width/2-90,y:this.height/2+20})]}),r=this;n.setMoveOnClick().on("click",function(){r.parent.returnSubScene("main"),r.parent.core.time_manager.setTimeout(function(){window.RPGAtsumaru.experimental.screenshot.displayModal()},5)}),o.setMoveOnClick().on("click",function(){r.parent.exit()}),this.addObjects([e,n,o])};i.Util.inherit(o,i.Scene.Base),o.prototype.init=function(){i.Scene.Base.prototype.init.apply(this,arguments)},o.prototype.update=function(){i.Scene.Base.prototype.update.apply(this,arguments)},t.exports=o},function(t,e,n){"use strict";var i=n(0).Util,o=n(0).Scene.Base,r=function(t){o.apply(this,arguments)};i.inherit(r,o),r.prototype.init=function(t){o.prototype.init.apply(this,arguments),this.core.scene_manager.setFadeIn(60,"black"),this.core.scene_manager.setFadeOut(60,"black")},r.prototype.update=function(){o.prototype.update.apply(this,arguments),this.core.input_manager.isLeftClickPush()&&this.core.scene_manager.changeScene("title")},r.prototype.draw=function(){var t=this.core.ctx,e=this.core.image_loader.getImage("gameclear2");t.save(),t.translate(this.width/2,this.height/2),t.drawImage(e,-e.width/2,-e.height/2),t.restore(),t.save(),t.font="16px 'MyFont'",t.textAlign="left",t.textBaseline="middle",t.fillStyle="white",i.hexToRGBString("#141e46"),t.fillText("咲夜さんが11体いるぞ。探してみよう！",10,10),t.restore(),o.prototype.draw.apply(this,arguments)},t.exports=r},function(t,e,n){"use strict";var i={images:{logo:"./image/logo.png",title:"./image/title.png",battle_bg1:"./image/UI_Battle_bg1.jpg",battle_bg2:"./image/UI_Battle_bg2.jpg",battle_bg3:"./image/UI_Battle_bg3.jpg",battle_bg4:"./image/UI_Battle_bg4.jpg",ed_illust1:"./image/ed/ED1.png",ed_illust2:"./image/ed/ED2.png",ed_illust3:"./image/ed/ED3.png",ed_illust4:"./image/ed/ED4.png",explosion:"./image/explosion.jpg",gameover:"./image/gameover.jpg",gameclear1:"./image/gameclear1.jpg",gameclear2:"./image/gameclear2.jpg",result_frame:"./image/UI_Battle_frm_result.png",button_white:"./image/button_white.png",effect_hit:"./image/hit_01.png",effect_slash:"./image/slash_01.png",fort:"./image/koumakan_01.png",SS_Battle_spell1:"./image/SS_Battle_spell1.png",btn_arrow_l:"./image/UI_Battle_btn_arrow_l.png",btn_arrow_r:"./image/UI_Battle_btn_arrow_r.png",btn_spell_on:"./image/UI_Battle_btn_spell_on.png",btn_spell_off:"./image/UI_Battle_btn_spell_off.png",btn_icon_sakuya_bazooka:"./image/UI_Battle_icon_Sakuya_bazooka.png",btn_icon_sakuya_meisaku:"./image/UI_Battle_icon_Sakuya_meisaku.png",btn_icon_sakuya_normalenkyori:"./image/UI_Battle_icon_Sakuya_normalenkyori.png",btn_icon_sakuya_normalkinkyori:"./image/UI_Battle_icon_Sakuya_normalkinkyori.png",btn_icon_sakuya_tea:"./image/UI_Battle_icon_Sakuya_tea.png",btn_icon_sakuya_mmd:"./image/UI_Battle_icon_Sakuya_MMD.png",btn_icon_sakuya_magic:"./image/UI_Battle_icon_Sakuya_magic.png",btn_icon_sakuya_mandoragora:"./image/UI_Battle_icon_Sakuya_mandoragora.png",btn_icon_sakuya_tupai:"./image/UI_Battle_icon_Sakuya_tupai.png",btn_icon_sakuya_yoyomu:"./image/UI_Battle_icon_Sakuya_yoyomu.png",unit_kinkyori_attack1:"./image/units/kinkyori/Sakuya_normalkinkyori_attack_01.png",unit_kinkyori_attack2:"./image/units/kinkyori/Sakuya_normalkinkyori_attack_02.png",unit_kinkyori_damage:"./image/units/kinkyori/Sakuya_normalkinkyori_damage_01.png",unit_kinkyori_stand:"./image/units/kinkyori/Sakuya_normalkinkyori_stand_01.png",unit_kinkyori_walk1:"./image/units/kinkyori/Sakuya_normalkinkyori_walk_01.png",unit_kinkyori_walk2:"./image/units/kinkyori/Sakuya_normalkinkyori_walk_02.png",unit_enkyori_attack1:"./image/units/enkyori/Sakuya_normalenkyori_attack_01.png",unit_enkyori_attack2:"./image/units/enkyori/Sakuya_normalenkyori_attack_02.png",unit_enkyori_damage:"./image/units/enkyori/Sakuya_normalenkyori_damage_01.png",unit_enkyori_stand:"./image/units/enkyori/Sakuya_normalenkyori_stand_01.png",unit_enkyori_walk1:"./image/units/enkyori/Sakuya_normalenkyori_walk_01.png",unit_enkyori_walk2:"./image/units/enkyori/Sakuya_normalenkyori_walk_02.png",unit_mmd_stand:"./image/units/mmd/Sakuya_MMD_walk_01.png",unit_mmd_attack:"./image/units/mmd/Sakuya_MMD_attack_01.png",unit_magician_attack1:"./image/units/magician/Sakuya_magic_attack_01.png",unit_magician_attack2:"./image/units/magician/Sakuya_magic_attack_02.png",unit_magician_damage:"./image/units/magician/Sakuya_magic_damage_01.png",unit_magician_walk1:"./image/units/magician/Sakuya_magic_walk_01.png",unit_magician_walk2:"./image/units/magician/Sakuya_magic_walk_02.png",unit_mandoragora_attack1:"./image/units/mandoragora/Sakuya_mandoragora_attack_01.png",unit_mandoragora_attack2:"./image/units/mandoragora/Sakuya_mandoragora_attack_02.png",unit_mandoragora_attack3:"./image/units/mandoragora/Sakuya_mandoragora_attack_03.png",unit_mandoragora_damage:"./image/units/mandoragora/Sakuya_mandoragora_damage_01.png",unit_mandoragora_walk1:"./image/units/mandoragora/Sakuya_mandoragora_walk_01.png",unit_mandoragora_walk2:"./image/units/mandoragora/Sakuya_mandoragora_walk_02.png",unit_tupai_attack1:"./image/units/tupai/Sakuya_tupai_attack_01.png",unit_tupai_attack2:"./image/units/tupai/Sakuya_tupai_attack_02.png",unit_tupai_attack3:"./image/units/tupai/Sakuya_tupai_attack_03.png",unit_tupai_damage:"./image/units/tupai/Sakuya_tupai_damage_01.png",unit_tupai_walk1:"./image/units/tupai/Sakuya_tupai_walk_01.png",unit_tupai_walk2:"./image/units/tupai/Sakuya_tupai_walk_02.png",unit_yoyomu_attack1:"./image/units/yoyomu/Sakuya_yoyomu_attack_01.png",unit_yoyomu_attack2:"./image/units/yoyomu/Sakuya_yoyomu_attack_02.png",unit_yoyomu_damage:"./image/units/yoyomu/Sakuya_yoyomu_damage_01.png",unit_yoyomu_walk1:"./image/units/yoyomu/Sakuya_yoyomu_walk_01.png",unit_yoyomu_walk2:"./image/units/yoyomu/Sakuya_yoyomu_walk_02.png",unit_tea_attack:"./image/units/tea/Sakuya_tea_attack_01.png",unit_tea_damage:"./image/units/tea/Sakuya_tea_damage_01.png",unit_tea_stand:"./image/units/tea/Sakuya_tea_walk_01.png",unit_bazooka_attack1:"./image/units/bazooka/Sakuya_bazooka_attack_01.png",unit_bazooka_attack2:"./image/units/bazooka/Sakuya_bazooka_attack_02.png",unit_bazooka_damage:"./image/units/bazooka/Sakuya_bazooka_damage_01.png",unit_bazooka_stand:"./image/units/bazooka/Sakuya_bazooka_walk_01.png",unit_meisaku_attack1:"./image/units/meisaku/Sakuya_meisaku_attack_01.png",unit_meisaku_attack2:"./image/units/meisaku/Sakuya_meisaku_attack_02.png",unit_meisaku_attack3:"./image/units/meisaku/Sakuya_meisaku_attack_03.png",unit_meisaku_damage:"./image/units/meisaku/Sakuya_meisaku_damage_01.png",unit_meisaku_stand:"./image/units/meisaku/Sakuya_meisaku_walk_01.png",enemy_blue_long_attack:"./image/enemy/blue_long/Enemy_blul_attack_01.png",enemy_blue_long_damage:"./image/enemy/blue_long/Enemy_blul_damage_01.png",enemy_blue_long_walk01:"./image/enemy/blue_long/Enemy_blul_walk_01.png",enemy_blue_long_walk02:"./image/enemy/blue_long/Enemy_blul_walk_02.png",enemy_blue_short_attack:"./image/enemy/blue_short/Enemy_blus_attack_01.png",enemy_blue_short_damage:"./image/enemy/blue_short/Enemy_blus_damage_01.png",enemy_blue_short_walk01:"./image/enemy/blue_short/Enemy_blus_walk_01.png",enemy_blue_short_walk02:"./image/enemy/blue_short/Enemy_blus_walk_02.png",enemy_pink_long_attack:"./image/enemy/pink_long/Enemy_pnkl_attack_01.png",enemy_pink_long_damage:"./image/enemy/pink_long/Enemy_pnkl_damage_01.png",enemy_pink_long_walk01:"./image/enemy/pink_long/Enemy_pnkl_walk_01.png",enemy_pink_long_walk02:"./image/enemy/pink_long/Enemy_pnkl_walk_02.png",enemy_pink_short_attack:"./image/enemy/pink_short/Enemy_blus_attack_01.png",enemy_pink_short_damage:"./image/enemy/pink_short/Enemy_blus_damage_01.png",enemy_pink_short_walk01:"./image/enemy/pink_short/Enemy_blus_walk_01.png",enemy_pink_short_walk02:"./image/enemy/pink_short/Enemy_blus_walk_02.png",enemy_red_long_attack:"./image/enemy/red_long/Enemy_redl_attack_01.png",enemy_red_long_damage:"./image/enemy/red_long/Enemy_redl_damage_01.png",enemy_red_long_walk01:"./image/enemy/red_long/Enemy_redl_walk_01.png",enemy_red_long_walk02:"./image/enemy/red_long/Enemy_redl_walk_02.png",enemy_red_short_attack:"./image/enemy/red_short/Enemy_reds_attack_01.png",enemy_red_short_damage:"./image/enemy/red_short/Enemy_reds_damage_01.png",enemy_red_short_walk01:"./image/enemy/red_short/Enemy_reds_walk_01.png",enemy_red_short_walk02:"./image/enemy/red_short/Enemy_reds_walk_02.png",enemy_white_long_attack:"./image/enemy/white_long/Enemy_whtl_attack_01.png",enemy_white_long_damage:"./image/enemy/white_long/Enemy_whtl_damage_01.png",enemy_white_long_walk01:"./image/enemy/white_long/Enemy_whtl_walk_01.png",enemy_white_long_walk02:"./image/enemy/white_long/Enemy_whtl_walk_02.png",enemy_white_short_attack:"./image/enemy/white_short/Enemy_whts_attack_01.png",enemy_white_short_damage:"./image/enemy/white_short/Enemy_whts_damage_01.png",enemy_white_short_walk01:"./image/enemy/white_short/Enemy_whts_walk_01.png",enemy_white_short_walk02:"./image/enemy/white_short/Enemy_whts_walk_02.png",boss_clownpiece_normal:"./image/boss/BOSS_clownpiece_normal_01.png",boss_clownpiece_damage:"./image/boss/BOSS_clownpiece_damage_01.png",boss_lunachild_normal:"./image/boss/BOSS_luna_normal_01.png",boss_lunachild_damage:"./image/boss/BOSS_luna_damage_01.png",boss_starsapphire_normal:"./image/boss/BOSS_star_normal_01.png",boss_starsapphire_damage:"./image/boss/BOSS_star_damage_01.png",boss_sunnymilk_normal:"./image/boss/BOSS_sunny_normal_01.png",boss_sunnymilk_damage:"./image/boss/BOSS_sunny_damage_01.png"},sounds:{gameover01:{path:"./sound/se_maoudamashii_explosion02",volume:.1},summon_unit:{path:"./sound/se_maoudamashii_magical07",volume:.1},use_spellcard:{path:"./sound/se_maoudamashii_magical21",volume:.1},result:{path:"./sound/se_maoudamashii_system46",volume:.1},unit_default_damage:{path:"./sound/se_maoudamashii_battle15",volume:.1},unit_tea_damage:{path:"./sound/se_maoudamashii_element_water01",volume:.1},unit_meisaku_damage:{path:"./sound/se_maoudamashii_battle09",volume:.1},unit_magician_damage:{path:"./sound/se_maoudamashii_battle05",volume:.1},enemy_damage:{path:"./sound/se_maoudamashii_magical28",volume:.1},boss_damage:{path:"./sound/se_maoudamashii_explosion04",volume:.1},unit_normal1_attack2:{path:"./sound/se_maoudamashii_battle17",volume:.1},unit_default_attack2:{path:"./sound/se_maoudamashii_battle03",volume:.1},unit_mmd_or_bazooka_attack1:{path:"./sound/se_maoudamashii_explosion03",volume:.1},unit_tupai_attack2:{path:"./sound/se_maoudamashii_battle11",volume:.1},unit_magician_attack2:{path:"./sound/se_maoudamashii_magical25",volume:.1},unit_mandoragora_attack2:{path:"./sound/se_maoudamashii_battle19",volume:.1},unit_mmd_attack2:{path:"./sound/se_maoudamashii_voice_human02",volume:.1},enemy_attack:{path:"./sound/se_maoudamashii_battle18",volume:.1}},bgms:{title:{path:"./bgm/title/bgm_maoudamashii_fantasy12",loopStart:0,volume:.1},battle:{path:"./bgm/battle/bgm_maoudamashii_ethnic31",loopStart:0,volume:.1},result:{path:"./bgm/result/bgm_maoudamashii_acoustic38",loopStart:0,volume:.1}},fonts:{MyFont:{path:"LightNovelPop.ttf",format:"truetype"}}};t.exports=i}]);